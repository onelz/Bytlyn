  [1m[36mActiveRecord::SchemaMigration Load (5.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36m (181.3ms)[0m  [1mDROP DATABASE IF EXISTS "bytlyn_test"[0m
  [1m[35m (473.9ms)[0m  CREATE DATABASE "bytlyn_test" ENCODING = 'unicode'
  [1m[36mSQL (7.4ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (106.4ms)[0m  CREATE TABLE "accounts" ("id" serial primary key, "email" character varying NOT NULL, "rest" boolean NOT NULL, "name" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "password_digest" character varying) 
  [1m[36m (6.3ms)[0m  [1mCREATE TABLE "customers" ("id" serial primary key, "user_id" integer NOT NULL, "phone_number" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (96.9ms)[0m  CREATE TABLE "restaurants" ("id" serial primary key, "user_id" integer NOT NULL, "address" character varying, "hours" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (47.9ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "name" character varying NOT NULL, "rest" boolean NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (3.4ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (1.6ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (3.6ms)[0m  CREATE TABLE "waitlists" ("id" serial primary key, "rest_id" integer NOT NULL, "cust_id" integer NOT NULL, "people" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (3.0ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (1.7ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.4ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (3.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151020022841')
  [1m[36m (3.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151009043556')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151020021727')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151020022423')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.5ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (5.8ms)[0m  [1mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (1.6ms)[0m  BEGIN
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "customers"[0m
  [1m[35mFixture Insert (3.6ms)[0m  INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:23, 2015-10-20 06:25:23).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "customers"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:23, 2015-10-20 06:25:23).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "customers"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:23, 2015-10-20 06:25:23).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "customers"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:23, 2015-10-20 06:25:23).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "customers"[0m
  [1m[35mFixture Insert (0.8ms)[0m  INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:23, 2015-10-20 06:25:23).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "customers"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:23, 2015-10-20 06:25:23).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "customers"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:23, 2015-10-20 06:25:23).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "customers"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:23, 2015-10-20 06:25:23).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "customers"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:23, 2015-10-20 06:25:23).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "customers"[0m
  [1m[35mFixture Insert (0.8ms)[0m  INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:23, 2015-10-20 06:25:23).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "customers"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:23, 2015-10-20 06:25:23).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "customers"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:23, 2015-10-20 06:25:23).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "customers"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:23, 2015-10-20 06:25:23).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "customers"[0m
  [1m[35mFixture Insert (0.8ms)[0m  INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:23, 2015-10-20 06:25:23).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "customers"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:23, 2015-10-20 06:25:23).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "customers"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:23, 2015-10-20 06:25:23).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "customers"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:23, 2015-10-20 06:25:23).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "customers"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:23, 2015-10-20 06:25:23).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "customers"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:23, 2015-10-20 06:25:23).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "customers"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:23, 2015-10-20 06:25:23).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "customers"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:23, 2015-10-20 06:25:23).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:23', '2015-10-20 06:25:23', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (1.2ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:49, 2015-10-20 06:25:49).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (1.0ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:49, 2015-10-20 06:25:49).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:49, 2015-10-20 06:25:49).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:49, 2015-10-20 06:25:49).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (1.4ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:49, 2015-10-20 06:25:49).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (1.3ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:49, 2015-10-20 06:25:49).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (6.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (1.2ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:49, 2015-10-20 06:25:49).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (1.0ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (1.0ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:49, 2015-10-20 06:25:49).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:49, 2015-10-20 06:25:49).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.9ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (1.1ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:49, 2015-10-20 06:25:49).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:49, 2015-10-20 06:25:49).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (1.4ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:49, 2015-10-20 06:25:49).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:49, 2015-10-20 06:25:49).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (1.2ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:49, 2015-10-20 06:25:49).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:49, 2015-10-20 06:25:49).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:49, 2015-10-20 06:25:49).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:49, 2015-10-20 06:25:49).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:49, 2015-10-20 06:25:49).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:49, 2015-10-20 06:25:49).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:49, 2015-10-20 06:25:49).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:25:49, 2015-10-20 06:25:49).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:25:49', '2015-10-20 06:25:49', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.4ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (1.2ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:26:10, 2015-10-20 06:26:10).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:26:10, 2015-10-20 06:26:10).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:26:10, 2015-10-20 06:26:10).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (1.3ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:26:10, 2015-10-20 06:26:10).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (1.0ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:26:10, 2015-10-20 06:26:10).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (1.0ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:26:10, 2015-10-20 06:26:10).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (5.2ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:26:10, 2015-10-20 06:26:10).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.8ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:26:10, 2015-10-20 06:26:10).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:26:10, 2015-10-20 06:26:10).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:26:10, 2015-10-20 06:26:10).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:26:10, 2015-10-20 06:26:10).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:26:10, 2015-10-20 06:26:10).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:26:10, 2015-10-20 06:26:10).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:26:10, 2015-10-20 06:26:10).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:26:10, 2015-10-20 06:26:10).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:26:10, 2015-10-20 06:26:10).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)
  [1m[35m (4.7ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:26:10, 2015-10-20 06:26:10).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (1.0ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (1.8ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:26:10, 2015-10-20 06:26:10).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:26:10, 2015-10-20 06:26:10).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:26:10, 2015-10-20 06:26:10).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, 2015-10-20 06:26:10, 2015-10-20 06:26:10).
: INSERT INTO "customers" ("created_at", "updated_at", "id") VALUES ('2015-10-20 06:26:10', '2015-10-20 06:26:10', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[36mActiveRecord::SchemaMigration Load (4.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (9.6ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (1.0ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (4.6ms)[0m  DELETE FROM "customers"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "customers"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (2.8ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "customers"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "customers"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "customers"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "customers"[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "customers"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.9ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (1.1ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at", "id") VALUES (1, 123, '2015-10-21 22:18:18', '2015-10-21 22:18:18', 980190962)[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "restaurants"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at", "id") VALUES (1, '1893 Berkeley Avenue', '9:00 am - 10:00 pm', '2015-10-21 22:18:18', '2015-10-21 22:18:18', 980190962)[0m
  [1m[35mFixture Delete (2.0ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.9ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:18', '2015-10-21 22:18:18', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "email" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, null, null, null, null, null, null, null, null, null, null, 2015-10-21 22:18:18, 2015-10-21 22:18:18).
: INSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:18', '2015-10-21 22:18:18', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at", "id") VALUES (1, 123, '2015-10-21 22:18:18', '2015-10-21 22:18:18', 980190962)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "restaurants"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at", "id") VALUES (1, '1893 Berkeley Avenue', '9:00 am - 10:00 pm', '2015-10-21 22:18:18', '2015-10-21 22:18:18', 980190962)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:18', '2015-10-21 22:18:18', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "email" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, null, null, null, null, null, null, null, null, null, null, 2015-10-21 22:18:18, 2015-10-21 22:18:18).
: INSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:18', '2015-10-21 22:18:18', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at", "id") VALUES (1, 123, '2015-10-21 22:18:18', '2015-10-21 22:18:18', 980190962)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "restaurants"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at", "id") VALUES (1, '1893 Berkeley Avenue', '9:00 am - 10:00 pm', '2015-10-21 22:18:18', '2015-10-21 22:18:18', 980190962)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.0ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:18', '2015-10-21 22:18:18', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "email" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, null, null, null, null, null, null, null, null, null, null, 2015-10-21 22:18:18, 2015-10-21 22:18:18).
: INSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:18', '2015-10-21 22:18:18', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at", "id") VALUES (1, 123, '2015-10-21 22:18:19', '2015-10-21 22:18:19', 980190962)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "restaurants"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at", "id") VALUES (1, '1893 Berkeley Avenue', '9:00 am - 10:00 pm', '2015-10-21 22:18:19', '2015-10-21 22:18:19', 980190962)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:19', '2015-10-21 22:18:19', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "email" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, null, null, null, null, null, null, null, null, null, null, 2015-10-21 22:18:19, 2015-10-21 22:18:19).
: INSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:19', '2015-10-21 22:18:19', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at", "id") VALUES (1, 123, '2015-10-21 22:18:19', '2015-10-21 22:18:19', 980190962)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "restaurants"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at", "id") VALUES (1, '1893 Berkeley Avenue', '9:00 am - 10:00 pm', '2015-10-21 22:18:19', '2015-10-21 22:18:19', 980190962)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:19', '2015-10-21 22:18:19', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "email" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, null, null, null, null, null, null, null, null, null, null, 2015-10-21 22:18:19, 2015-10-21 22:18:19).
: INSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:19', '2015-10-21 22:18:19', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at", "id") VALUES (1, 123, '2015-10-21 22:18:19', '2015-10-21 22:18:19', 980190962)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "restaurants"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at", "id") VALUES (1, '1893 Berkeley Avenue', '9:00 am - 10:00 pm', '2015-10-21 22:18:19', '2015-10-21 22:18:19', 980190962)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:19', '2015-10-21 22:18:19', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "email" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, null, null, null, null, null, null, null, null, null, null, 2015-10-21 22:18:19, 2015-10-21 22:18:19).
: INSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:19', '2015-10-21 22:18:19', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at", "id") VALUES (1, 123, '2015-10-21 22:18:19', '2015-10-21 22:18:19', 980190962)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "restaurants"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at", "id") VALUES (1, '1893 Berkeley Avenue', '9:00 am - 10:00 pm', '2015-10-21 22:18:19', '2015-10-21 22:18:19', 980190962)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:19', '2015-10-21 22:18:19', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "email" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, null, null, null, null, null, null, null, null, null, null, 2015-10-21 22:18:19, 2015-10-21 22:18:19).
: INSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:19', '2015-10-21 22:18:19', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.0ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at", "id") VALUES (1, 123, '2015-10-21 22:18:48', '2015-10-21 22:18:48', 980190962)[0m
  [1m[35mFixture Delete (1.4ms)[0m  DELETE FROM "restaurants"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at", "id") VALUES (1, '1893 Berkeley Avenue', '9:00 am - 10:00 pm', '2015-10-21 22:18:48', '2015-10-21 22:18:48', 980190962)[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.8ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:48', '2015-10-21 22:18:48', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "email" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, null, null, null, null, null, null, null, null, null, null, 2015-10-21 22:18:48, 2015-10-21 22:18:48).
: INSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:48', '2015-10-21 22:18:48', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at", "id") VALUES (1, 123, '2015-10-21 22:18:48', '2015-10-21 22:18:48', 980190962)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "restaurants"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at", "id") VALUES (1, '1893 Berkeley Avenue', '9:00 am - 10:00 pm', '2015-10-21 22:18:48', '2015-10-21 22:18:48', 980190962)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:48', '2015-10-21 22:18:48', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "email" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, null, null, null, null, null, null, null, null, null, null, 2015-10-21 22:18:48, 2015-10-21 22:18:48).
: INSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:48', '2015-10-21 22:18:48', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at", "id") VALUES (1, 123, '2015-10-21 22:18:48', '2015-10-21 22:18:48', 980190962)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "restaurants"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at", "id") VALUES (1, '1893 Berkeley Avenue', '9:00 am - 10:00 pm', '2015-10-21 22:18:48', '2015-10-21 22:18:48', 980190962)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:48', '2015-10-21 22:18:48', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "email" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, null, null, null, null, null, null, null, null, null, null, 2015-10-21 22:18:48, 2015-10-21 22:18:48).
: INSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:48', '2015-10-21 22:18:48', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at", "id") VALUES (1, 123, '2015-10-21 22:18:48', '2015-10-21 22:18:48', 980190962)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "restaurants"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at", "id") VALUES (1, '1893 Berkeley Avenue', '9:00 am - 10:00 pm', '2015-10-21 22:18:48', '2015-10-21 22:18:48', 980190962)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.0ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:48', '2015-10-21 22:18:48', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "email" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, null, null, null, null, null, null, null, null, null, null, 2015-10-21 22:18:48, 2015-10-21 22:18:48).
: INSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:48', '2015-10-21 22:18:48', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at", "id") VALUES (1, 123, '2015-10-21 22:18:48', '2015-10-21 22:18:48', 980190962)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "restaurants"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at", "id") VALUES (1, '1893 Berkeley Avenue', '9:00 am - 10:00 pm', '2015-10-21 22:18:48', '2015-10-21 22:18:48', 980190962)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:48', '2015-10-21 22:18:48', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "email" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, null, null, null, null, null, null, null, null, null, null, 2015-10-21 22:18:48, 2015-10-21 22:18:48).
: INSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:48', '2015-10-21 22:18:48', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at", "id") VALUES (1, 123, '2015-10-21 22:18:48', '2015-10-21 22:18:48', 980190962)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "restaurants"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at", "id") VALUES (1, '1893 Berkeley Avenue', '9:00 am - 10:00 pm', '2015-10-21 22:18:49', '2015-10-21 22:18:49', 980190962)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:49', '2015-10-21 22:18:49', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "email" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, null, null, null, null, null, null, null, null, null, null, 2015-10-21 22:18:49, 2015-10-21 22:18:49).
: INSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:49', '2015-10-21 22:18:49', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at", "id") VALUES (1, 123, '2015-10-21 22:18:49', '2015-10-21 22:18:49', 980190962)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "restaurants"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at", "id") VALUES (1, '1893 Berkeley Avenue', '9:00 am - 10:00 pm', '2015-10-21 22:18:49', '2015-10-21 22:18:49', 980190962)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:49', '2015-10-21 22:18:49', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "email" violates not-null constraint
DETAIL:  Failing row contains (980190962, null, null, null, null, null, null, null, null, null, null, null, null, 2015-10-21 22:18:49, 2015-10-21 22:18:49).
: INSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "sign_in_count", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2015-10-21 22:18:49', '2015-10-21 22:18:49', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.1ms)[0m  ALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at", "id") VALUES (1, 123, '2015-10-21 22:20:20', '2015-10-21 22:20:20', 980190962)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "restaurants"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at", "id") VALUES (1, '1893 Berkeley Avenue', '9:00 am - 10:00 pm', '2015-10-21 22:20:20', '2015-10-21 22:20:20', 980190962)[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.4ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES ('abc@gmail.com', 'abcd', 'abcd', '2015-10-09', '2015-10-09', '2015-10-10', '2015-10-10', '192.168.1.5', '192.168.1.9', 'FendyOnel', 't', '2015-10-21 22:20:20', '2015-10-21 22:20:20', 980190962)[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "waitlists"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "waitlists" ("rest_id", "cust_id", "people", "created_at", "updated_at", "id") VALUES (2, 1, 10, '2015-10-21 22:20:20', '2015-10-21 22:20:20', 980190962)[0m
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RestaurantsControllerTest: test_should_update_restaurant
--------------------------------------------------------
  [1m[36mRestaurant Load (0.5ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by RestaurantsController#update as HTML
  Parameters: {"restaurant"=>{}, "id"=>"980190962"}
  [1m[35mRestaurant Load (0.5ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/restaurants/980190962
Completed 302 Found in 19ms (ActiveRecord: 1.1ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RestaurantsControllerTest: test_should_destroy_restaurant
---------------------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "restaurants"
Processing by RestaurantsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "restaurants" WHERE "restaurants"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/restaurants
Completed 302 Found in 5ms (ActiveRecord: 1.1ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------
RestaurantsControllerTest: test_should_get_new
----------------------------------------------
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by RestaurantsController#new as HTML
  Rendered restaurants/_form.html.erb (36.3ms)
  Rendered restaurants/new.html.erb within layouts/application (45.0ms)
Completed 200 OK in 1900ms (Views: 1899.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------
RestaurantsControllerTest: test_should_show_restaurant
------------------------------------------------------
  [1m[36mRestaurant Load (0.5ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 980190962]]
  Rendered restaurants/show.html.erb within layouts/application (1.2ms)
Completed 200 OK in 7ms (Views: 5.3ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------
RestaurantsControllerTest: test_should_get_edit
-----------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 980190962]]
  Rendered restaurants/_form.html.erb (2.4ms)
  Rendered restaurants/edit.html.erb within layouts/application (3.5ms)
Completed 200 OK in 8ms (Views: 6.7ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RestaurantsControllerTest: test_should_create_restaurant
--------------------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "restaurants"
Processing by RestaurantsController#create as HTML
  Parameters: {"restaurant"=>{"user_id"=>"10", "address"=>"MLK", "hours"=>"24hr"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 10], ["address", "MLK"], ["hours", "24hr"], ["created_at", "2015-10-21 22:20:22.193932"], ["updated_at", "2015-10-21 22:20:22.193932"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/restaurants/980190963
Completed 302 Found in 5ms (ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by RestaurantsController#index as HTML
  [1m[35mRestaurant Load (1.1ms)[0m  SELECT "restaurants".* FROM "restaurants"
  Rendered restaurants/index.html.erb within layouts/application (3.7ms)
Completed 200 OK in 7ms (Views: 5.6ms | ActiveRecord: 1.1ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (6.1ms)[0m  ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.5ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (2.0ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at", "id") VALUES (1, 123, '2015-10-22 03:11:38', '2015-10-22 03:11:38', 980190962)[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "restaurants"
  [1m[36mFixture Insert (1.1ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at", "id") VALUES (1, '1893 Berkeley Avenue', '9:00 am - 10:00 pm', '2015-10-22 03:11:38', '2015-10-22 03:11:38', 980190962)[0m
  [1m[35mFixture Delete (2.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (3.3ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES ('abc@gmail.com', 'abcd', 'abcd', '2015-10-09', '2015-10-09', '2015-10-10', '2015-10-10', '192.168.1.5', '192.168.1.9', 'FendyOnel', 't', '2015-10-22 03:11:38', '2015-10-22 03:11:38', 980190962)[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "waitlists"
  [1m[36mFixture Insert (1.0ms)[0m  [1mINSERT INTO "waitlists" ("rest_id", "cust_id", "people", "created_at", "updated_at", "id") VALUES (2, 1, 10, '2015-10-22 03:11:38', '2015-10-22 03:11:38', 980190962)[0m
  [1m[35m (0.8ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RestaurantsControllerTest: test_should_create_restaurant
--------------------------------------------------------
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "restaurants"
Processing by RestaurantsController#create as HTML
  Parameters: {"restaurant"=>{"user_id"=>"10", "address"=>"MLK", "hours"=>"24hr"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  INSERT INTO "restaurants" ("address", "hours", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["address", "MLK"], ["hours", "24hr"], ["user_id", 10], ["created_at", "2015-10-22 03:11:38.706638"], ["updated_at", "2015-10-22 03:11:38.706638"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/restaurants/980190963
Completed 302 Found in 14ms (ActiveRecord: 3.2ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RestaurantsControllerTest: test_should_destroy_restaurant
---------------------------------------------------------
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
Processing by RestaurantsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "restaurants" WHERE "restaurants"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/restaurants
Completed 302 Found in 6ms (ActiveRecord: 0.9ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------
RestaurantsControllerTest: test_should_get_new
----------------------------------------------
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by RestaurantsController#new as HTML
  Rendered restaurants/new.html.erb within layouts/application (43.8ms)
Completed 500 Internal Server Error in 58ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-----------------------------------------------
RestaurantsControllerTest: test_should_get_edit
-----------------------------------------------
  [1m[36mRestaurant Load (0.5ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 980190962]]
  Rendered restaurants/_form.html.erb (4.4ms)
  Rendered restaurants/edit.html.erb within layouts/application (9.8ms)
Completed 500 Internal Server Error in 308ms (ActiveRecord: 0.4ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by RestaurantsController#index as HTML
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT "restaurants".* FROM "restaurants"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered restaurants/index.html.erb within layouts/application (7.3ms)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------
RestaurantsControllerTest: test_should_show_restaurant
------------------------------------------------------
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  Rendered restaurants/show.html.erb within layouts/application (1.3ms)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------------
RestaurantsControllerTest: test_should_update_restaurant
--------------------------------------------------------
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by RestaurantsController#update as HTML
  Parameters: {"restaurant"=>{}, "id"=>"980190962"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Completed 400 Bad Request in 2ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (3.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (9.5ms)[0m  ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.7ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (5.0ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (4.4ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at", "id") VALUES (1, 123, '2015-10-24 03:16:27', '2015-10-24 03:16:27', 980190962)[0m
  [1m[35mFixture Delete (1.5ms)[0m  DELETE FROM "restaurants"
  [1m[36mFixture Insert (1.0ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at", "id") VALUES (1, '1893 Berkeley Avenue', '9:00 am - 10:00 pm', '2015-10-24 03:16:27', '2015-10-24 03:16:27', 518579358)[0m
  [1m[35mFixture Delete (3.0ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (3.6ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES ('abc@gmail.com', 'abcd', 'abcd', '2015-10-09', '2015-10-09', '2015-10-10', '2015-10-10', '192.168.1.5', '192.168.1.9', 'FendyOnel', 't', '2015-10-24 03:16:27', '2015-10-24 03:16:27', 980190962)[0m
  [1m[35mFixture Delete (1.9ms)[0m  DELETE FROM "waitlists"
  [1m[36mFixture Insert (1.1ms)[0m  [1mINSERT INTO "waitlists" ("rest_id", "cust_id", "people", "created_at", "updated_at", "id") VALUES (2, 1, 10, '2015-10-24 03:16:27', '2015-10-24 03:16:27', 980190962)[0m
  [1m[35m (2.0ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------------
WaitlistTest: test_cust_id_==_rest_id_able_to_waitlist_more_than_once
---------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.119974"], ["updated_at", "2015-10-24 03:16:27.119974"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.9ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$WzDL1uA2JDmKPbFrSbby0eJInrWFmHOMw2BtgllStq7gMq9/9qNHG"], ["created_at", "2015-10-24 03:16:27.159897"], ["updated_at", "2015-10-24 03:16:27.159897"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:27.166435"], ["updated_at", "2015-10-24 03:16:27.166435"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$t8SL5h9zaZBW48uHOvS6sOu0uV7R5jw.Sj1qsi4Bc4SswVwACg3dy"], ["created_at", "2015-10-24 03:16:27.172376"], ["updated_at", "2015-10-24 03:16:27.172376"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.175795"], ["updated_at", "2015-10-24 03:16:27.175795"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$gy7.7AvBIUVi6k0dYGsoROThMrdAtIgn8OzMelJvn7n95omS0Ily2"], ["created_at", "2015-10-24 03:16:27.194053"], ["updated_at", "2015-10-24 03:16:27.194053"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-24 03:16:27.198190"], ["updated_at", "2015-10-24 03:16:27.198190"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$BTmm/6OF5N.qHqbJiW/IwObqlS6BUzGhpjYkdOiOBQeCpHGWjrCcG"], ["created_at", "2015-10-24 03:16:27.204258"], ["updated_at", "2015-10-24 03:16:27.204258"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "waitlists"[0m
  [1m[35mUser Load (1.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 1], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-24 03:16:27.230158"], ["updated_at", "2015-10-24 03:16:27.230158"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists"[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 1], ["rest_id", 1], ["people", 4], ["created_at", "2015-10-24 03:16:27.236598"], ["updated_at", "2015-10-24 03:16:27.236598"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
WaitlistTest: test_unique_customer_to_restaurant_waitlist
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.241072"], ["updated_at", "2015-10-24 03:16:27.241072"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$WlUuuJujeV9ZZ85vUpuYpuj/30sCR4MVKzEMhf5S.hmimZg1fUEtm"], ["created_at", "2015-10-24 03:16:27.245948"], ["updated_at", "2015-10-24 03:16:27.245948"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:27.248715"], ["updated_at", "2015-10-24 03:16:27.248715"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$jdYhqaOeNUwj3MPclq8Pne0mpYQVfQbvTLBQsLYmdsFpFYbqr5RDC"], ["created_at", "2015-10-24 03:16:27.254550"], ["updated_at", "2015-10-24 03:16:27.254550"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.258632"], ["updated_at", "2015-10-24 03:16:27.258632"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$9Sjb4wa8NduPtn04qY4O0OuaOTzRkB.wXkKtfasqLCxZACCjgvrQm"], ["created_at", "2015-10-24 03:16:27.266250"], ["updated_at", "2015-10-24 03:16:27.266250"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-24 03:16:27.269261"], ["updated_at", "2015-10-24 03:16:27.269261"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$6idWE4bZ9lag1L0ewqdxQOzWgD8cORHzJsAFvoy91Q39TJk9WkNhm"], ["created_at", "2015-10-24 03:16:27.276171"], ["updated_at", "2015-10-24 03:16:27.276171"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 2], ["rest_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-24 03:16:27.282680"], ["updated_at", "2015-10-24 03:16:27.282680"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 2], ["rest_id", 1]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
WaitlistTest: test_position_if_deleted_2nd_place
------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.290190"], ["updated_at", "2015-10-24 03:16:27.290190"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$eQReSix6PmVUAwav.fnEduMbjBaYeVOqGZHi8dlgT.5QfvEkigydO"], ["created_at", "2015-10-24 03:16:27.296002"], ["updated_at", "2015-10-24 03:16:27.296002"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:27.298295"], ["updated_at", "2015-10-24 03:16:27.298295"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$6ON02Ox9l9zMtoElNCveI.9eAHlbCb4cMnJh/mriN/t34nzHRkJkm"], ["created_at", "2015-10-24 03:16:27.304764"], ["updated_at", "2015-10-24 03:16:27.304764"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.307837"], ["updated_at", "2015-10-24 03:16:27.307837"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$j889JFBx0PMluvJoZnZSgefMs1PnDNCKhQpjtin0hmHIrKPnVSRRq"], ["created_at", "2015-10-24 03:16:27.326477"], ["updated_at", "2015-10-24 03:16:27.326477"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-24 03:16:27.328655"], ["updated_at", "2015-10-24 03:16:27.328655"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$2k5qkiwu.E4YBbWXD6ine.sJ9RS63IzjOs1cKk0e.PW7jfvKwzPvK"], ["created_at", "2015-10-24 03:16:27.333129"], ["updated_at", "2015-10-24 03:16:27.333129"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 2], ["rest_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-24 03:16:27.338711"], ["updated_at", "2015-10-24 03:16:27.338711"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 4], ["rest_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 4], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-24 03:16:27.343893"], ["updated_at", "2015-10-24 03:16:27.343893"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mWaitlist Load (0.8ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 2]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-24 03:16:27.338711')[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 4]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-24 03:16:27.343893')[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.4ms)[0m  [1mSELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."id" = $1 LIMIT 1[0m  [["id", 980190967]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "waitlists" WHERE "waitlists"."id" = $1[0m  [["id", 980190967]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mWaitlist Load (0.3ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-24 03:16:27.338711')  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.3ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 4]]
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["rest_id", 1]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------
WaitlistTest: test_id_cust_id_is_invalid
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.363157"], ["updated_at", "2015-10-24 03:16:27.363157"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$XhAC9A2u.iR06Okr14t4rO5pdhNLsoBzi4bmeOKzVegiKEo20eTJy"], ["created_at", "2015-10-24 03:16:27.368356"], ["updated_at", "2015-10-24 03:16:27.368356"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:27.371180"], ["updated_at", "2015-10-24 03:16:27.371180"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$evN/0sRHFlNR1WdP3vj0TemNqsCMMeEDq9JZHHiTMZ0pZy45dOlf2"], ["created_at", "2015-10-24 03:16:27.377217"], ["updated_at", "2015-10-24 03:16:27.377217"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.379630"], ["updated_at", "2015-10-24 03:16:27.379630"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$/n1IPkoHVVdVHlfDVnzeAu1/tnH/uVu75OnAEf9z0flUq15njEXcy"], ["created_at", "2015-10-24 03:16:27.384889"], ["updated_at", "2015-10-24 03:16:27.384889"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-24 03:16:27.386989"], ["updated_at", "2015-10-24 03:16:27.386989"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$KZJMk8N9s33nAmO.yMM62.JCTMAl7J/xZANCLcRNt/JPP6GMHJBTy"], ["created_at", "2015-10-24 03:16:27.392420"], ["updated_at", "2015-10-24 03:16:27.392420"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 2], ["rest_id", 1]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WaitlistTest: test_position_in_2_restaurants
--------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.400409"], ["updated_at", "2015-10-24 03:16:27.400409"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$JFcH0ALdoV/GbQN.qfOR2.cVKIjsgrqTotdBFrlHzzZ2gQ.LqytVu"], ["created_at", "2015-10-24 03:16:27.408041"], ["updated_at", "2015-10-24 03:16:27.408041"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:27.411350"], ["updated_at", "2015-10-24 03:16:27.411350"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$PXk2C.9JDdPriCqt7hbBn.5EckIZ9bibQfdTdBRexPjUs0uxJtBtO"], ["created_at", "2015-10-24 03:16:27.417703"], ["updated_at", "2015-10-24 03:16:27.417703"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.420418"], ["updated_at", "2015-10-24 03:16:27.420418"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$Z3hVEHCHa39ic0kj/BdFUOxckmn0n28Si1LE6TJJ1I9/3cvRGhH5C"], ["created_at", "2015-10-24 03:16:27.425885"], ["updated_at", "2015-10-24 03:16:27.425885"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-24 03:16:27.428276"], ["updated_at", "2015-10-24 03:16:27.428276"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$2W2pCnWluXRmtw.1xpWy7OXiRIWUsLxdE/X2WLTQYXZECmt/5ZhaS"], ["created_at", "2015-10-24 03:16:27.432821"], ["updated_at", "2015-10-24 03:16:27.432821"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 2], ["rest_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-24 03:16:27.437934"], ["updated_at", "2015-10-24 03:16:27.437934"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 4], ["rest_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 4], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-24 03:16:27.443614"], ["updated_at", "2015-10-24 03:16:27.443614"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 4], ["rest_id", 3]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 4], ["rest_id", 3], ["people", 3], ["created_at", "2015-10-24 03:16:27.448093"], ["updated_at", "2015-10-24 03:16:27.448093"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 2], ["rest_id", 3]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 2], ["rest_id", 3], ["people", 3], ["created_at", "2015-10-24 03:16:27.452439"], ["updated_at", "2015-10-24 03:16:27.452439"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 2]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-24 03:16:27.437934')[0m  [["rest_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-24 03:16:27.452439')  [["rest_id", 3]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 4]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-24 03:16:27.443614')  [["rest_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-24 03:16:27.448093')[0m  [["rest_id", 3]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["rest_id", 3]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
WaitlistTest: test_delete_position_in_2_restaurants
---------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.463890"], ["updated_at", "2015-10-24 03:16:27.463890"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$l2NIBmItu.ZerYjMZl9rAuj0bvn1lfroAoENX/.8kUFMJe1z5TyH2"], ["created_at", "2015-10-24 03:16:27.470228"], ["updated_at", "2015-10-24 03:16:27.470228"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:27.473557"], ["updated_at", "2015-10-24 03:16:27.473557"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$vA5TA2qn58bPmATJBJbNDeHnpVXP1Z0vD5aS8gtDoZGAhAynvvW7m"], ["created_at", "2015-10-24 03:16:27.479619"], ["updated_at", "2015-10-24 03:16:27.479619"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.481731"], ["updated_at", "2015-10-24 03:16:27.481731"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$qdrxc6mynTa9wYAHeq/cRuClufpXueHE8GiTirs2xAn8XFKp3jaby"], ["created_at", "2015-10-24 03:16:27.486249"], ["updated_at", "2015-10-24 03:16:27.486249"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-24 03:16:27.488310"], ["updated_at", "2015-10-24 03:16:27.488310"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$c1lZvlCR43YBmsn3TUab5.P7dAQm6jMx34Ug0i5gHdIqc.6/SSwUa"], ["created_at", "2015-10-24 03:16:27.492711"], ["updated_at", "2015-10-24 03:16:27.492711"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 2], ["rest_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-24 03:16:27.497496"], ["updated_at", "2015-10-24 03:16:27.497496"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 4], ["rest_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 4], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-24 03:16:27.502198"], ["updated_at", "2015-10-24 03:16:27.502198"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 4], ["rest_id", 3]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 4], ["rest_id", 3], ["people", 3], ["created_at", "2015-10-24 03:16:27.506400"], ["updated_at", "2015-10-24 03:16:27.506400"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 2], ["rest_id", 3]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 2], ["rest_id", 3], ["people", 3], ["created_at", "2015-10-24 03:16:27.510809"], ["updated_at", "2015-10-24 03:16:27.510809"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 2]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-24 03:16:27.497496')[0m  [["rest_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-24 03:16:27.510809')  [["rest_id", 3]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 4]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-24 03:16:27.502198')  [["rest_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-24 03:16:27.506400')[0m  [["rest_id", 3]]
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.3ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["rest_id", 3]]
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."id" = $1 LIMIT 1  [["id", 980190972]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "waitlists" WHERE "waitlists"."id" = $1  [["id", 980190972]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mWaitlist Load (0.1ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 2]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-24 03:16:27.510809')[0m  [["rest_id", 3]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 4]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-24 03:16:27.502198')[0m  [["rest_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-24 03:16:27.506400')  [["rest_id", 3]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["rest_id", 3]]
  [1m[36mWaitlist Load (0.3ms)[0m  [1mSELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."id" = $1 LIMIT 1[0m  [["id", 980190974]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "waitlists" WHERE "waitlists"."id" = $1[0m  [["id", 980190974]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mWaitlist Load (0.1ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 2]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-24 03:16:27.510809')  [["rest_id", 3]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 4]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-24 03:16:27.502198')  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["rest_id", 3]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------
WaitlistTest: test_id_rest_id_is_invalid
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.540101"], ["updated_at", "2015-10-24 03:16:27.540101"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$xM9esMbYPpC7TAUFwTna8OJOeh9BGzLH2FfjvL6DourRIRMrityam"], ["created_at", "2015-10-24 03:16:27.546112"], ["updated_at", "2015-10-24 03:16:27.546112"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:27.548139"], ["updated_at", "2015-10-24 03:16:27.548139"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$hHhN/h3XCP/zRhdhpKzLF.I0mqMO26UbDerF9RlAhlKVi.zNrIvb."], ["created_at", "2015-10-24 03:16:27.552592"], ["updated_at", "2015-10-24 03:16:27.552592"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.554666"], ["updated_at", "2015-10-24 03:16:27.554666"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$MTLqcItjbSR60YG0CQr9Z.MHO78Hf8WHuQ6kjRBJp1XbdlocWt8V."], ["created_at", "2015-10-24 03:16:27.561330"], ["updated_at", "2015-10-24 03:16:27.561330"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-24 03:16:27.564782"], ["updated_at", "2015-10-24 03:16:27.564782"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$f5GjwsDa31lRcxvDsn0C8OzIS5mlDcEzWv8OzNkesPP9KPeitHofm"], ["created_at", "2015-10-24 03:16:27.571496"], ["updated_at", "2015-10-24 03:16:27.571496"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------
WaitlistTest: test_no_people
----------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.581292"], ["updated_at", "2015-10-24 03:16:27.581292"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$tgNSXlUtvT15LPoGgvkvOeLs22wyboOmdswYa9ihPkWGnK1.jeeMm"], ["created_at", "2015-10-24 03:16:27.586309"], ["updated_at", "2015-10-24 03:16:27.586309"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:27.588676"], ["updated_at", "2015-10-24 03:16:27.588676"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$HjGyhbv0VXMsLuhpnZjIkuVT99J9RGTJcrXKGKleUnwWHc7q1rq2e"], ["created_at", "2015-10-24 03:16:27.593659"], ["updated_at", "2015-10-24 03:16:27.593659"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.595682"], ["updated_at", "2015-10-24 03:16:27.595682"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$5P3jVjWio0jmpqn508/m8.VbhZoGO355mMXK.m58k6Ulgi97xx9Ra"], ["created_at", "2015-10-24 03:16:27.600295"], ["updated_at", "2015-10-24 03:16:27.600295"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-24 03:16:27.602406"], ["updated_at", "2015-10-24 03:16:27.602406"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$UPuIJjWG.mvdrijcuCEgHePd.fngej/zwdd1hpYT2jozc0AkbUXEm"], ["created_at", "2015-10-24 03:16:27.608421"], ["updated_at", "2015-10-24 03:16:27.608421"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
WaitlistTest: test_Correct_Waitlist_parameter
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.630437"], ["updated_at", "2015-10-24 03:16:27.630437"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$BRQEbBhIG7B/IILQDEQlC.rGGYk.T61UWuSqs7LuIiwt.SVhRl6da"], ["created_at", "2015-10-24 03:16:27.636581"], ["updated_at", "2015-10-24 03:16:27.636581"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:27.639147"], ["updated_at", "2015-10-24 03:16:27.639147"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$VlvTFoUh8aZZOdbXvd0TheaTa8inxrLnEhxtl3ekANU/5mAVIe23a"], ["created_at", "2015-10-24 03:16:27.643929"], ["updated_at", "2015-10-24 03:16:27.643929"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.645939"], ["updated_at", "2015-10-24 03:16:27.645939"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$cs7KtR.c1UTenR1ddzcPuOy5inpHv6yiJhLvoIAfwqdqv1gDVBKl2"], ["created_at", "2015-10-24 03:16:27.650665"], ["updated_at", "2015-10-24 03:16:27.650665"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-24 03:16:27.652680"], ["updated_at", "2015-10-24 03:16:27.652680"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$wtFpHYnX9bx3ZecTki/07Osb8Ndxowqhat8nPrPlm9hST8/otp0eO"], ["created_at", "2015-10-24 03:16:27.660446"], ["updated_at", "2015-10-24 03:16:27.660446"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-24 03:16:27.664079"], ["updated_at", "2015-10-24 03:16:27.664079"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------
WaitlistTest: test_position_simple
----------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.671287"], ["updated_at", "2015-10-24 03:16:27.671287"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$/8LeZ.Vs6iZk5r9Am4SMy.Kwv8Gy6P6oXtxazJGfwIbM999C19Upa"], ["created_at", "2015-10-24 03:16:27.679961"], ["updated_at", "2015-10-24 03:16:27.679961"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:27.683080"], ["updated_at", "2015-10-24 03:16:27.683080"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$PptQGCsJ7nqNR7e8uOnqbOHHbt1VwtOAI8efHcbo/xojv1eMf/YWO"], ["created_at", "2015-10-24 03:16:27.689941"], ["updated_at", "2015-10-24 03:16:27.689941"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.692184"], ["updated_at", "2015-10-24 03:16:27.692184"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$DxrJZbVo/PqwixZ56xwA9OtE8PCwh.kzKGtEB8gfjC3sgNl/QVLky"], ["created_at", "2015-10-24 03:16:27.696877"], ["updated_at", "2015-10-24 03:16:27.696877"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-24 03:16:27.750450"], ["updated_at", "2015-10-24 03:16:27.750450"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$sYqsIWUNWpdXUynOfj1gP.TxYASzIlUD28.FJ1TCOziQNhEclrpsq"], ["created_at", "2015-10-24 03:16:27.757361"], ["updated_at", "2015-10-24 03:16:27.757361"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 2], ["rest_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-24 03:16:27.762879"], ["updated_at", "2015-10-24 03:16:27.762879"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 4], ["rest_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 4], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-24 03:16:27.766992"], ["updated_at", "2015-10-24 03:16:27.766992"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 2]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-24 03:16:27.762879')[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 4]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-24 03:16:27.766992')[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["rest_id", 1]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------
WaitlistTest: test_position_if_deleted_1st_place
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.777303"], ["updated_at", "2015-10-24 03:16:27.777303"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$ofk1H4Hjkkq6Vmnr3QQdcerofJynmL7s1AQh2lgIs.XsItEoT87hW"], ["created_at", "2015-10-24 03:16:27.783611"], ["updated_at", "2015-10-24 03:16:27.783611"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:27.785758"], ["updated_at", "2015-10-24 03:16:27.785758"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$WsTRi6zljKGe4W0HRzWatOzrWbLgIw8XpthQp7sUVXb3x5g0UGojq"], ["created_at", "2015-10-24 03:16:27.790737"], ["updated_at", "2015-10-24 03:16:27.790737"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.792719"], ["updated_at", "2015-10-24 03:16:27.792719"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$PkYB3bXZj7ORUNBl4qJWB.tXiYH0ha/2ton426yxqlqfDAcL/yrcq"], ["created_at", "2015-10-24 03:16:27.797146"], ["updated_at", "2015-10-24 03:16:27.797146"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-24 03:16:27.799302"], ["updated_at", "2015-10-24 03:16:27.799302"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$1sLacNjQygKYWIYTiawhROIkatEJoJyoptIpDEo.YOoxtfnYOlAP2"], ["created_at", "2015-10-24 03:16:27.805331"], ["updated_at", "2015-10-24 03:16:27.805331"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 2], ["rest_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-24 03:16:27.813283"], ["updated_at", "2015-10-24 03:16:27.813283"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 4], ["rest_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 4], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-24 03:16:27.820639"], ["updated_at", "2015-10-24 03:16:27.820639"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-24 03:16:27.813283')  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 4]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-24 03:16:27.820639')  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."id" = $1 LIMIT 1  [["id", 980190979]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "waitlists" WHERE "waitlists"."id" = $1  [["id", 980190979]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mWaitlist Load (0.1ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 2]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 4]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-24 03:16:27.820639')  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["rest_id", 1]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------
RestaurantTest: test_address
----------------------------
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 518579358]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.835179"], ["updated_at", "2015-10-24 03:16:27.835179"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 518579381]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "restaurants" SET "user_id" = $1, "updated_at" = $2 WHERE "restaurants"."id" = $3  [["user_id", 1893], ["updated_at", "2015-10-24 03:16:27.837904"], ["id", 518579381]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "restaurants" WHERE "restaurants"."id" = $1[0m  [["id", 518579381]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------
RestaurantTest: test_user_id
----------------------------
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 518579358]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.854903"], ["updated_at", "2015-10-24 03:16:27.854903"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 518579382]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "restaurants" WHERE "restaurants"."id" = $1[0m  [["id", 518579382]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------
RestaurantTest: test_count
--------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 518579358]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.862083"], ["updated_at", "2015-10-24 03:16:27.862083"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "restaurants" WHERE "restaurants"."id" = $1[0m  [["id", 518579383]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------
RestaurantTest: test_hours
--------------------------
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 518579358]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.868087"], ["updated_at", "2015-10-24 03:16:27.868087"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 518579384]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "restaurants" SET "user_id" = $1, "updated_at" = $2 WHERE "restaurants"."id" = $3[0m  [["user_id", 9], ["updated_at", "2015-10-24 03:16:27.870384"], ["id", 518579384]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "restaurants" WHERE "restaurants"."id" = $1  [["id", 518579384]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
RestaurantIntegrationTest: test_login_waitlist_restaurant_not_yet_sign_in
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 3], ["address", "1892 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:27.877084"], ["updated_at", "2015-10-24 03:16:27.877084"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "FendyOnel"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$prSl234h5R6K2CM6PRj8w.5KqNW5mMcJXfRcpTYP7OelTHv1G1F1a"], ["created_at", "2015-10-24 03:16:27.882188"], ["updated_at", "2015-10-24 03:16:27.882188"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/restaurants" for 127.0.0.1 at 2015-10-23 20:16:27 -0700
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (0.6ms)[0m  [1mSELECT "restaurants".* FROM "restaurants"[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  Rendered restaurants/index.html.erb within layouts/application (15.1ms)
Completed 200 OK in 52ms (Views: 32.0ms | ActiveRecord: 1.2ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-23 20:16:27 -0700
Processing by Devise::SessionsController#destroy as HTML
Redirected to https://www.example.com/
Filter chain halted as :verify_signed_out_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/waitlists" for 127.0.0.1 at 2015-10-23 20:16:27 -0700
Processing by WaitlistsController#index as HTML
Redirected to https://www.example.com/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2015-10-23 20:16:27 -0700
Processing by Users::SessionsController#new as HTML
  Rendered users/sessions/new.html.erb within layouts/application (29.5ms)
Completed 200 OK in 37ms (Views: 33.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------
RestaurantIntegrationTest: test_create_new_restaurant
-----------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 3], ["address", "1892 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:28.050850"], ["updated_at", "2015-10-24 03:16:28.050850"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "FendyOnel"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$XEj26O9t42hNBLftf23F5eWzyp0rNEX4PMOtVDp4MgOpT8v6oa.gC"], ["created_at", "2015-10-24 03:16:28.056744"], ["updated_at", "2015-10-24 03:16:28.056744"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/restaurants" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by RestaurantsController#index as HTML
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT "restaurants".* FROM "restaurants"
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  Rendered restaurants/index.html.erb within layouts/application (3.4ms)
Completed 200 OK in 5ms (Views: 3.7ms | ActiveRecord: 0.8ms)
Started POST "/create-restaurant" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"FendyBilly@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendybilly@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("email", "encrypted_password", "name", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["email", "fendybilly@gmail.com"], ["encrypted_password", "$2a$04$2FbfuSVJnD8kcMqfGnHXwO4DgXGORVCwdGaMXm9UaGoXY4pGfbwWO"], ["name", "FendyBilly"], ["rest", "t"], ["created_at", "2015-10-24 03:16:28.086398"], ["updated_at", "2015-10-24 03:16:28.086398"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-24 03:16:28.088970"], ["current_sign_in_at", "2015-10-24 03:16:28.088970"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-24 03:16:28.089762"], ["id", 980190963]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to https://www.example.com/
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["user_id", 980190963], ["created_at", "2015-10-24 03:16:28.101979"], ["updated_at", "2015-10-24 03:16:28.101979"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 302 Found in 22ms (ActiveRecord: 2.5ms)
Started GET "/" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by DynamicPagesController#home as HTML
  [1m[35mUser Load (1.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190963]]
Redirected to https://www.example.com/profile
Completed 302 Found in 6ms (ActiveRecord: 1.2ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190963]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (0.8ms)
Completed 200 OK in 7ms (Views: 4.3ms | ActiveRecord: 0.6ms)
Started POST "/users/sign_in" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Devise::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"FendyBilly@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190963]]
Redirected to https://www.example.com/
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.5ms)
Started GET "/" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by DynamicPagesController#home as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190963]]
Redirected to https://www.example.com/profile
Completed 302 Found in 3ms (ActiveRecord: 0.5ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190963]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (0.2ms)
Completed 200 OK in 9ms (Views: 1.6ms | ActiveRecord: 0.6ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to https://www.example.com/
Completed 302 Found in 9ms (ActiveRecord: 0.8ms)
Started DELETE "/destroy-user" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#destroy as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------------------
RestaurantIntegrationTest: test_count_how_many_restaurants
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 3], ["address", "1892 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:28.181882"], ["updated_at", "2015-10-24 03:16:28.181882"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "FendyOnel"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$bqux/E1oVraXwYZX8CXIt.bsAxVAACXpXErci/Qy6MM68FTmOKK7S"], ["created_at", "2015-10-24 03:16:28.189466"], ["updated_at", "2015-10-24 03:16:28.189466"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
Started POST "/create-restaurant" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"Billy1", "email"=>"Billy1@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'billy1@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("email", "encrypted_password", "name", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["email", "billy1@gmail.com"], ["encrypted_password", "$2a$04$1j89b.t6PCUdVKrf5GwMyuqrUyUOJWw00s7GJQNIjengkXlxvD/H6"], ["name", "Billy1"], ["rest", "t"], ["created_at", "2015-10-24 03:16:28.211853"], ["updated_at", "2015-10-24 03:16:28.211853"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-24 03:16:28.215669"], ["current_sign_in_at", "2015-10-24 03:16:28.215669"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-24 03:16:28.216802"], ["id", 980190964]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["user_id", 980190964], ["created_at", "2015-10-24 03:16:28.224840"], ["updated_at", "2015-10-24 03:16:28.224840"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 302 Found in 31ms (ActiveRecord: 3.5ms)
Started GET "/signup-restaurant" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#new_rest as HTML
  Rendered users/registrations/new_rest.html.erb within layouts/application (5.0ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190964]]
Completed 200 OK in 13ms (Views: 11.0ms | ActiveRecord: 0.4ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190964]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 6ms (ActiveRecord: 0.8ms)
Started DELETE "/destroy-user" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#destroy as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------
RestaurantIntegrationTest: test_login_waitlist_restaurant_already_sign_up
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 3], ["address", "1892 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:28.265645"], ["updated_at", "2015-10-24 03:16:28.265645"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "FendyOnel"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$Pd418Xe1U87sIG6ZEvoDaO13IXQs3L88BLakQcbAKQjTFB.ypInR6"], ["created_at", "2015-10-24 03:16:28.273795"], ["updated_at", "2015-10-24 03:16:28.273795"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/restaurants" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by RestaurantsController#index as HTML
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT "restaurants".* FROM "restaurants"
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  Rendered restaurants/index.html.erb within layouts/application (3.8ms)
Completed 200 OK in 5ms (Views: 4.1ms | ActiveRecord: 0.8ms)
Started POST "/create-user" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyOnel2", "email"=>"FendyOnel2@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("email", "encrypted_password", "name", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["email", "fendyonel2@gmail.com"], ["encrypted_password", "$2a$04$wHJiN48HmllwG.RVTMLgiuMXeUDI60/.VUdJrgBo4T.o0zSezQbb."], ["name", "FendyOnel2"], ["rest", "f"], ["created_at", "2015-10-24 03:16:28.290716"], ["updated_at", "2015-10-24 03:16:28.290716"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-24 03:16:28.293229"], ["current_sign_in_at", "2015-10-24 03:16:28.293229"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-24 03:16:28.293958"], ["id", 980190965]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190965], ["phone_number", 0], ["created_at", "2015-10-24 03:16:28.304247"], ["updated_at", "2015-10-24 03:16:28.304247"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 302 Found in 20ms (ActiveRecord: 2.8ms)
Started GET "/" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by DynamicPagesController#home as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190965]]
Redirected to http://www.example.com/profile
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190965]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.8ms)
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 0.3ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190965]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 0.5ms)
Started DELETE "/destroy-user" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#destroy as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
Started POST "/users/sign_in" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Devise::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"FendyOnel2@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "fendyonel2@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "current_sign_in_at" = $1, "sign_in_count" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["current_sign_in_at", "2015-10-24 03:16:28.335985"], ["sign_in_count", 2], ["updated_at", "2015-10-24 03:16:28.337106"], ["id", 980190965]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 15ms (ActiveRecord: 1.6ms)
Started GET "/waitlists_new?rest_id=@user.id" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by WaitlistsController#new as HTML
  Parameters: {"rest_id"=>"@user.id"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190965]]
  Rendered waitlists/new.html.erb within layouts/application (4.2ms)
Completed 200 OK in 10ms (Views: 7.6ms | ActiveRecord: 0.3ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190965]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
Started DELETE "/destroy-user" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#destroy as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
UsersIntegrationTest: test_sign_up_rest_failure_no_email
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:28.371709"], ["updated_at", "2015-10-24 03:16:28.371709"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$tTXCV2ityfLVe1tUkg.haeKIgcM1NrSM8F9f7OeGhaZKIuxkdv/TS"], ["created_at", "2015-10-24 03:16:28.377136"], ["updated_at", "2015-10-24 03:16:28.377136"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "customers"
Started POST "/create-restaurant" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/signup-restaurant
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 302 Found in 11ms (ActiveRecord: 0.7ms)
Started GET "/signup-restaurant" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#new_rest as HTML
  Rendered users/registrations/new_rest.html.erb within layouts/application (2.6ms)
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
UsersIntegrationTest: test_sign_up_user_failure_email_regex_bad
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:28.411963"], ["updated_at", "2015-10-24 03:16:28.411963"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$HJEAwukgmjMnXR58.P33leFAMpnoZqKnZATdjhoWOMQEnpoU12kXO"], ["created_at", "2015-10-24 03:16:28.416740"], ["updated_at", "2015-10-24 03:16:28.416740"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Started POST "/create-user" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"asdf", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'asdf' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/signup-user
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'asdf' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 302 Found in 12ms (ActiveRecord: 1.6ms)
Started GET "/signup-user" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#new_user as HTML
  Rendered users/registrations/new_user.html.erb within layouts/application (4.2ms)
Completed 200 OK in 7ms (Views: 6.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
UsersIntegrationTest: test_sign_up_restaurant_duplicate_failure
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:28.451654"], ["updated_at", "2015-10-24 03:16:28.451654"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$OG4Lkyxn6euAVrarCJ.XTepRc6187gnwiGPKQLJz1CtlAuUBGHpaa"], ["created_at", "2015-10-24 03:16:28.457301"], ["updated_at", "2015-10-24 03:16:28.457301"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "customers"
Started POST "/create-restaurant" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/signup-restaurant
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 302 Found in 11ms (ActiveRecord: 1.6ms)
Started GET "/signup-restaurant" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#new_rest as HTML
  Rendered users/registrations/new_rest.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------
UsersIntegrationTest: test_sign_up_customer_user_successfully
-------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:28.485924"], ["updated_at", "2015-10-24 03:16:28.485924"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$mTnZ/p33xxXj8UgaojObuOvTC6t6uQWFuEvQD3JeKsdmuEx8PWNzK"], ["created_at", "2015-10-24 03:16:28.490935"], ["updated_at", "2015-10-24 03:16:28.490935"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Started POST "/create-user" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"FendyBilly@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendybilly@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("email", "encrypted_password", "name", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["email", "fendybilly@gmail.com"], ["encrypted_password", "$2a$04$IOlB1N/jaR1empB3i/lffejKm7Z6K5/rpcM7F4gSmH4rJetvj0iXe"], ["name", "FendyBilly"], ["rest", "f"], ["created_at", "2015-10-24 03:16:28.500064"], ["updated_at", "2015-10-24 03:16:28.500064"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-24 03:16:28.502065"], ["current_sign_in_at", "2015-10-24 03:16:28.502065"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-24 03:16:28.502743"], ["id", 980190966]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190966], ["phone_number", 0], ["created_at", "2015-10-24 03:16:28.512878"], ["updated_at", "2015-10-24 03:16:28.512878"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 302 Found in 20ms (ActiveRecord: 3.8ms)
Started GET "/" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by DynamicPagesController#home as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190966]]
Redirected to http://www.example.com/profile
Completed 302 Found in 3ms (ActiveRecord: 0.4ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190966]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.2ms)
Completed 200 OK in 3ms (Views: 1.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------------
UsersIntegrationTest: test_sign_up_rest_failure_password_<_8
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:28.534389"], ["updated_at", "2015-10-24 03:16:28.534389"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$UW..DmnyY9Bn5xORyZW1GeHwF22uSXPkprgpq.wittkDE1jfzaVtG"], ["created_at", "2015-10-24 03:16:28.540757"], ["updated_at", "2015-10-24 03:16:28.540757"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "customers"
Started POST "/create-restaurant" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"user@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/signup-restaurant
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 302 Found in 13ms (ActiveRecord: 1.9ms)
Started GET "/signup-restaurant" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#new_rest as HTML
  Rendered users/registrations/new_rest.html.erb within layouts/application (1.9ms)
Completed 200 OK in 13ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------
UsersIntegrationTest: test_sign_up_user_duplicate_failure
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:28.580846"], ["updated_at", "2015-10-24 03:16:28.580846"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$g6sfxxej0KzVSefBC/rKSePx1sc8TKvecwUDteNpMPld3X8qO.aDW"], ["created_at", "2015-10-24 03:16:28.586166"], ["updated_at", "2015-10-24 03:16:28.586166"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Started POST "/create-user" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/signup-user
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 302 Found in 9ms (ActiveRecord: 1.5ms)
Started GET "/signup-user" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#new_user as HTML
  Rendered users/registrations/new_user.html.erb within layouts/application (1.9ms)
Completed 200 OK in 3ms (Views: 2.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------
UsersIntegrationTest: test_sign_in_wrong_password
-------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:28.612731"], ["updated_at", "2015-10-24 03:16:28.612731"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$MIJ6NSzs4rd0Ow23M6VcX.SCDC4f0t0alGdnyr9l9nGXmJbSChxhu"], ["created_at", "2015-10-24 03:16:28.617578"], ["updated_at", "2015-10-24 03:16:28.617578"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "atidjenad@gmail.com"]]
Completed 401 Unauthorized in 5ms (ActiveRecord: 0.5ms)
Started GET "/sign_in" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::SessionsController#new as HTML
  Rendered users/sessions/new.html.erb within layouts/application (2.2ms)
Completed 200 OK in 5ms (Views: 3.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
UsersIntegrationTest: test_sign_up_restaurant_user_successfully
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:28.639365"], ["updated_at", "2015-10-24 03:16:28.639365"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$Je3501fJahfHg.hrk3R4beqrVW9XroQ9sNLcnzwL7jaNYffMTgMsa"], ["created_at", "2015-10-24 03:16:28.645848"], ["updated_at", "2015-10-24 03:16:28.645848"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "restaurants"
Started POST "/create-restaurant" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"FendyBilly@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendybilly@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "name", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "fendybilly@gmail.com"], ["encrypted_password", "$2a$04$vuNIGFUFgDbNgkEYFSe4Juj87U5cHXqydXri5KL5kBjJCLIG8Aadq"], ["name", "FendyBilly"], ["rest", "t"], ["created_at", "2015-10-24 03:16:28.655018"], ["updated_at", "2015-10-24 03:16:28.655018"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-10-24 03:16:28.657218"], ["current_sign_in_at", "2015-10-24 03:16:28.657218"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-24 03:16:28.657906"], ["id", 980190967]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190967], ["created_at", "2015-10-24 03:16:28.663921"], ["updated_at", "2015-10-24 03:16:28.663921"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 302 Found in 14ms (ActiveRecord: 2.5ms)
Started GET "/" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by DynamicPagesController#home as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190967]]
Redirected to http://www.example.com/profile
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190967]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (0.1ms)
Completed 200 OK in 4ms (Views: 1.2ms | ActiveRecord: 0.4ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------------------------
UsersIntegrationTest: test_sign_up_rest_failure_password_don't_match
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:28.682515"], ["updated_at", "2015-10-24 03:16:28.682515"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$WCP5vOzyfR0w5WV4SeOObOCHM4oS/9xFzwKpdwOJj9xy9Jrs6pOVG"], ["created_at", "2015-10-24 03:16:28.687459"], ["updated_at", "2015-10-24 03:16:28.687459"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Started POST "/create-restaurant" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"user@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/signup-restaurant
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 302 Found in 9ms (ActiveRecord: 1.3ms)
Started GET "/signup-restaurant" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#new_rest as HTML
  Rendered users/registrations/new_rest.html.erb within layouts/application (3.1ms)
Completed 200 OK in 5ms (Views: 4.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------
UsersIntegrationTest: test_sign_in_user_don't_exist
---------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:28.720850"], ["updated_at", "2015-10-24 03:16:28.720850"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$KxcNgAboMy8m2TfwxQf.te0qM6yxnDM3EFPiMpFjPzzC49IhFxXqy"], ["created_at", "2015-10-24 03:16:28.726689"], ["updated_at", "2015-10-24 03:16:28.726689"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"userdontexist@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "userdontexist@gmail.com"]]
Completed 401 Unauthorized in 2ms (ActiveRecord: 0.4ms)
Started GET "/sign_in" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::SessionsController#new as HTML
  Rendered users/sessions/new.html.erb within layouts/application (2.9ms)
Completed 200 OK in 6ms (Views: 4.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------------
UsersIntegrationTest: test_sign_up_user_failure_no_email
--------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:28.746173"], ["updated_at", "2015-10-24 03:16:28.746173"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$KK8JX3qjKge05RNlddwS1.g8.GgFDTCr5x88QZ7Z2f/w6/RLHw/ue"], ["created_at", "2015-10-24 03:16:28.754380"], ["updated_at", "2015-10-24 03:16:28.754380"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
Started POST "/create-user" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/signup-user
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 302 Found in 7ms (ActiveRecord: 0.5ms)
Started GET "/signup-user" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#new_user as HTML
  Rendered users/registrations/new_user.html.erb within layouts/application (2.1ms)
Completed 200 OK in 4ms (Views: 3.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
UsersIntegrationTest: test_sign_up_rest_failure_email_regex_bad
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:28.781920"], ["updated_at", "2015-10-24 03:16:28.781920"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$QyOCBt6S7RXZsOz5pQuT5upKQ46KRrjxIvHmLfT/sl0ShbZoqPc4e"], ["created_at", "2015-10-24 03:16:28.788133"], ["updated_at", "2015-10-24 03:16:28.788133"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Started POST "/create-restaurant" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"asdf", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'asdf' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/signup-restaurant
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'asdf' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 302 Found in 10ms (ActiveRecord: 1.5ms)
Started GET "/signup-restaurant" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#new_rest as HTML
  Rendered users/registrations/new_rest.html.erb within layouts/application (2.6ms)
Completed 200 OK in 5ms (Views: 3.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------------------
UsersIntegrationTest: test_sign_in_user_successfully
----------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:28.818991"], ["updated_at", "2015-10-24 03:16:28.818991"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$9siZSpMwBf8YqLLmT7RWJOH2O0zxMuuD84Gm5p.hbRa51VJJCDcx."], ["created_at", "2015-10-24 03:16:28.825755"], ["updated_at", "2015-10-24 03:16:28.825755"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "atidjenad@gmail.com"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-10-24 03:16:28.832698"], ["current_sign_in_at", "2015-10-24 03:16:28.832698"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-24 03:16:28.833685"], ["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 9ms (ActiveRecord: 1.1ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 2]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.2ms)
Completed 200 OK in 3ms (Views: 1.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------------
UsersIntegrationTest: test_sign_up_user_failure_password_<_8
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:28.847336"], ["updated_at", "2015-10-24 03:16:28.847336"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$QoidbNCqGyD9z2hb2Gri0.YqG2epic32FXvuD9x4pGVQmpPz8IiNS"], ["created_at", "2015-10-24 03:16:28.852134"], ["updated_at", "2015-10-24 03:16:28.852134"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "customers"
Started POST "/create-user" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"user@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/signup-user
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 302 Found in 9ms (ActiveRecord: 1.3ms)
Started GET "/signup-user" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#new_user as HTML
  Rendered users/registrations/new_user.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------------------------
UsersIntegrationTest: test_sign_up_user_failure_password_don't_match
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:28.878745"], ["updated_at", "2015-10-24 03:16:28.878745"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$5haz2dOT0ywo5F3si0oohuA2igCNX1RYh7REz4Jrj3gn6HLb2IOIG"], ["created_at", "2015-10-24 03:16:28.883708"], ["updated_at", "2015-10-24 03:16:28.883708"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Started POST "/create-user" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"user@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/signup-user
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 302 Found in 20ms (ActiveRecord: 1.4ms)
Started GET "/signup-user" for 127.0.0.1 at 2015-10-23 20:16:28 -0700
Processing by Users::RegistrationsController#new_user as HTML
  Rendered users/registrations/new_user.html.erb within layouts/application (1.9ms)
Completed 200 OK in 4ms (Views: 2.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------
RestaurantsControllerTest: test_should_show_restaurant
------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:28.922102"], ["updated_at", "2015-10-24 03:16:28.922102"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$XLhfkmAU8HBjX3tTtrOziO57uPga3lsCUQoDxcS.eR1iHUWbp3qjK"], ["created_at", "2015-10-24 03:16:28.928204"], ["updated_at", "2015-10-24 03:16:28.928204"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"518579392"}
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 518579392]]
  Rendered restaurants/show.html.erb within layouts/application (1.1ms)
Completed 200 OK in 5ms (Views: 3.8ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RestaurantsControllerTest: test_should_create_restaurant
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:28.942633"], ["updated_at", "2015-10-24 03:16:28.942633"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$wOi.6jGlnbyhotQPda2YqOisb6ML5KD6nz1aBB5cjEKgHtXBVofoa"], ["created_at", "2015-10-24 03:16:28.947623"], ["updated_at", "2015-10-24 03:16:28.947623"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
Processing by RestaurantsController#create as HTML
  Parameters: {"restaurant"=>{"user_id"=>"10", "address"=>"MLK", "hours"=>"24hr"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("address", "hours", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["address", "MLK"], ["hours", "24hr"], ["user_id", 10], ["created_at", "2015-10-24 03:16:28.952175"], ["updated_at", "2015-10-24 03:16:28.952175"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/restaurants/518579394
Completed 302 Found in 4ms (ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:28.958113"], ["updated_at", "2015-10-24 03:16:28.958113"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$GjMGu5SA0nO1iPLSDFfcfepHGKLailTBRUbml4J.iiaw.UgmpxF/W"], ["created_at", "2015-10-24 03:16:28.962920"], ["updated_at", "2015-10-24 03:16:28.962920"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestaurantsController#index as HTML
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT "restaurants".* FROM "restaurants"
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered restaurants/index.html.erb within layouts/application (4.3ms)
Completed 200 OK in 6ms (Views: 4.2ms | ActiveRecord: 1.1ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------
RestaurantsControllerTest: test_should_get_edit
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:28.973426"], ["updated_at", "2015-10-24 03:16:28.973426"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$Z2K1JU75neEfoZhBkZ8IIeYBAzizI0S0/LomFlI1Eg/wFuxS/OEMS"], ["created_at", "2015-10-24 03:16:28.979752"], ["updated_at", "2015-10-24 03:16:28.979752"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"518579396"}
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 518579396]]
  Rendered restaurants/_form.html.erb (5.2ms)
  Rendered restaurants/edit.html.erb within layouts/application (12.8ms)
Completed 200 OK in 16ms (Views: 15.5ms | ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RestaurantsControllerTest: test_should_destroy_restaurant
---------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:29.002463"], ["updated_at", "2015-10-24 03:16:29.002463"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$z.MgpvItrHykoqBfawzOxO0zwKg05HVXwCQkS0zi6KyFMLqdQut9y"], ["created_at", "2015-10-24 03:16:29.010714"], ["updated_at", "2015-10-24 03:16:29.010714"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
Processing by RestaurantsController#destroy as HTML
  Parameters: {"id"=>"518579397"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 518579397]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "restaurants" WHERE "restaurants"."id" = $1[0m  [["id", 518579397]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/restaurants
Completed 302 Found in 3ms (ActiveRecord: 0.8ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------------
RestaurantsControllerTest: test_should_update_restaurant
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-24 03:16:29.021303"], ["updated_at", "2015-10-24 03:16:29.021303"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$s8vi1J7DUJ5CrpRQnCcu6eimPSTpQHmwW2xPtsw14KGKzpgicLgJ6"], ["created_at", "2015-10-24 03:16:29.026076"], ["updated_at", "2015-10-24 03:16:29.026076"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestaurantsController#update as HTML
  Parameters: {"restaurant"=>{"user_id"=>"5", "address"=>"MLK1", "hours"=>"25hr"}, "id"=>"518579398"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 518579398]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "restaurants" SET "address" = $1, "hours" = $2, "user_id" = $3, "updated_at" = $4 WHERE "restaurants"."id" = $5[0m  [["address", "MLK1"], ["hours", "25hr"], ["user_id", 5], ["updated_at", "2015-10-24 03:16:29.032291"], ["id", 518579398]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/restaurants/518579398
Completed 302 Found in 6ms (ActiveRecord: 1.1ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------
UserTest: test_password_<_8
---------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------
UserTest: test_No_Rest
----------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
UserTest: test_duplicate_different_case_email
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Example User"], ["email", "user@example.com"], ["encrypted_password", "$2a$04$LlvwLE0pMuDMH8c0Zkri4.UQ8pPKV/Cn83XbszCRvswJKqHoI6oWG"], ["rest", "f"], ["created_at", "2015-10-24 03:16:29.057913"], ["updated_at", "2015-10-24 03:16:29.057913"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------
UserTest: test_Password_don't_match
-----------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------
UserTest: test_Correct_login
----------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Example User"], ["email", "user@example.com"], ["encrypted_password", "$2a$04$yyg31a5xtTBI19wt5lnS..vmoly9jXFVjilKyEfa6OpqRXWkSQ3DK"], ["rest", "f"], ["created_at", "2015-10-24 03:16:29.073994"], ["updated_at", "2015-10-24 03:16:29.073994"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------
UserTest: test_Email_regex_bad
------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'userexamplecom' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@examplecom' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------
UserTest: test_duplicate_email
------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Example User"], ["email", "user@example.com"], ["encrypted_password", "$2a$04$kKeBAOD/PJjvAMWUDowI9O5Qf4c4pfxL7HBtGhnYqj8la4ULjQ7Dy"], ["rest", "f"], ["created_at", "2015-10-24 03:16:29.092054"], ["updated_at", "2015-10-24 03:16:29.092054"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------
UserTest: test_duplicate_name
-----------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "Example User"], ["email", "user@example.com"], ["encrypted_password", "$2a$04$rq8vu7E9rQRpt7skf0jooe7w2m2jatLcsUyIAFH/0ccZplLt/d3qi"], ["rest", "f"], ["created_at", "2015-10-24 03:16:29.102222"], ["updated_at", "2015-10-24 03:16:29.102222"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user1@example.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "Example User"], ["email", "user1@example.com"], ["encrypted_password", "$2a$04$1jPSaW/gw1NBZ4xov0ub5OhA/3faRvJO1xRuyH5l9PCD8sUa.dkM."], ["rest", "f"], ["created_at", "2015-10-24 03:16:29.105204"], ["updated_at", "2015-10-24 03:16:29.105204"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------
UserTest: test_No_Email
-----------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------
UserTest: test_duplicate_password
---------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "Example User"], ["email", "user@example.com"], ["encrypted_password", "$2a$04$AUoafjCb/91DwmZSDet/X.DZ4cwLfjM.vX3NXQkGcuAydnJAKRMRC"], ["rest", "f"], ["created_at", "2015-10-24 03:16:29.118840"], ["updated_at", "2015-10-24 03:16:29.118840"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user2@example.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "Example User2"], ["email", "user2@example.com"], ["encrypted_password", "$2a$04$Zu7emXulSbjBYvb19M6mJuhkqtwWw5dwQM26s7zfs.AMKMyF4E3UW"], ["rest", "f"], ["created_at", "2015-10-24 03:16:29.121832"], ["updated_at", "2015-10-24 03:16:29.121832"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
----------------------
UserTest: test_No_Name
----------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", ""], ["email", "user@example.com"], ["encrypted_password", "$2a$04$ICLN41dfxPjSCB8Bk3lAKu37SfnadP0IuUsAPW6/8qZzPYTyEY4zy"], ["rest", "f"], ["created_at", "2015-10-24 03:16:29.129855"], ["updated_at", "2015-10-24 03:16:29.129855"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------
UserTest: test_No_Password
--------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------------------
CustomersControllerTest: test_should_create_customer
----------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:29.142478"], ["updated_at", "2015-10-24 03:16:29.142478"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$JVV.3ERcleAhjr/ZaPK4nOJ/UxLmpX4XeWRMNAilJmZj55MkxtlnS"], ["created_at", "2015-10-24 03:16:29.148119"], ["updated_at", "2015-10-24 03:16:29.148119"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
Processing by CustomersController#create as HTML
  Parameters: {"customer"=>{"user_id"=>"10", "phone_number"=>"0"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("phone_number", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["phone_number", 0], ["user_id", 10], ["created_at", "2015-10-24 03:16:29.153819"], ["updated_at", "2015-10-24 03:16:29.153819"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/customers/980191003
Completed 302 Found in 4ms (ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------
CustomersControllerTest: test_should_destroy_customer
-----------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:29.160200"], ["updated_at", "2015-10-24 03:16:29.160200"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$h2vEj/cmoiez/nZ/bzk7deuVJ5WgOiYKVhgN4jJ3uL1.njYf9chaa"], ["created_at", "2015-10-24 03:16:29.164966"], ["updated_at", "2015-10-24 03:16:29.164966"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
Processing by CustomersController#destroy as HTML
  Parameters: {"id"=>"980191004"}
  [1m[36mCustomer Load (0.3ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT 1[0m  [["id", 980191004]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 980191004]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/customers
Completed 302 Found in 3ms (ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
----------------------------------------------------
CustomersControllerTest: test_should_update_customer
----------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:29.174663"], ["updated_at", "2015-10-24 03:16:29.174663"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$WxH0jrKm/wOLT/62lFyhYOC4wvSQ4ORmN/RHnBccFSGQPE1H5erM2"], ["created_at", "2015-10-24 03:16:29.180245"], ["updated_at", "2015-10-24 03:16:29.180245"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Processing by CustomersController#update as HTML
  Parameters: {"customer"=>{"user_id"=>"10", "phone_number"=>"0"}, "id"=>"980191005"}
  [1m[35mCustomer Load (0.3ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT 1  [["id", 980191005]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "customers" SET "user_id" = $1, "updated_at" = $2 WHERE "customers"."id" = $3  [["user_id", 10], ["updated_at", "2015-10-24 03:16:29.185135"], ["id", 980191005]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/customers/980191005
Completed 302 Found in 4ms (ActiveRecord: 0.8ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CustomersControllerTest: test_should_show_customer
--------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:29.190446"], ["updated_at", "2015-10-24 03:16:29.190446"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$73e9IuUau9H3aRIrJzmDB.iqshPYYiP2ka7YgqkEIKI2puTmDAmIa"], ["created_at", "2015-10-24 03:16:29.195253"], ["updated_at", "2015-10-24 03:16:29.195253"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CustomersController#show as HTML
  Parameters: {"id"=>"980191006"}
  [1m[35mCustomer Load (0.3ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT 1  [["id", 980191006]]
  Rendered customers/show.html.erb within layouts/application (1.1ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------------
CustomersControllerTest: test_should_get_edit_customer
------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:29.206124"], ["updated_at", "2015-10-24 03:16:29.206124"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$uSqFI9HAdMwpJSXq34fEie04cs1OgCbBS8tvwD92m9y1FyFxyHOhi"], ["created_at", "2015-10-24 03:16:29.211352"], ["updated_at", "2015-10-24 03:16:29.211352"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
Processing by CustomersController#edit as HTML
  Parameters: {"id"=>"980191007"}
  [1m[36mCustomer Load (0.3ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT 1[0m  [["id", 980191007]]
  Rendered customers/_form.html.erb (2.1ms)
  Rendered customers/edit.html.erb within layouts/application (4.1ms)
Completed 200 OK in 7ms (Views: 6.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------
CustomerTest: test_correct_customer
-----------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-24 03:16:29.226293"], ["updated_at", "2015-10-24 03:16:29.226293"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$98T5F8qoRy38p5WgW18fCu3fBfr3KTq4JjSJXboonLH/yR0ED69Z6"], ["created_at", "2015-10-24 03:16:29.232729"], ["updated_at", "2015-10-24 03:16:29.232729"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 3], ["phone_number", 0], ["created_at", "2015-10-24 03:16:29.234719"], ["updated_at", "2015-10-24 03:16:29.234719"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
WaitlistRoutesTest: test_customer_waitlist_success
--------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$zXTTS.x93CYI3/mr3vduz.x0hdZQ1UOwBQ.6XCgFr5rq/ugSkrBNG"], ["rest", "f"], ["created_at", "2015-10-24 03:16:29.241593"], ["updated_at", "2015-10-24 03:16:29.241593"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190976], ["phone_number", 0], ["created_at", "2015-10-24 03:16:29.245130"], ["updated_at", "2015-10-24 03:16:29.245130"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$c7VrTjasXPnmE/8AM2ARHedny9pc2uJ1gZHHh5RyN43e6jZQAKppi"], ["rest", "t"], ["created_at", "2015-10-24 03:16:29.255470"], ["updated_at", "2015-10-24 03:16:29.255470"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190977], ["created_at", "2015-10-24 03:16:29.259517"], ["updated_at", "2015-10-24 03:16:29.259517"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test1@gmail.com"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-24 03:16:29.271147"], ["current_sign_in_at", "2015-10-24 03:16:29.271147"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-24 03:16:29.272182"], ["id", 980190976]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 11ms (ActiveRecord: 1.3ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190976]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.2ms)
Completed 200 OK in 3ms (Views: 1.0ms | ActiveRecord: 0.3ms)
Started POST "/waitlists_new" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"cust_id"=>"980190976", "people"=>"5", "rest_id"=>"980190977"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190976]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190976]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190977]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190977]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190976]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 980190976], ["rest_id", 980190977]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 980190976], ["rest_id", 980190977], ["people", 5], ["created_at", "2015-10-24 03:16:29.293084"], ["updated_at", "2015-10-24 03:16:29.293084"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/waitlists
Completed 302 Found in 11ms (ActiveRecord: 2.0ms)
  [1m[36mWaitlist Load (0.3ms)[0m  [1mSELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1[0m  [["cust_id", 980190976]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------------
WaitlistRoutesTest: test_restaurant_put_waitlist_success
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$hEcV4bJxCN0EeIu/8dfGcu9i5mmGW8CG6shA5zSCjgdrVgtyqBdKW"], ["rest", "f"], ["created_at", "2015-10-24 03:16:29.305088"], ["updated_at", "2015-10-24 03:16:29.305088"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190978], ["phone_number", 0], ["created_at", "2015-10-24 03:16:29.307909"], ["updated_at", "2015-10-24 03:16:29.307909"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$gBEyHGWR9y0iF70D30OKle91/zrjHmGu/gHpP9OxmdIWAyKnFXzUS"], ["rest", "t"], ["created_at", "2015-10-24 03:16:29.315613"], ["updated_at", "2015-10-24 03:16:29.315613"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["user_id", 980190979], ["created_at", "2015-10-24 03:16:29.317766"], ["updated_at", "2015-10-24 03:16:29.317766"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "test1@gmail.com"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-10-24 03:16:29.326792"], ["current_sign_in_at", "2015-10-24 03:16:29.326792"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-24 03:16:29.327732"], ["id", 980190978]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 21ms (ActiveRecord: 1.1ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190978]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.3ms)
Completed 200 OK in 4ms (Views: 1.5ms | ActiveRecord: 0.4ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190978]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 5ms (ActiveRecord: 0.6ms)
Started POST "/sign_in" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test2@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "test2@gmail.com"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-10-24 03:16:29.368958"], ["current_sign_in_at", "2015-10-24 03:16:29.368958"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-24 03:16:29.369941"], ["id", 980190979]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 10ms (ActiveRecord: 1.0ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190979]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (0.1ms)
Completed 200 OK in 4ms (Views: 1.1ms | ActiveRecord: 0.3ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"people"=>"5", "rest_id"=>"980190979"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190979]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190979]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190979]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190979]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 980190979], ["rest_id", 980190979], ["people", 5], ["created_at", "2015-10-24 03:16:29.386266"], ["updated_at", "2015-10-24 03:16:29.386266"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/waitlists
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
  [1m[35mWaitlist Load (0.4ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1  [["cust_id", 980190979]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------
WaitlistRoutesTest: test_restaurant_delete_waitlist_success
-----------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$bSN3GlzZz9UXDHBZszARAOz7r2iPK12jjRjmQob.CTCGAPvDcDC6a"], ["rest", "f"], ["created_at", "2015-10-24 03:16:29.395710"], ["updated_at", "2015-10-24 03:16:29.395710"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190980], ["phone_number", 0], ["created_at", "2015-10-24 03:16:29.397850"], ["updated_at", "2015-10-24 03:16:29.397850"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$GgUow90wWqkXXQ7tbinD3.7sl4z61VRpEN7k6N7yt61vNqBJxbwdG"], ["rest", "t"], ["created_at", "2015-10-24 03:16:29.403922"], ["updated_at", "2015-10-24 03:16:29.403922"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190981], ["created_at", "2015-10-24 03:16:29.405880"], ["updated_at", "2015-10-24 03:16:29.405880"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test1@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-24 03:16:29.416332"], ["current_sign_in_at", "2015-10-24 03:16:29.416332"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-24 03:16:29.417169"], ["id", 980190980]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 9ms (ActiveRecord: 1.0ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190980]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.2ms)
Completed 200 OK in 3ms (Views: 1.7ms | ActiveRecord: 0.4ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190980]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 0.6ms)
Started POST "/sign_in" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test2@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test2@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-24 03:16:29.439539"], ["current_sign_in_at", "2015-10-24 03:16:29.439539"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-24 03:16:29.440335"], ["id", 980190981]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 9ms (ActiveRecord: 0.9ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190981]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (0.1ms)
Completed 200 OK in 4ms (Views: 1.4ms | ActiveRecord: 0.4ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"people"=>"5", "rest_id"=>"980190981"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190981]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190981]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190981]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190981]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 980190981], ["rest_id", 980190981], ["people", 5], ["created_at", "2015-10-24 03:16:29.461818"], ["updated_at", "2015-10-24 03:16:29.461818"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/waitlists
Completed 302 Found in 7ms (ActiveRecord: 1.3ms)
  [1m[36mWaitlist Load (0.4ms)[0m  [1mSELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1[0m  [["cust_id", 980190981]]
Started DELETE "/waitlists/980190983" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by WaitlistsController#destroy as HTML
  Parameters: {"id"=>"980190983"}
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."id" = $1 LIMIT 1  [["id", 980190983]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "waitlists" WHERE "waitlists"."id" = $1  [["id", 980190983]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/waitlists
Completed 302 Found in 3ms (ActiveRecord: 0.8ms)
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1  [["cust_id", 980190981]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
WaitlistRoutesTest: test_customer_delete_waitlist_success
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$lsBrUtFWEV9EM4t0N7dSq.u0XEUGpbjbbJRBWLrUHyJIrjQSsVwZq"], ["rest", "f"], ["created_at", "2015-10-24 03:16:29.479628"], ["updated_at", "2015-10-24 03:16:29.479628"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190982], ["phone_number", 0], ["created_at", "2015-10-24 03:16:29.481828"], ["updated_at", "2015-10-24 03:16:29.481828"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$UZHWAQByC0gnH7YdvgWqp.eanmFwCE3SyKJG/qjjhefO9A2YvMHma"], ["rest", "t"], ["created_at", "2015-10-24 03:16:29.487708"], ["updated_at", "2015-10-24 03:16:29.487708"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190983], ["created_at", "2015-10-24 03:16:29.489841"], ["updated_at", "2015-10-24 03:16:29.489841"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test1@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-24 03:16:29.498189"], ["current_sign_in_at", "2015-10-24 03:16:29.498189"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-24 03:16:29.499019"], ["id", 980190982]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 8ms (ActiveRecord: 0.8ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190982]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.2ms)
Completed 200 OK in 5ms (Views: 2.4ms | ActiveRecord: 0.4ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"people"=>"5", "rest_id"=>"980190983"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190982]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190982]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190983]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190983]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190982]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 980190982], ["rest_id", 980190983]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 980190982], ["rest_id", 980190983], ["people", 5], ["created_at", "2015-10-24 03:16:29.521344"], ["updated_at", "2015-10-24 03:16:29.521344"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/waitlists
Completed 302 Found in 8ms (ActiveRecord: 1.6ms)
  [1m[36mWaitlist Load (0.3ms)[0m  [1mSELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1[0m  [["cust_id", 980190982]]
Started DELETE "/waitlists/980190984" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by WaitlistsController#destroy as HTML
  Parameters: {"id"=>"980190984"}
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."id" = $1 LIMIT 1  [["id", 980190984]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "waitlists" WHERE "waitlists"."id" = $1  [["id", 980190984]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/waitlists
Completed 302 Found in 3ms (ActiveRecord: 0.8ms)
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1  [["cust_id", 980191013]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------
WaitlistRoutesTest: test_restaurant_put_multiple_waitlist_success
-----------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$plZJDBdDmrPuUaUXmNYvcu6O3j40ylJpD3c2VGPvXIs99uX77Iib2"], ["rest", "f"], ["created_at", "2015-10-24 03:16:29.535861"], ["updated_at", "2015-10-24 03:16:29.535861"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190984], ["phone_number", 0], ["created_at", "2015-10-24 03:16:29.537948"], ["updated_at", "2015-10-24 03:16:29.537948"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$Uhay1h.MvHZttkUfsiXQseFte6EcoeJmXsMqlM6437M.hoTxp6bQe"], ["rest", "t"], ["created_at", "2015-10-24 03:16:29.547342"], ["updated_at", "2015-10-24 03:16:29.547342"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190985], ["created_at", "2015-10-24 03:16:29.549615"], ["updated_at", "2015-10-24 03:16:29.549615"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test1@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-24 03:16:29.563114"], ["current_sign_in_at", "2015-10-24 03:16:29.563114"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-24 03:16:29.564654"], ["id", 980190984]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 13ms (ActiveRecord: 1.2ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190984]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.2ms)
Completed 200 OK in 3ms (Views: 1.0ms | ActiveRecord: 0.3ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190984]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 0.5ms)
Started POST "/sign_in" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test2@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test2@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-24 03:16:29.587337"], ["current_sign_in_at", "2015-10-24 03:16:29.587337"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-24 03:16:29.588506"], ["id", 980190985]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 10ms (ActiveRecord: 0.9ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190985]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (0.1ms)
Completed 200 OK in 3ms (Views: 0.9ms | ActiveRecord: 0.3ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"people"=>"5", "rest_id"=>"980190985"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190985]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190985]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190985]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190985]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 980190985], ["rest_id", 980190985], ["people", 5], ["created_at", "2015-10-24 03:16:29.604112"], ["updated_at", "2015-10-24 03:16:29.604112"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/waitlists
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"people"=>"10", "rest_id"=>"980190985"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190985]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190985]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190985]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190985]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 980190985], ["rest_id", 980190985], ["people", 10], ["created_at", "2015-10-24 03:16:29.612033"], ["updated_at", "2015-10-24 03:16:29.612033"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/waitlists
Completed 302 Found in 6ms (ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1  [["cust_id", 980190985]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
WaitlistRoutesTest: test_user_unable_to_waitlist_before_sign_in
---------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$s8cy0hn6v..4Pz.lVqqgYOvUbvW0zbOFrj7GJ6FRD3ghPwUodWWDC"], ["rest", "f"], ["created_at", "2015-10-24 03:16:29.620994"], ["updated_at", "2015-10-24 03:16:29.620994"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190986], ["phone_number", 0], ["created_at", "2015-10-24 03:16:29.623066"], ["updated_at", "2015-10-24 03:16:29.623066"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$nZb5FqjSq2OoLSqmE69HHOE0gXRGwTd4RFBiNdPqXRoSQGwuKNdJy"], ["rest", "t"], ["created_at", "2015-10-24 03:16:29.629365"], ["updated_at", "2015-10-24 03:16:29.629365"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190987], ["created_at", "2015-10-24 03:16:29.631351"], ["updated_at", "2015-10-24 03:16:29.631351"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test1@gmail.com"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-24 03:16:29.639144"], ["current_sign_in_at", "2015-10-24 03:16:29.639144"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-24 03:16:29.639945"], ["id", 980190986]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 8ms (ActiveRecord: 0.9ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190986]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.2ms)
Completed 200 OK in 3ms (Views: 1.0ms | ActiveRecord: 0.3ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190986]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 5ms (ActiveRecord: 0.7ms)
Started GET "/waitlists_new" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by WaitlistsController#new as HTML
Redirected to http://www.example.com/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
WaitlistRoutesTest: test_user_can_waitlist_after_sign_in
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$k7otprzgUEGSSH1K93V.r.j0AgSffpB72RID4xjhY8NYuOMMqYfeq"], ["rest", "f"], ["created_at", "2015-10-24 03:16:29.673464"], ["updated_at", "2015-10-24 03:16:29.673464"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190988], ["phone_number", 0], ["created_at", "2015-10-24 03:16:29.675578"], ["updated_at", "2015-10-24 03:16:29.675578"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$q1mq8TJDbPmpuCPcbHFDjuhoIDDqBKG3iIKvkj0oIYQOW7tYGJg9q"], ["rest", "t"], ["created_at", "2015-10-24 03:16:29.682442"], ["updated_at", "2015-10-24 03:16:29.682442"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190989], ["created_at", "2015-10-24 03:16:29.684542"], ["updated_at", "2015-10-24 03:16:29.684542"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test1@gmail.com"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-24 03:16:29.692803"], ["current_sign_in_at", "2015-10-24 03:16:29.692803"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-24 03:16:29.693618"], ["id", 980190988]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 8ms (ActiveRecord: 0.8ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190988]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.2ms)
Completed 200 OK in 3ms (Views: 0.9ms | ActiveRecord: 0.3ms)
Started GET "/waitlists_new" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by WaitlistsController#new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190988]]
  Rendered waitlists/new.html.erb within layouts/application (1.1ms)
Completed 200 OK in 4ms (Views: 1.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------
WaitlistRoutesTest: test_restaurant_put_waitlist_fail
-----------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$g9ydd321OsNi.LW5K3JLi..hntGoxYzhu2EMEgFhqf/GoCgYWdzuW"], ["rest", "f"], ["created_at", "2015-10-24 03:16:29.713560"], ["updated_at", "2015-10-24 03:16:29.713560"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190990], ["phone_number", 0], ["created_at", "2015-10-24 03:16:29.715776"], ["updated_at", "2015-10-24 03:16:29.715776"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$TbyBN3p2XHV0/bKW2mRQxe2qNn0i.fbCxVN2KHpvkLfIW.qUDtz6K"], ["rest", "t"], ["created_at", "2015-10-24 03:16:29.722341"], ["updated_at", "2015-10-24 03:16:29.722341"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190991], ["created_at", "2015-10-24 03:16:29.724346"], ["updated_at", "2015-10-24 03:16:29.724346"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test1@gmail.com"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-24 03:16:29.733421"], ["current_sign_in_at", "2015-10-24 03:16:29.733421"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-24 03:16:29.734279"], ["id", 980190990]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 9ms (ActiveRecord: 0.8ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190990]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.2ms)
Completed 200 OK in 3ms (Views: 1.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test3@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test3"], ["email", "test3@gmail.com"], ["encrypted_password", "$2a$04$SmT3osmcRk3TwIR/J0jUluqFyQ80eUpaFT5h2tCYCQhdjyYIS09M."], ["rest", "t"], ["created_at", "2015-10-24 03:16:29.747742"], ["updated_at", "2015-10-24 03:16:29.747742"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190992], ["created_at", "2015-10-24 03:16:29.749725"], ["updated_at", "2015-10-24 03:16:29.749725"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190990]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 0.5ms)
Started POST "/sign_in" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test2@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "test2@gmail.com"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-10-24 03:16:29.763948"], ["current_sign_in_at", "2015-10-24 03:16:29.763948"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-24 03:16:29.764773"], ["id", 980190991]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 8ms (ActiveRecord: 1.0ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190991]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (0.1ms)
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.3ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"people"=>"5", "rest_id"=>"980190992"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190991]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190991]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190992]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190992]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190991]]
Redirected to http://www.example.com/waitlists
Completed 302 Found in 4ms (ActiveRecord: 0.8ms)
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1  [["cust_id", 980190991]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------
WaitlistRoutesTest: test_customer_waitlist_multiple_rests_success
-----------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$OSAam9Ax0E3NcnA/sBg1zunXnFtUPZd0Nsaf8Eq76lvyMJZwtXhzy"], ["rest", "f"], ["created_at", "2015-10-24 03:16:29.785779"], ["updated_at", "2015-10-24 03:16:29.785779"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190993], ["phone_number", 0], ["created_at", "2015-10-24 03:16:29.787948"], ["updated_at", "2015-10-24 03:16:29.787948"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$goz6KdV9DaQ.cNwXyGC.VOBvZ6NeJaFFfhXHKXqUJsY4RC0cd1FJG"], ["rest", "t"], ["created_at", "2015-10-24 03:16:29.793944"], ["updated_at", "2015-10-24 03:16:29.793944"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190994], ["created_at", "2015-10-24 03:16:29.797122"], ["updated_at", "2015-10-24 03:16:29.797122"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test1@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-24 03:16:29.805261"], ["current_sign_in_at", "2015-10-24 03:16:29.805261"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-24 03:16:29.806264"], ["id", 980190993]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 9ms (ActiveRecord: 0.9ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190993]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.1ms)
Completed 200 OK in 3ms (Views: 1.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test3@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test3"], ["email", "test3@gmail.com"], ["encrypted_password", "$2a$04$OLrN.SoQfT79C7bbRm2unu/JRzm131FMW5uUsROmbglxGJV7oW29i"], ["rest", "t"], ["created_at", "2015-10-24 03:16:29.824005"], ["updated_at", "2015-10-24 03:16:29.824005"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190995], ["created_at", "2015-10-24 03:16:29.827907"], ["updated_at", "2015-10-24 03:16:29.827907"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/waitlists" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"cust_id"=>"980190993", "people"=>"5", "rest_id"=>"980190994"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190993]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190993]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190994]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190994]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190993]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 980190993], ["rest_id", 980190994]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 980190993], ["rest_id", 980190994], ["people", 5], ["created_at", "2015-10-24 03:16:29.839294"], ["updated_at", "2015-10-24 03:16:29.839294"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/waitlists
Completed 302 Found in 7ms (ActiveRecord: 1.4ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"cust_id"=>"980190993", "people"=>"5", "rest_id"=>"980190995"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190993]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190993]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190995]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190995]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190993]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 980190993], ["rest_id", 980190995]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 980190993], ["rest_id", 980190995], ["people", 5], ["created_at", "2015-10-24 03:16:29.849218"], ["updated_at", "2015-10-24 03:16:29.849218"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/waitlists
Completed 302 Found in 8ms (ActiveRecord: 1.4ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1[0m  [["cust_id", 980190993]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------------
WaitlistRoutesTest: test_customer_waitlist_fail
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$44o8n0TMC65VgZpJtJn6X.F4.ehIrH4OJSUKYwcFo9U2rqeCi7dMe"], ["rest", "f"], ["created_at", "2015-10-24 03:16:29.857760"], ["updated_at", "2015-10-24 03:16:29.857760"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190996], ["phone_number", 0], ["created_at", "2015-10-24 03:16:29.859880"], ["updated_at", "2015-10-24 03:16:29.859880"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$gvznjEZmLYNEuZYw/EN0E..l60hU0voSPnzkDPSVTyh6l3BeRXkH6"], ["rest", "t"], ["created_at", "2015-10-24 03:16:29.866851"], ["updated_at", "2015-10-24 03:16:29.866851"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["user_id", 980190997], ["created_at", "2015-10-24 03:16:29.869045"], ["updated_at", "2015-10-24 03:16:29.869045"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "test1@gmail.com"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-10-24 03:16:29.877474"], ["current_sign_in_at", "2015-10-24 03:16:29.877474"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-24 03:16:29.878977"], ["id", 980190996]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 12ms (ActiveRecord: 1.1ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190996]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.1ms)
Completed 200 OK in 3ms (Views: 1.1ms | ActiveRecord: 0.3ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"cust_id"=>"980190996", "people"=>"5", "rest_id"=>"980190997"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190996]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190996]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190997]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190997]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190996]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 980190996], ["rest_id", 980190997]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 980190996], ["rest_id", 980190997], ["people", 5], ["created_at", "2015-10-24 03:16:29.901850"], ["updated_at", "2015-10-24 03:16:29.901850"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/waitlists
Completed 302 Found in 11ms (ActiveRecord: 1.9ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "waitlists"
Started POST "/waitlists" for 127.0.0.1 at 2015-10-23 20:16:29 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"cust_id"=>"980190996", "people"=>"10", "rest_id"=>"980190997"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190996]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190996]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190997]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190997]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190996]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 980190996], ["rest_id", 980190997]]
Redirected to http://www.example.com/waitlists
Completed 302 Found in 6ms (ActiveRecord: 1.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (4.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (8.2ms)[0m  ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (3.8ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (4.6ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at", "id") VALUES (1, 123, '2015-10-30 22:31:02', '2015-10-30 22:31:02', 980190962)[0m
  [1m[35mFixture Delete (2.0ms)[0m  DELETE FROM "restaurants"
  [1m[36mFixture Insert (2.1ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at", "id") VALUES (1, '1893 Berkeley Avenue', '9:00 am - 10:00 pm', '2015-10-30 22:31:02', '2015-10-30 22:31:02', 518579358)[0m
  [1m[35mFixture Delete (3.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (3.8ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES ('abc@gmail.com', 'abcd', 'abcd', '2015-10-09', '2015-10-09', '2015-10-10', '2015-10-10', '192.168.1.5', '192.168.1.9', 'FendyOnel', 't', '2015-10-30 22:31:02', '2015-10-30 22:31:02', 980190962)[0m
  [1m[35mFixture Delete (2.3ms)[0m  DELETE FROM "waitlists"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "waitlists" ("rest_id", "cust_id", "people", "created_at", "updated_at", "id") VALUES (2, 1, 10, '2015-10-30 22:31:02', '2015-10-30 22:31:02', 980190962)[0m
  [1m[35m (1.7ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
RestaurantsControllerTest: test_should_destroy_restaurant
---------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:02.687516"], ["updated_at", "2015-10-30 22:31:02.687516"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$A0w5R8huBCG45.nmOuklqOotkE2nh3rxuS4h1ticumnTs4zUSzReW"], ["created_at", "2015-10-30 22:31:02.734663"], ["updated_at", "2015-10-30 22:31:02.734663"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
Processing by RestaurantsController#destroy as HTML
  Parameters: {"id"=>"518579359"}
  [1m[36mRestaurant Load (0.9ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 518579359]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "restaurants" WHERE "restaurants"."id" = $1[0m  [["id", 518579359]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/restaurants
Completed 302 Found in 16ms (ActiveRecord: 2.2ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------------
RestaurantsControllerTest: test_should_update_restaurant
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:02.767801"], ["updated_at", "2015-10-30 22:31:02.767801"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$bshy2urcUB4ZphsmIxrOPuopLBmh9yEStzl9z40BfrfeeomJGu7Ba"], ["created_at", "2015-10-30 22:31:02.777936"], ["updated_at", "2015-10-30 22:31:02.777936"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestaurantsController#update as HTML
  Parameters: {"restaurant"=>{"user_id"=>"5", "address"=>"MLK1", "hours"=>"25hr"}, "id"=>"518579360"}
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 518579360]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mUPDATE "restaurants" SET "address" = $1, "hours" = $2, "user_id" = $3, "updated_at" = $4 WHERE "restaurants"."id" = $5[0m  [["address", "MLK1"], ["hours", "25hr"], ["user_id", 5], ["updated_at", "2015-10-30 22:31:02.783986"], ["id", 518579360]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/restaurants/518579360
Completed 302 Found in 7ms (ActiveRecord: 1.5ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------
RestaurantsControllerTest: test_should_get_edit
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:02.791640"], ["updated_at", "2015-10-30 22:31:02.791640"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$PcvH1GBL2Q4AJXB6LTU1Z.mSZXDYxk88NI2mSco1KeurzYQg7Iele"], ["created_at", "2015-10-30 22:31:02.796416"], ["updated_at", "2015-10-30 22:31:02.796416"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"518579361"}
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 518579361]]
  Rendered restaurants/_form.html.erb (45.3ms)
  Rendered restaurants/edit.html.erb within layouts/application (53.6ms)
Completed 200 OK in 77ms (Views: 75.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------
RestaurantsControllerTest: test_should_show_restaurant
------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:02.878678"], ["updated_at", "2015-10-30 22:31:02.878678"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$NDMxjwKrzr/ZruW9o7mGkutUnkGOkefFfULvAKdpAS5WYYgSoQnvi"], ["created_at", "2015-10-30 22:31:02.885734"], ["updated_at", "2015-10-30 22:31:02.885734"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"518579362"}
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 518579362]]
  Rendered restaurants/show.html.erb within layouts/application (1.1ms)
Completed 200 OK in 5ms (Views: 3.6ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RestaurantsControllerTest: test_should_create_restaurant
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:02.897406"], ["updated_at", "2015-10-30 22:31:02.897406"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$C7V7pum2dYWlw0Cqoc171urz2wHZ9Ai66IpLTqaeMPeiu/yCirVkO"], ["created_at", "2015-10-30 22:31:02.902933"], ["updated_at", "2015-10-30 22:31:02.902933"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
Processing by RestaurantsController#create as HTML
  Parameters: {"restaurant"=>{"user_id"=>"10", "address"=>"MLK", "hours"=>"24hr"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("address", "hours", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["address", "MLK"], ["hours", "24hr"], ["user_id", 10], ["created_at", "2015-10-30 22:31:02.907619"], ["updated_at", "2015-10-30 22:31:02.907619"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/restaurants/518579364
Completed 302 Found in 3ms (ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:02.913045"], ["updated_at", "2015-10-30 22:31:02.913045"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$.LmfBqj1kgftKxW1xzW1peaw92v7fMXKr6PJ8xlEhF.sa23/c/x8S"], ["created_at", "2015-10-30 22:31:02.919505"], ["updated_at", "2015-10-30 22:31:02.919505"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestaurantsController#index as HTML
  [1m[35mRestaurant Load (0.5ms)[0m  SELECT "restaurants".* FROM "restaurants"
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered restaurants/index.html.erb within layouts/application (7.4ms)
Completed 200 OK in 10ms (Views: 7.6ms | ActiveRecord: 1.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
WaitlistRoutesTest: test_customer_delete_waitlist_success
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$EU32QIq6W5LbA3S.LUaenen.i9qj3muxJuJGSMWPUaKs9Jwozcnwe"], ["rest", "f"], ["created_at", "2015-10-30 22:31:02.938955"], ["updated_at", "2015-10-30 22:31:02.938955"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190963], ["phone_number", 0], ["created_at", "2015-10-30 22:31:02.943861"], ["updated_at", "2015-10-30 22:31:02.943861"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$pURHylZPUlLtmA0AbnWtPuRmx593aofNXTWof/uNl/MjKeAqtDKdi"], ["rest", "t"], ["created_at", "2015-10-30 22:31:02.953177"], ["updated_at", "2015-10-30 22:31:02.953177"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190964], ["created_at", "2015-10-30 22:31:02.955419"], ["updated_at", "2015-10-30 22:31:02.955419"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:02 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test1@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-30 22:31:03.018674"], ["current_sign_in_at", "2015-10-30 22:31:03.018674"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:03.020054"], ["id", 980190963]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 38ms (ActiveRecord: 2.2ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190963]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.9ms)
Completed 200 OK in 8ms (Views: 4.3ms | ActiveRecord: 0.9ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"people"=>"5", "rest_id"=>"980190964"}}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190963]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190963]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190964]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190964]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190963]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 980190963], ["rest_id", 980190964]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 980190963], ["rest_id", 980190964], ["people", 5], ["created_at", "2015-10-30 22:31:03.072550"], ["updated_at", "2015-10-30 22:31:03.072550"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/waitlists
Completed 302 Found in 13ms (ActiveRecord: 2.0ms)
  [1m[36mWaitlist Load (0.3ms)[0m  [1mSELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1[0m  [["cust_id", 980190963]]
Started DELETE "/waitlists/980190963" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by WaitlistsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."id" = $1 LIMIT 1  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "waitlists" WHERE "waitlists"."id" = $1  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/waitlists
Completed 302 Found in 3ms (ActiveRecord: 0.7ms)
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1  [["cust_id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------
WaitlistRoutesTest: test_restaurant_put_multiple_waitlist_success
-----------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$N7WQfDN/fqfGqYJ2l9qYK.Z6sexEW16y/8aN2vp6kQlN7/1fUXDie"], ["rest", "f"], ["created_at", "2015-10-30 22:31:03.088996"], ["updated_at", "2015-10-30 22:31:03.088996"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190965], ["phone_number", 0], ["created_at", "2015-10-30 22:31:03.091071"], ["updated_at", "2015-10-30 22:31:03.091071"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$oi7fO2xQh9qBqKUd1IPBz.AwZqddWVbaD9zrXOPY1Ki7pziOVqdiq"], ["rest", "t"], ["created_at", "2015-10-30 22:31:03.096807"], ["updated_at", "2015-10-30 22:31:03.096807"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190966], ["created_at", "2015-10-30 22:31:03.098908"], ["updated_at", "2015-10-30 22:31:03.098908"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test1@gmail.com"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-30 22:31:03.108101"], ["current_sign_in_at", "2015-10-30 22:31:03.108101"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:03.108884"], ["id", 980190965]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 8ms (ActiveRecord: 1.0ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190965]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.2ms)
Completed 200 OK in 5ms (Views: 2.1ms | ActiveRecord: 0.6ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190965]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 8ms (ActiveRecord: 0.8ms)
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test2@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test2@gmail.com"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-30 22:31:03.143502"], ["current_sign_in_at", "2015-10-30 22:31:03.143502"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:03.144520"], ["id", 980190966]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 11ms (ActiveRecord: 1.3ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190966]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (0.7ms)
Completed 200 OK in 5ms (Views: 2.9ms | ActiveRecord: 0.5ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"people"=>"5", "rest_id"=>"980190966"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190966]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190966]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190966]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190966]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 980190966], ["rest_id", 980190966], ["people", 5], ["created_at", "2015-10-30 22:31:03.164197"], ["updated_at", "2015-10-30 22:31:03.164197"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/waitlists
Completed 302 Found in 5ms (ActiveRecord: 1.2ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"people"=>"10", "rest_id"=>"980190966"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190966]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190966]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190966]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190966]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 980190966], ["rest_id", 980190966], ["people", 10], ["created_at", "2015-10-30 22:31:03.215500"], ["updated_at", "2015-10-30 22:31:03.215500"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/waitlists
Completed 302 Found in 5ms (ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1  [["cust_id", 980190966]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------
WaitlistRoutesTest: test_restaurant_put_waitlist_fail
-----------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$IDCJ5v/ZUALFMw/sbuNChu4dQMwHwv3F4VDl.jFHi4E0E/KhSGyJS"], ["rest", "f"], ["created_at", "2015-10-30 22:31:03.225019"], ["updated_at", "2015-10-30 22:31:03.225019"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190967], ["phone_number", 0], ["created_at", "2015-10-30 22:31:03.227047"], ["updated_at", "2015-10-30 22:31:03.227047"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$xH8UQfTEPOq.WyKw.5zIfe9h3DFx03pe8u45lTKONXhMsxdcipRL6"], ["rest", "t"], ["created_at", "2015-10-30 22:31:03.232899"], ["updated_at", "2015-10-30 22:31:03.232899"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190968], ["created_at", "2015-10-30 22:31:03.234904"], ["updated_at", "2015-10-30 22:31:03.234904"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test1@gmail.com"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-30 22:31:03.242923"], ["current_sign_in_at", "2015-10-30 22:31:03.242923"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:03.243724"], ["id", 980190967]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 8ms (ActiveRecord: 1.1ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190967]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.3ms)
Completed 200 OK in 4ms (Views: 1.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test3@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test3"], ["email", "test3@gmail.com"], ["encrypted_password", "$2a$04$VCNhhat1xaIWiNLub53CAeGDGOaaL6ga.lu0/5G39DDCTSGPY2UJK"], ["rest", "t"], ["created_at", "2015-10-30 22:31:03.260138"], ["updated_at", "2015-10-30 22:31:03.260138"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190969], ["created_at", "2015-10-30 22:31:03.262407"], ["updated_at", "2015-10-30 22:31:03.262407"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190967]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 0.5ms)
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test2@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "test2@gmail.com"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-10-30 22:31:03.277044"], ["current_sign_in_at", "2015-10-30 22:31:03.277044"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:03.277823"], ["id", 980190968]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 9ms (ActiveRecord: 1.2ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190968]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (0.1ms)
Completed 200 OK in 3ms (Views: 1.2ms | ActiveRecord: 0.3ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"people"=>"5", "rest_id"=>"980190969"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190968]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190968]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190969]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190969]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190968]]
Redirected to http://www.example.com/waitlists
Completed 302 Found in 4ms (ActiveRecord: 0.7ms)
  [1m[35mWaitlist Load (0.4ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1  [["cust_id", 980190968]]
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
WaitlistRoutesTest: test_restaurant_put_waitlist_success
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$mmkrli/vnpSRSdhCt4IkWuCfw9rpLJxZARbxS4vokLLvHnv9RuTAe"], ["rest", "f"], ["created_at", "2015-10-30 22:31:03.302847"], ["updated_at", "2015-10-30 22:31:03.302847"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190970], ["phone_number", 0], ["created_at", "2015-10-30 22:31:03.304820"], ["updated_at", "2015-10-30 22:31:03.304820"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$tvE.OJO/12o6c.wTgsWI5uFE7xTdgD4BiV5XRSpP1uGx4Ut7l9dOC"], ["rest", "t"], ["created_at", "2015-10-30 22:31:03.310654"], ["updated_at", "2015-10-30 22:31:03.310654"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190971], ["created_at", "2015-10-30 22:31:03.312527"], ["updated_at", "2015-10-30 22:31:03.312527"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test1@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-30 22:31:03.321100"], ["current_sign_in_at", "2015-10-30 22:31:03.321100"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:03.322405"], ["id", 980190970]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 12ms (ActiveRecord: 1.1ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190970]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.2ms)
Completed 200 OK in 4ms (Views: 1.1ms | ActiveRecord: 0.4ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[35mUser Load (1.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190970]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 7ms (ActiveRecord: 1.6ms)
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test2@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test2@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-30 22:31:03.355485"], ["current_sign_in_at", "2015-10-30 22:31:03.355485"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:03.356420"], ["id", 980190971]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 10ms (ActiveRecord: 0.9ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190971]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (0.1ms)
Completed 200 OK in 3ms (Views: 1.0ms | ActiveRecord: 0.3ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"people"=>"5", "rest_id"=>"980190971"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190971]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190971]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190971]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190971]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 980190971], ["rest_id", 980190971], ["people", 5], ["created_at", "2015-10-30 22:31:03.373154"], ["updated_at", "2015-10-30 22:31:03.373154"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/waitlists
Completed 302 Found in 6ms (ActiveRecord: 1.1ms)
  [1m[36mWaitlist Load (0.3ms)[0m  [1mSELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1[0m  [["cust_id", 980190971]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
WaitlistRoutesTest: test_customer_waitlist_success
--------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$saST/qzWxXIdSkigUm0FlerkbkRa00DVLR3Ag0pXPGBxP3Ojtunae"], ["rest", "f"], ["created_at", "2015-10-30 22:31:03.382428"], ["updated_at", "2015-10-30 22:31:03.382428"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190972], ["phone_number", 0], ["created_at", "2015-10-30 22:31:03.384631"], ["updated_at", "2015-10-30 22:31:03.384631"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$jK6jhGa5Wcyd5kk9Kg7V0uOpm8/eKT436c.jRVYi9ftHUuICiaPeW"], ["rest", "t"], ["created_at", "2015-10-30 22:31:03.390909"], ["updated_at", "2015-10-30 22:31:03.390909"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["user_id", 980190973], ["created_at", "2015-10-30 22:31:03.392894"], ["updated_at", "2015-10-30 22:31:03.392894"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "test1@gmail.com"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-10-30 22:31:03.403542"], ["current_sign_in_at", "2015-10-30 22:31:03.403542"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:03.404762"], ["id", 980190972]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 12ms (ActiveRecord: 1.0ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190972]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.2ms)
Completed 200 OK in 4ms (Views: 1.6ms | ActiveRecord: 0.3ms)
Started POST "/waitlists_new" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"cust_id"=>"980190972", "people"=>"5", "rest_id"=>"980190973"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190972]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190972]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190973]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190973]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190972]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 980190972], ["rest_id", 980190973]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 980190972], ["rest_id", 980190973], ["people", 5], ["created_at", "2015-10-30 22:31:03.424994"], ["updated_at", "2015-10-30 22:31:03.424994"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/waitlists
Completed 302 Found in 8ms (ActiveRecord: 1.6ms)
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1  [["cust_id", 980190972]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
WaitlistRoutesTest: test_user_can_waitlist_after_sign_in
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$M48/ABex1266DuTYuTcaEuTuXBIv8jVs49uSb8.XgrD5NR203.M0."], ["rest", "f"], ["created_at", "2015-10-30 22:31:03.434509"], ["updated_at", "2015-10-30 22:31:03.434509"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190974], ["phone_number", 0], ["created_at", "2015-10-30 22:31:03.437131"], ["updated_at", "2015-10-30 22:31:03.437131"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$TW6xCYP0JPNetL3niTUAM.Pr3uM2qEKaAilLIs3SL7qqqGF9qVWRu"], ["rest", "t"], ["created_at", "2015-10-30 22:31:03.443285"], ["updated_at", "2015-10-30 22:31:03.443285"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190975], ["created_at", "2015-10-30 22:31:03.445316"], ["updated_at", "2015-10-30 22:31:03.445316"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test1@gmail.com"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-30 22:31:03.454167"], ["current_sign_in_at", "2015-10-30 22:31:03.454167"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:03.454961"], ["id", 980190974]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 10ms (ActiveRecord: 0.8ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190974]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.3ms)
Completed 200 OK in 5ms (Views: 1.9ms | ActiveRecord: 0.3ms)
Started GET "/waitlists_new" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by WaitlistsController#new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190974]]
  Rendered waitlists/new.html.erb within layouts/application (9.9ms)
Completed 200 OK in 15ms (Views: 13.0ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-----------------------------------------------------------------
WaitlistRoutesTest: test_customer_waitlist_multiple_rests_success
-----------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$xqxkOgiTDIiEAj10YZ1IZ.ou8wxllAR03gA46zG422euTv/nt2uMa"], ["rest", "f"], ["created_at", "2015-10-30 22:31:03.496983"], ["updated_at", "2015-10-30 22:31:03.496983"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190976], ["phone_number", 0], ["created_at", "2015-10-30 22:31:03.499649"], ["updated_at", "2015-10-30 22:31:03.499649"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$Q5gzS2DH9DijPzykZD36nODDx92J.aPF7wzSD0P3KcKQl6jponJ9G"], ["rest", "t"], ["created_at", "2015-10-30 22:31:03.506986"], ["updated_at", "2015-10-30 22:31:03.506986"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190977], ["created_at", "2015-10-30 22:31:03.509105"], ["updated_at", "2015-10-30 22:31:03.509105"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test1@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-30 22:31:03.518499"], ["current_sign_in_at", "2015-10-30 22:31:03.518499"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:03.519906"], ["id", 980190976]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 10ms (ActiveRecord: 0.8ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190976]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.2ms)
Completed 200 OK in 4ms (Views: 1.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test3@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test3"], ["email", "test3@gmail.com"], ["encrypted_password", "$2a$04$Y/JX9ukkMtKIGze9BmVmqub37sZMFbuILwqybaNFheks6LpqTKvCm"], ["rest", "t"], ["created_at", "2015-10-30 22:31:03.538174"], ["updated_at", "2015-10-30 22:31:03.538174"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190978], ["created_at", "2015-10-30 22:31:03.540934"], ["updated_at", "2015-10-30 22:31:03.540934"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/waitlists" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"cust_id"=>"980190976", "people"=>"5", "rest_id"=>"980190977"}}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190976]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190976]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190977]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190977]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190976]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 980190976], ["rest_id", 980190977]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 980190976], ["rest_id", 980190977], ["people", 5], ["created_at", "2015-10-30 22:31:03.551595"], ["updated_at", "2015-10-30 22:31:03.551595"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/waitlists
Completed 302 Found in 8ms (ActiveRecord: 1.6ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"cust_id"=>"980190976", "people"=>"5", "rest_id"=>"980190978"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190976]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190976]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190978]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190978]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190976]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 980190976], ["rest_id", 980190978]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 980190976], ["rest_id", 980190978], ["people", 5], ["created_at", "2015-10-30 22:31:03.561646"], ["updated_at", "2015-10-30 22:31:03.561646"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/waitlists
Completed 302 Found in 17ms (ActiveRecord: 1.6ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1[0m  [["cust_id", 980190976]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------------
WaitlistRoutesTest: test_customer_waitlist_fail
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$SXHypmirqYdr82oOFFTpAutBIDy/V/Vr9WaX8MegSWD28gN6wFfGm"], ["rest", "f"], ["created_at", "2015-10-30 22:31:03.579490"], ["updated_at", "2015-10-30 22:31:03.579490"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190979], ["phone_number", 0], ["created_at", "2015-10-30 22:31:03.581625"], ["updated_at", "2015-10-30 22:31:03.581625"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$xabKYnWc0hjYMXqyMucXw.g9J.uv2ImtzRf24nGzMEUnW4/iitjw."], ["rest", "t"], ["created_at", "2015-10-30 22:31:03.590741"], ["updated_at", "2015-10-30 22:31:03.590741"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["user_id", 980190980], ["created_at", "2015-10-30 22:31:03.593973"], ["updated_at", "2015-10-30 22:31:03.593973"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "test1@gmail.com"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-10-30 22:31:03.602936"], ["current_sign_in_at", "2015-10-30 22:31:03.602936"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:03.603719"], ["id", 980190979]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 8ms (ActiveRecord: 0.8ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190979]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.2ms)
Completed 200 OK in 3ms (Views: 1.3ms | ActiveRecord: 0.3ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"cust_id"=>"980190979", "people"=>"5", "rest_id"=>"980190980"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190979]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190979]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190980]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190980]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190979]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 980190979], ["rest_id", 980190980]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 980190979], ["rest_id", 980190980], ["people", 5], ["created_at", "2015-10-30 22:31:03.621908"], ["updated_at", "2015-10-30 22:31:03.621908"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/waitlists
Completed 302 Found in 9ms (ActiveRecord: 1.9ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists"
Started POST "/waitlists" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"cust_id"=>"980190979", "people"=>"10", "rest_id"=>"980190980"}}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190979]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190979]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190980]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190980]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190979]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 980190979], ["rest_id", 980190980]]
Redirected to http://www.example.com/waitlists
Completed 302 Found in 6ms (ActiveRecord: 1.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
WaitlistRoutesTest: test_user_unable_to_waitlist_before_sign_in
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$9FaIvQ8kZNVSifX/IX97QOZaFK7A5KtfMatstXiFk2R5UksamD4rW"], ["rest", "f"], ["created_at", "2015-10-30 22:31:03.640195"], ["updated_at", "2015-10-30 22:31:03.640195"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190981], ["phone_number", 0], ["created_at", "2015-10-30 22:31:03.642766"], ["updated_at", "2015-10-30 22:31:03.642766"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$MIf7FkAN/UazrfVEa9VY5u1/CCSHnns4qT6x2DzqRrRYz4Nv3N0MC"], ["rest", "t"], ["created_at", "2015-10-30 22:31:03.649303"], ["updated_at", "2015-10-30 22:31:03.649303"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["user_id", 980190982], ["created_at", "2015-10-30 22:31:03.651675"], ["updated_at", "2015-10-30 22:31:03.651675"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "test1@gmail.com"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-10-30 22:31:03.660127"], ["current_sign_in_at", "2015-10-30 22:31:03.660127"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:03.660903"], ["id", 980190981]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 8ms (ActiveRecord: 0.8ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190981]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.2ms)
Completed 200 OK in 4ms (Views: 1.6ms | ActiveRecord: 0.4ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190981]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 5ms (ActiveRecord: 0.6ms)
Started GET "/waitlists_new" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by WaitlistsController#new as HTML
Redirected to http://www.example.com/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-----------------------------------------------------------
WaitlistRoutesTest: test_restaurant_delete_waitlist_success
-----------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$JKa8.dfym3WV5T4riffnQuoveVALiQyfKZGkHIUhzSY0HYzBhzdJe"], ["rest", "f"], ["created_at", "2015-10-30 22:31:03.690208"], ["updated_at", "2015-10-30 22:31:03.690208"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190983], ["phone_number", 0], ["created_at", "2015-10-30 22:31:03.692767"], ["updated_at", "2015-10-30 22:31:03.692767"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$.FmhY5k3ejZEOAwbHhLDkO/wO5vJsWSKkQ1gxeestCxZkr2/MXEu6"], ["rest", "t"], ["created_at", "2015-10-30 22:31:03.698882"], ["updated_at", "2015-10-30 22:31:03.698882"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["user_id", 980190984], ["created_at", "2015-10-30 22:31:03.702209"], ["updated_at", "2015-10-30 22:31:03.702209"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "test1@gmail.com"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-10-30 22:31:03.714579"], ["current_sign_in_at", "2015-10-30 22:31:03.714579"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:03.715492"], ["id", 980190983]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 10ms (ActiveRecord: 0.9ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190983]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.1ms)
Completed 200 OK in 3ms (Views: 1.0ms | ActiveRecord: 0.3ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190983]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 0.6ms)
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test2@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "test2@gmail.com"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-10-30 22:31:03.741221"], ["current_sign_in_at", "2015-10-30 22:31:03.741221"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:03.742121"], ["id", 980190984]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 10ms (ActiveRecord: 0.9ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190984]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (0.1ms)
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.2ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"people"=>"5", "rest_id"=>"980190984"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190984]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190984]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190984]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190984]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 980190984], ["rest_id", 980190984], ["people", 5], ["created_at", "2015-10-30 22:31:03.757108"], ["updated_at", "2015-10-30 22:31:03.757108"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/waitlists
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1  [["cust_id", 980190984]]
Started DELETE "/waitlists/980190971" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by WaitlistsController#destroy as HTML
  Parameters: {"id"=>"980190971"}
  [1m[36mWaitlist Load (0.3ms)[0m  [1mSELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."id" = $1 LIMIT 1[0m  [["id", 980190971]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "waitlists" WHERE "waitlists"."id" = $1[0m  [["id", 980190971]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/waitlists
Completed 302 Found in 3ms (ActiveRecord: 0.7ms)
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1[0m  [["cust_id", 980190984]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------
CustomerTest: test_correct_customer
-----------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:03.769581"], ["updated_at", "2015-10-30 22:31:03.769581"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$WYEeQLkAdcb2I6XsJLw6iuWRL.wZb4g7q11RZWzqeqkbUvB5aa08q"], ["created_at", "2015-10-30 22:31:03.774653"], ["updated_at", "2015-10-30 22:31:03.774653"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 3], ["phone_number", 0], ["created_at", "2015-10-30 22:31:03.776671"], ["updated_at", "2015-10-30 22:31:03.776671"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------------------
RestaurantIntegrationTest: test_count_how_many_restaurants
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 3], ["address", "1892 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:03.781620"], ["updated_at", "2015-10-30 22:31:03.781620"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (8.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "FendyOnel"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$HRt.yDSq6oUXRMp7MT9P/.RoVk2K8QoAHMHmQ5Mjrwq1ZxJDlvAO6"], ["created_at", "2015-10-30 22:31:03.795354"], ["updated_at", "2015-10-30 22:31:03.795354"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
Started POST "/create-restaurant" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"Billy1", "email"=>"Billy1@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'billy1@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("email", "encrypted_password", "name", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["email", "billy1@gmail.com"], ["encrypted_password", "$2a$04$xu/.uVy6nM8D6IBJ8pkPU.CoGzUEyLH9vJ60jZIgbuUF1DIWJTIg6"], ["name", "Billy1"], ["rest", "t"], ["created_at", "2015-10-30 22:31:03.820827"], ["updated_at", "2015-10-30 22:31:03.820827"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-30 22:31:03.823449"], ["current_sign_in_at", "2015-10-30 22:31:03.823449"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:03.824139"], ["id", 980190985]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["user_id", 980190985], ["created_at", "2015-10-30 22:31:03.832057"], ["updated_at", "2015-10-30 22:31:03.832057"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 302 Found in 20ms (ActiveRecord: 2.6ms)
Started GET "/signup-restaurant" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Users::RegistrationsController#new_rest as HTML
  Rendered users/registrations/new_rest.html.erb within layouts/application (7.3ms)
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190985]]
Completed 200 OK in 17ms (Views: 14.4ms | ActiveRecord: 1.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190985]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 0.6ms)
Started DELETE "/destroy-user" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Users::RegistrationsController#destroy as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------
RestaurantIntegrationTest: test_create_new_restaurant
-----------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 3], ["address", "1892 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:03.873162"], ["updated_at", "2015-10-30 22:31:03.873162"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "FendyOnel"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$Grf/1HISmr4oRWmjtqeskOHT46ku.LbTSt6cghEwB9f69CPqo00nm"], ["created_at", "2015-10-30 22:31:03.878239"], ["updated_at", "2015-10-30 22:31:03.878239"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/restaurants" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by RestaurantsController#index as HTML
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT "restaurants".* FROM "restaurants"
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  Rendered restaurants/index.html.erb within layouts/application (3.1ms)
Completed 200 OK in 5ms (Views: 3.3ms | ActiveRecord: 0.7ms)
Started POST "/create-restaurant" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"FendyBilly@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendybilly@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("email", "encrypted_password", "name", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["email", "fendybilly@gmail.com"], ["encrypted_password", "$2a$04$qKookGBsL.OzgmBTyf3UseT0YgQ0EsPCncQiFajTiyQKerz20nIRq"], ["name", "FendyBilly"], ["rest", "t"], ["created_at", "2015-10-30 22:31:03.892118"], ["updated_at", "2015-10-30 22:31:03.892118"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-30 22:31:03.894309"], ["current_sign_in_at", "2015-10-30 22:31:03.894309"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:03.895014"], ["id", 980190986]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to https://www.example.com/
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["user_id", 980190986], ["created_at", "2015-10-30 22:31:03.899631"], ["updated_at", "2015-10-30 22:31:03.899631"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 302 Found in 13ms (ActiveRecord: 2.2ms)
Started GET "/" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by DynamicPagesController#home as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190986]]
Redirected to https://www.example.com/profile
Completed 302 Found in 12ms (ActiveRecord: 0.3ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190986]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (0.1ms)
Completed 200 OK in 4ms (Views: 1.0ms | ActiveRecord: 0.5ms)
Started POST "/users/sign_in" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Devise::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"FendyBilly@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190986]]
Redirected to https://www.example.com/
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)
Started GET "/" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by DynamicPagesController#home as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190986]]
Redirected to https://www.example.com/profile
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190986]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (0.1ms)
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.3ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190986]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to https://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 0.5ms)
Started DELETE "/destroy-user" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Users::RegistrationsController#destroy as HTML
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
RestaurantIntegrationTest: test_login_waitlist_restaurant_not_yet_sign_in
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 3], ["address", "1892 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:03.949688"], ["updated_at", "2015-10-30 22:31:03.949688"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "FendyOnel"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$De7Msc.9Bucafd4ceidr1OKI2cKRrhkF.fbr/bpndSdR9svMGrGO."], ["created_at", "2015-10-30 22:31:03.955973"], ["updated_at", "2015-10-30 22:31:03.955973"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/restaurants" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT "restaurants".* FROM "restaurants"[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  Rendered restaurants/index.html.erb within layouts/application (3.3ms)
Completed 200 OK in 5ms (Views: 3.4ms | ActiveRecord: 0.7ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Devise::SessionsController#destroy as HTML
Redirected to https://www.example.com/
Filter chain halted as :verify_signed_out_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/waitlists" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by WaitlistsController#index as HTML
Redirected to https://www.example.com/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2015-10-30 15:31:03 -0700
Processing by Users::SessionsController#new as HTML
  Rendered users/sessions/new.html.erb within layouts/application (10.3ms)
Completed 200 OK in 23ms (Views: 22.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------
RestaurantIntegrationTest: test_login_waitlist_restaurant_already_sign_up
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 3], ["address", "1892 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:03.996739"], ["updated_at", "2015-10-30 22:31:03.996739"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "FendyOnel"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$HMyMbyoo4NbjJcOWd/m1T.3gO/9J7BQkN6lxDNqad5LMoV50AboPa"], ["created_at", "2015-10-30 22:31:04.002397"], ["updated_at", "2015-10-30 22:31:04.002397"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/restaurants" for 127.0.0.1 at 2015-10-30 15:31:04 -0700
Processing by RestaurantsController#index as HTML
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT "restaurants".* FROM "restaurants"
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  Rendered restaurants/index.html.erb within layouts/application (3.3ms)
Completed 200 OK in 5ms (Views: 3.5ms | ActiveRecord: 0.7ms)
Started POST "/create-user" for 127.0.0.1 at 2015-10-30 15:31:04 -0700
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyOnel2", "email"=>"FendyOnel2@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("email", "encrypted_password", "name", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["email", "fendyonel2@gmail.com"], ["encrypted_password", "$2a$04$D1t.eI0IvRQrRKcaxZwQaugu7F1xfVzQ2n1V0c866d1wC.9cTipWm"], ["name", "FendyOnel2"], ["rest", "f"], ["created_at", "2015-10-30 22:31:04.017612"], ["updated_at", "2015-10-30 22:31:04.017612"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-30 22:31:04.019901"], ["current_sign_in_at", "2015-10-30 22:31:04.019901"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:04.020618"], ["id", 980190987]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190987], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.029014"], ["updated_at", "2015-10-30 22:31:04.029014"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 302 Found in 17ms (ActiveRecord: 2.4ms)
Started GET "/" for 127.0.0.1 at 2015-10-30 15:31:04 -0700
Processing by DynamicPagesController#home as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190987]]
Redirected to http://www.example.com/profile
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:04 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190987]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.2ms)
Completed 200 OK in 3ms (Views: 1.1ms | ActiveRecord: 0.3ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-30 15:31:04 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190987]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 0.5ms)
Started DELETE "/destroy-user" for 127.0.0.1 at 2015-10-30 15:31:04 -0700
Processing by Users::RegistrationsController#destroy as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)
Started POST "/users/sign_in" for 127.0.0.1 at 2015-10-30 15:31:04 -0700
Processing by Devise::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"FendyOnel2@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "fendyonel2@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "current_sign_in_at" = $1, "sign_in_count" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["current_sign_in_at", "2015-10-30 22:31:04.057815"], ["sign_in_count", 2], ["updated_at", "2015-10-30 22:31:04.058735"], ["id", 980190987]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 9ms (ActiveRecord: 1.0ms)
Started GET "/waitlists_new?rest_id=@user.id" for 127.0.0.1 at 2015-10-30 15:31:04 -0700
Processing by WaitlistsController#new as HTML
  Parameters: {"rest_id"=>"@user.id"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190987]]
  Rendered waitlists/new.html.erb within layouts/application (1.3ms)
Completed 200 OK in 4ms (Views: 2.3ms | ActiveRecord: 0.3ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-30 15:31:04 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190987]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 0.6ms)
Started DELETE "/destroy-user" for 127.0.0.1 at 2015-10-30 15:31:04 -0700
Processing by Users::RegistrationsController#destroy as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------
WaitlistTest: test_position_simple
----------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:04.082957"], ["updated_at", "2015-10-30 22:31:04.082957"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$aKks9DyVvtinjmQbC4dcmuShgIppk.0WR2QRQ1qfCzFJ3az9eGcBC"], ["created_at", "2015-10-30 22:31:04.089424"], ["updated_at", "2015-10-30 22:31:04.089424"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.091691"], ["updated_at", "2015-10-30 22:31:04.091691"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$twmJHGKlHCuMIF3XEq3TgO9stkBgN2u3nmdSNy3g0fOJQd7H7Offy"], ["created_at", "2015-10-30 22:31:04.096334"], ["updated_at", "2015-10-30 22:31:04.096334"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:04.098313"], ["updated_at", "2015-10-30 22:31:04.098313"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$8HjAcLkxI.3SEX.boTuys.43tZljBA7s8QhaYL6ewGIAlFTJEYcey"], ["created_at", "2015-10-30 22:31:04.102762"], ["updated_at", "2015-10-30 22:31:04.102762"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.104772"], ["updated_at", "2015-10-30 22:31:04.104772"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$O6yRX1LSQ4Jcd948uR6aKe7vYX6xe.mOxMegOE4iAkOnwbwOaXHOe"], ["created_at", "2015-10-30 22:31:04.110361"], ["updated_at", "2015-10-30 22:31:04.110361"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 2], ["rest_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-30 22:31:04.118357"], ["updated_at", "2015-10-30 22:31:04.118357"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 4], ["rest_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 4], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-30 22:31:04.124991"], ["updated_at", "2015-10-30 22:31:04.124991"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mWaitlist Load (0.9ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 2]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:04.118357')  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.4ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 4]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:04.124991')  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.4ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["rest_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------
WaitlistTest: test_unique_customer_to_restaurant_waitlist
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:04.139689"], ["updated_at", "2015-10-30 22:31:04.139689"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$jzIzhyBYLDG/Q8.plTRf7ewzZfM6aDED81Qbz6lLVRDWooFDLYFAe"], ["created_at", "2015-10-30 22:31:04.147097"], ["updated_at", "2015-10-30 22:31:04.147097"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.150719"], ["updated_at", "2015-10-30 22:31:04.150719"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$WT6sN.qaMAJO937AMrDgfufZBBpdXxsYUUD6MUh03/dFOTnFc28IS"], ["created_at", "2015-10-30 22:31:04.157515"], ["updated_at", "2015-10-30 22:31:04.157515"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:04.159739"], ["updated_at", "2015-10-30 22:31:04.159739"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$tYLh7koqdQtHvP3bA77gUeeNtkkqWvcLnZmAVDbPvI6oSg7jZu4yy"], ["created_at", "2015-10-30 22:31:04.164196"], ["updated_at", "2015-10-30 22:31:04.164196"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.166156"], ["updated_at", "2015-10-30 22:31:04.166156"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$QPgtVxdLS9Aqk2lJZj4mcus6Gsa/VI/wGTWW7lcL8oaO3T9zEPP3m"], ["created_at", "2015-10-30 22:31:04.170584"], ["updated_at", "2015-10-30 22:31:04.170584"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 2], ["rest_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-30 22:31:04.176426"], ["updated_at", "2015-10-30 22:31:04.176426"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 2], ["rest_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
WaitlistTest: test_position_if_deleted_1st_place
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:04.182741"], ["updated_at", "2015-10-30 22:31:04.182741"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$/XFRGabwJKC2m8tDof1bR.6drGoLNe8oLJCnx8fB/l2P82vj9RbF2"], ["created_at", "2015-10-30 22:31:04.189315"], ["updated_at", "2015-10-30 22:31:04.189315"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.191736"], ["updated_at", "2015-10-30 22:31:04.191736"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$skpOg0LwnM1/OGEsyWxlV.NqMrHNE0zZJLDyXtFBzahLX6Tl5TRsS"], ["created_at", "2015-10-30 22:31:04.196881"], ["updated_at", "2015-10-30 22:31:04.196881"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:04.198920"], ["updated_at", "2015-10-30 22:31:04.198920"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$BTjTrRBU0UmqKxjjmrGI6.eZiML241e559GQseJW8o0NNKo0XWKdG"], ["created_at", "2015-10-30 22:31:04.203531"], ["updated_at", "2015-10-30 22:31:04.203531"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.205649"], ["updated_at", "2015-10-30 22:31:04.205649"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$VYbqL91UNtYrqsnx21sqTe3arWRIhrvcMa42QVEbp7K41Kw4UoBrq"], ["created_at", "2015-10-30 22:31:04.210432"], ["updated_at", "2015-10-30 22:31:04.210432"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 2], ["rest_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-30 22:31:04.215338"], ["updated_at", "2015-10-30 22:31:04.215338"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 4], ["rest_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 4], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-30 22:31:04.220604"], ["updated_at", "2015-10-30 22:31:04.220604"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mWaitlist Load (0.3ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:04.215338')  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.3ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 4]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:04.220604')  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.3ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."id" = $1 LIMIT 1  [["id", 980190975]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "waitlists" WHERE "waitlists"."id" = $1  [["id", 980190975]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 2]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 4]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:04.220604')  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["rest_id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
----------------------------
WaitlistTest: test_no_people
----------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:04.234525"], ["updated_at", "2015-10-30 22:31:04.234525"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$p6h/vNZXfHVAat8LBeytiu7gHZATsAABWdgj/xaijEcoJYvE2l3m2"], ["created_at", "2015-10-30 22:31:04.241072"], ["updated_at", "2015-10-30 22:31:04.241072"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.243364"], ["updated_at", "2015-10-30 22:31:04.243364"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$CaB0Qioc0gQo77GSnEdfCuwxyJHEkvn/nIW8yUs9CD2jDrwmldqwK"], ["created_at", "2015-10-30 22:31:04.248055"], ["updated_at", "2015-10-30 22:31:04.248055"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:04.249996"], ["updated_at", "2015-10-30 22:31:04.249996"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$LA8O44v0o.u3lhcgJmXpyOBniXFSxR75gcqZkpaa7J7JgbHv9aLka"], ["created_at", "2015-10-30 22:31:04.255553"], ["updated_at", "2015-10-30 22:31:04.255553"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.257833"], ["updated_at", "2015-10-30 22:31:04.257833"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$urmnWrCezPDzajXX0VzTieJDZRrRtsiQTe6AW0JjfsczpF0oZpVbK"], ["created_at", "2015-10-30 22:31:04.262722"], ["updated_at", "2015-10-30 22:31:04.262722"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
WaitlistTest: test_cust_id_==_rest_id_able_to_waitlist_more_than_once
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:04.267685"], ["updated_at", "2015-10-30 22:31:04.267685"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$j9GDdHNJEjymwqq1DYxGo.w.WclqXDcTnIATI8cdzvafsrOGw/1Am"], ["created_at", "2015-10-30 22:31:04.282932"], ["updated_at", "2015-10-30 22:31:04.282932"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.285339"], ["updated_at", "2015-10-30 22:31:04.285339"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$Txg0e8bJu03NswcGtVQzdeRFmY.8LSVV7xu/fmo7oWLM8BSqKMYwi"], ["created_at", "2015-10-30 22:31:04.291656"], ["updated_at", "2015-10-30 22:31:04.291656"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:04.294219"], ["updated_at", "2015-10-30 22:31:04.294219"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$/AlfmecXssOxR8gMOzYwUuyyvG9hPMDkO6SzdNFPi6maTfBoPxy/."], ["created_at", "2015-10-30 22:31:04.299266"], ["updated_at", "2015-10-30 22:31:04.299266"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.302350"], ["updated_at", "2015-10-30 22:31:04.302350"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$FABAptriBhGGoc8X6DGlx.faaOW98oFgs3XMHmM9EEDiR2.k03omC"], ["created_at", "2015-10-30 22:31:04.309711"], ["updated_at", "2015-10-30 22:31:04.309711"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "waitlists"
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 1], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-30 22:31:04.315190"], ["updated_at", "2015-10-30 22:31:04.315190"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists"
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 1], ["rest_id", 1], ["people", 4], ["created_at", "2015-10-30 22:31:04.319682"], ["updated_at", "2015-10-30 22:31:04.319682"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------
WaitlistTest: test_id_cust_id_is_invalid
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:04.323500"], ["updated_at", "2015-10-30 22:31:04.323500"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$Qh/cu915mSO8Q.SlOrCv6udiPMMjzAHvnuPigPQNbl5r41J2diggW"], ["created_at", "2015-10-30 22:31:04.329935"], ["updated_at", "2015-10-30 22:31:04.329935"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.332236"], ["updated_at", "2015-10-30 22:31:04.332236"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$gcxN3mStiiieZXPNyworIOQCH3hBXYJ7J11fcsKrbxJHXuGEnqhDG"], ["created_at", "2015-10-30 22:31:04.337559"], ["updated_at", "2015-10-30 22:31:04.337559"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:04.339732"], ["updated_at", "2015-10-30 22:31:04.339732"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$0hBG.3mFodkddccVU/p2neN8Zdahq8YOyYDHUZLv.3.uhbWFRpScO"], ["created_at", "2015-10-30 22:31:04.344231"], ["updated_at", "2015-10-30 22:31:04.344231"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.346175"], ["updated_at", "2015-10-30 22:31:04.346175"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$4tN6P0ejyHAy.vHUncxJp.HUFJGpaaze0DKZpb/qO.0bFBAdCK03a"], ["created_at", "2015-10-30 22:31:04.350585"], ["updated_at", "2015-10-30 22:31:04.350585"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 2], ["rest_id", 1]]
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
----------------------------------------
WaitlistTest: test_id_rest_id_is_invalid
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:04.360670"], ["updated_at", "2015-10-30 22:31:04.360670"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$RohLcjVLsi5ooHfK3hW/c.d4KkWCSSn2f1ztSUKLnvxQFnhwJGxxO"], ["created_at", "2015-10-30 22:31:04.367238"], ["updated_at", "2015-10-30 22:31:04.367238"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.369879"], ["updated_at", "2015-10-30 22:31:04.369879"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$hQiQRKs.RdbGk7k/42EnoO.oUZD8KkFHnx.Vq9Ubv85N36kWyXqBG"], ["created_at", "2015-10-30 22:31:04.376389"], ["updated_at", "2015-10-30 22:31:04.376389"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:04.378641"], ["updated_at", "2015-10-30 22:31:04.378641"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$d4MoZuT3Ge8tE77z/xNBCeM/atv7lN2VJMYnRS5hf0aEhjNq5dUjO"], ["created_at", "2015-10-30 22:31:04.383366"], ["updated_at", "2015-10-30 22:31:04.383366"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.386237"], ["updated_at", "2015-10-30 22:31:04.386237"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$.l.lOkx/fZUMfYjzlPO3s.1KThh7Ry4W4awogk0NgU7QWRCOyDZ2O"], ["created_at", "2015-10-30 22:31:04.392070"], ["updated_at", "2015-10-30 22:31:04.392070"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
WaitlistTest: test_delete_position_in_2_restaurants
---------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:04.398994"], ["updated_at", "2015-10-30 22:31:04.398994"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$z7ydvQCxrt0rihWeAkRRlOFGWUoQNl4WjKH9Pfx636DZ0UyamTdxK"], ["created_at", "2015-10-30 22:31:04.404612"], ["updated_at", "2015-10-30 22:31:04.404612"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.407009"], ["updated_at", "2015-10-30 22:31:04.407009"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$qrKV7f4CEtf0m5mrJeFfI.ZdNBNopXOVU9Zz5JZ5y0EQobf4QuPxG"], ["created_at", "2015-10-30 22:31:04.412066"], ["updated_at", "2015-10-30 22:31:04.412066"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:04.414038"], ["updated_at", "2015-10-30 22:31:04.414038"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$nDzM17DpERZjjrQ5X9DP4eeQL/tuwJNvqefttAEkyCrSKWcQDLkYS"], ["created_at", "2015-10-30 22:31:04.418513"], ["updated_at", "2015-10-30 22:31:04.418513"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.421656"], ["updated_at", "2015-10-30 22:31:04.421656"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$Q3NOrfzd4AVVEWwg.xV8l.hzb5pP.CPVaHV4X4ai2ZxF6XCaiuz1u"], ["created_at", "2015-10-30 22:31:04.426765"], ["updated_at", "2015-10-30 22:31:04.426765"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 2], ["rest_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-30 22:31:04.431677"], ["updated_at", "2015-10-30 22:31:04.431677"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 4], ["rest_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 4], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-30 22:31:04.435914"], ["updated_at", "2015-10-30 22:31:04.435914"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 4], ["rest_id", 3]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 4], ["rest_id", 3], ["people", 3], ["created_at", "2015-10-30 22:31:04.440269"], ["updated_at", "2015-10-30 22:31:04.440269"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 2], ["rest_id", 3]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 2], ["rest_id", 3], ["people", 3], ["created_at", "2015-10-30 22:31:04.444581"], ["updated_at", "2015-10-30 22:31:04.444581"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 2]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:04.431677')  [["rest_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:04.444581')[0m  [["rest_id", 3]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 4]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:04.435914')[0m  [["rest_id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:04.440269')  [["rest_id", 3]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["rest_id", 3]]
  [1m[36mWaitlist Load (0.4ms)[0m  [1mSELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."id" = $1 LIMIT 1[0m  [["id", 980190979]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "waitlists" WHERE "waitlists"."id" = $1[0m  [["id", 980190979]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mWaitlist Load (0.3ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 2]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:04.444581')  [["rest_id", 3]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 4]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:04.435914')  [["rest_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:04.440269')[0m  [["rest_id", 3]]
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["rest_id", 3]]
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."id" = $1 LIMIT 1  [["id", 980190981]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "waitlists" WHERE "waitlists"."id" = $1  [["id", 980190981]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mWaitlist Load (0.1ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 2]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:04.444581')[0m  [["rest_id", 3]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 4]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:04.435914')[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["rest_id", 3]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
WaitlistTest: test_position_if_deleted_2nd_place
------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:04.472527"], ["updated_at", "2015-10-30 22:31:04.472527"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$LOoPTrvp1DulNFdgWHSWMOlXH1Uo58cZwBFoyvSYdA6a0872lBUS6"], ["created_at", "2015-10-30 22:31:04.477379"], ["updated_at", "2015-10-30 22:31:04.477379"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.479547"], ["updated_at", "2015-10-30 22:31:04.479547"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$8HyEK8vt7ZosLgx2vl.mXOnwxpp1SRARsPVnHyxrB.epVSGTQyBlC"], ["created_at", "2015-10-30 22:31:04.484005"], ["updated_at", "2015-10-30 22:31:04.484005"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:04.486627"], ["updated_at", "2015-10-30 22:31:04.486627"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$vt12HkuEwK8opEMgHxWQdOABwmTBDceRvuCH3X33bsa5hTUcotKd6"], ["created_at", "2015-10-30 22:31:04.492112"], ["updated_at", "2015-10-30 22:31:04.492112"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.494121"], ["updated_at", "2015-10-30 22:31:04.494121"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$Zk4OoMrtAjZOqRPFVCj5I.X.f2mRTK4u//BZeVlaYmeelAPvR0B8y"], ["created_at", "2015-10-30 22:31:04.498573"], ["updated_at", "2015-10-30 22:31:04.498573"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 2], ["rest_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-30 22:31:04.503412"], ["updated_at", "2015-10-30 22:31:04.503412"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 4], ["rest_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 4], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-30 22:31:04.509179"], ["updated_at", "2015-10-30 22:31:04.509179"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 2]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:04.503412')[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 4]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:04.509179')[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."id" = $1 LIMIT 1[0m  [["id", 980190984]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "waitlists" WHERE "waitlists"."id" = $1[0m  [["id", 980190984]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mWaitlist Load (0.1ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:04.503412')  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 4]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["rest_id", 1]]
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WaitlistTest: test_position_in_2_restaurants
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:04.523264"], ["updated_at", "2015-10-30 22:31:04.523264"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$UH0egNUgo60vuyXU2YkgL.ImX1xB/k046NG451Bkz5vtVwtpotNi6"], ["created_at", "2015-10-30 22:31:04.529547"], ["updated_at", "2015-10-30 22:31:04.529547"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.532019"], ["updated_at", "2015-10-30 22:31:04.532019"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$D1UUvPTIWAH8qsLsxVZkBuZ6Nho1z41t3a499RPePRHWcC94my4sO"], ["created_at", "2015-10-30 22:31:04.539319"], ["updated_at", "2015-10-30 22:31:04.539319"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:04.542757"], ["updated_at", "2015-10-30 22:31:04.542757"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$3HoqB5y1v5PQJ8xDvzGypOH3OSY8JAHbh2pSKhp2mZcbTyH32V6KO"], ["created_at", "2015-10-30 22:31:04.548598"], ["updated_at", "2015-10-30 22:31:04.548598"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.550848"], ["updated_at", "2015-10-30 22:31:04.550848"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$Zyc4TBg1mv90uv7UXYlRAu9BO98k.hYsh/MWY5maGZ4MJbKOZeZRu"], ["created_at", "2015-10-30 22:31:04.555284"], ["updated_at", "2015-10-30 22:31:04.555284"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 2], ["rest_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-30 22:31:04.561294"], ["updated_at", "2015-10-30 22:31:04.561294"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 4], ["rest_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 4], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-30 22:31:04.565743"], ["updated_at", "2015-10-30 22:31:04.565743"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 4], ["rest_id", 3]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 4], ["rest_id", 3], ["people", 3], ["created_at", "2015-10-30 22:31:04.570062"], ["updated_at", "2015-10-30 22:31:04.570062"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 2], ["rest_id", 3]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 2], ["rest_id", 3], ["people", 3], ["created_at", "2015-10-30 22:31:04.575939"], ["updated_at", "2015-10-30 22:31:04.575939"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:04.561294')  [["rest_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:04.575939')[0m  [["rest_id", 3]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 4]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:04.565743')[0m  [["rest_id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:04.570062')  [["rest_id", 3]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["rest_id", 3]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
WaitlistTest: test_Correct_Waitlist_parameter
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:04.587472"], ["updated_at", "2015-10-30 22:31:04.587472"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$33bc1SYStnD3gL788xbPXunTVsgAoWKsVFmmHjT/LDYA.Ot96Ga8u"], ["created_at", "2015-10-30 22:31:04.592783"], ["updated_at", "2015-10-30 22:31:04.592783"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.594829"], ["updated_at", "2015-10-30 22:31:04.594829"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$i7e33aD7eMnaACU0sKUj3uI2hWYMJNtpIZn8q.dktwS8Fq3vs8pny"], ["created_at", "2015-10-30 22:31:04.599318"], ["updated_at", "2015-10-30 22:31:04.599318"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:04.601222"], ["updated_at", "2015-10-30 22:31:04.601222"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$L9/To1BMZHo8yGneVdSFfu.EAj7AlhmohxJ7G3UCUa0z86NFUsTmS"], ["created_at", "2015-10-30 22:31:04.605722"], ["updated_at", "2015-10-30 22:31:04.605722"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.607888"], ["updated_at", "2015-10-30 22:31:04.607888"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$yOJsHWgO2oo9rmxkNSSqwueQVO2p8kNb0PfP8U9Dly.bzQCes4fsS"], ["created_at", "2015-10-30 22:31:04.612838"], ["updated_at", "2015-10-30 22:31:04.612838"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-30 22:31:04.615078"], ["updated_at", "2015-10-30 22:31:04.615078"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
----------------------------
RestaurantTest: test_user_id
----------------------------
  [1m[35mRestaurant Load (0.6ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 518579358]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:04.623769"], ["updated_at", "2015-10-30 22:31:04.623769"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 518579406]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "restaurants" WHERE "restaurants"."id" = $1  [["id", 518579406]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------
RestaurantTest: test_count
--------------------------
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 518579358]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:04.632072"], ["updated_at", "2015-10-30 22:31:04.632072"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "restaurants" WHERE "restaurants"."id" = $1  [["id", 518579407]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------
RestaurantTest: test_hours
--------------------------
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 518579358]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:04.639400"], ["updated_at", "2015-10-30 22:31:04.639400"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 518579408]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "restaurants" SET "user_id" = $1, "updated_at" = $2 WHERE "restaurants"."id" = $3  [["user_id", 9], ["updated_at", "2015-10-30 22:31:04.641747"], ["id", 518579408]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "restaurants" WHERE "restaurants"."id" = $1[0m  [["id", 518579408]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------
RestaurantTest: test_address
----------------------------
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 518579358]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:04.646665"], ["updated_at", "2015-10-30 22:31:04.646665"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 518579409]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "restaurants" SET "user_id" = $1, "updated_at" = $2 WHERE "restaurants"."id" = $3[0m  [["user_id", 1893], ["updated_at", "2015-10-30 22:31:04.648867"], ["id", 518579409]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "restaurants" WHERE "restaurants"."id" = $1  [["id", 518579409]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------------------
CustomersControllerTest: test_should_destroy_customer
-----------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.656765"], ["updated_at", "2015-10-30 22:31:04.656765"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$t8VWf3h9cvhXVbRT3QTQmunmoQ3sjXBPRQP7U/B09Ozj3sURi96VC"], ["created_at", "2015-10-30 22:31:04.662216"], ["updated_at", "2015-10-30 22:31:04.662216"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Processing by CustomersController#destroy as HTML
  Parameters: {"id"=>"980190998"}
  [1m[35mCustomer Load (0.3ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT 1  [["id", 980190998]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "customers" WHERE "customers"."id" = $1  [["id", 980190998]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/customers
Completed 302 Found in 3ms (ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------------------
CustomersControllerTest: test_should_create_customer
----------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.673652"], ["updated_at", "2015-10-30 22:31:04.673652"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$xx45jt3YKZHekFlMZTpFj.vi7Xa0cq4SQIBv2EtvmjIOUYiRBm/P6"], ["created_at", "2015-10-30 22:31:04.679566"], ["updated_at", "2015-10-30 22:31:04.679566"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
Processing by CustomersController#create as HTML
  Parameters: {"customer"=>{"user_id"=>"10", "phone_number"=>"0"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (10.8ms)[0m  INSERT INTO "customers" ("phone_number", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["phone_number", 0], ["user_id", 10], ["created_at", "2015-10-30 22:31:04.684403"], ["updated_at", "2015-10-30 22:31:04.684403"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/customers/980191000
Completed 302 Found in 15ms (ActiveRecord: 11.1ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CustomersControllerTest: test_should_show_customer
--------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.701463"], ["updated_at", "2015-10-30 22:31:04.701463"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$WZ.hotch8o3oYYE5LMu0ZOcaaSIL7uOnUuHsFmkonGcwJFE/wHgNy"], ["created_at", "2015-10-30 22:31:04.706689"], ["updated_at", "2015-10-30 22:31:04.706689"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CustomersController#show as HTML
  Parameters: {"id"=>"980191001"}
  [1m[35mCustomer Load (0.3ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT 1  [["id", 980191001]]
  Rendered customers/show.html.erb within layouts/application (0.8ms)
Completed 200 OK in 5ms (Views: 3.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------------------
CustomersControllerTest: test_should_update_customer
----------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.716461"], ["updated_at", "2015-10-30 22:31:04.716461"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$1.NbyNQ8Kfh0EsguL2GKyuTrFHjVXcz8JrWHdhO.MN.6ynjtqaA6a"], ["created_at", "2015-10-30 22:31:04.722090"], ["updated_at", "2015-10-30 22:31:04.722090"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
Processing by CustomersController#update as HTML
  Parameters: {"customer"=>{"user_id"=>"10", "phone_number"=>"0"}, "id"=>"980191002"}
  [1m[36mCustomer Load (0.3ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT 1[0m  [["id", 980191002]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "customers" SET "user_id" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["user_id", 10], ["updated_at", "2015-10-30 22:31:04.728148"], ["id", 980191002]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/customers/980191002
Completed 302 Found in 4ms (ActiveRecord: 0.9ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------
CustomersControllerTest: test_should_get_edit_customer
------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.733625"], ["updated_at", "2015-10-30 22:31:04.733625"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$KJYXIEGAfFvXEVdHuoqniuOsnwPyMhLI3bJdaYVAuJIbSrkSot.YO"], ["created_at", "2015-10-30 22:31:04.739748"], ["updated_at", "2015-10-30 22:31:04.739748"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Processing by CustomersController#edit as HTML
  Parameters: {"id"=>"980191003"}
  [1m[35mCustomer Load (0.4ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT 1  [["id", 980191003]]
  Rendered customers/_form.html.erb (1.9ms)
  Rendered customers/edit.html.erb within layouts/application (3.9ms)
Completed 200 OK in 7ms (Views: 5.9ms | ActiveRecord: 0.4ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------
UserTest: test_No_Name
----------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", ""], ["email", "user@example.com"], ["encrypted_password", "$2a$04$n.bGPUYUPgRCnOQHC/BUe.8T1b.vnvnNwT2Qo4TKdMqWE3it8Edha"], ["rest", "f"], ["created_at", "2015-10-30 22:31:04.759287"], ["updated_at", "2015-10-30 22:31:04.759287"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------
UserTest: test_Email_regex_bad
------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'userexamplecom' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@examplecom' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------
UserTest: test_No_Rest
----------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------
UserTest: test_Password_don't_match
-----------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
--------------------------
UserTest: test_No_Password
--------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------
UserTest: test_No_Email
-----------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------
UserTest: test_password_<_8
---------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
UserTest: test_duplicate_different_case_email
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "Example User"], ["email", "user@example.com"], ["encrypted_password", "$2a$04$mtNnO4z8sFdQdNid5eYACug0AwYRaQEsj1Xj3AzzehfivVccXyhiy"], ["rest", "f"], ["created_at", "2015-10-30 22:31:04.810594"], ["updated_at", "2015-10-30 22:31:04.810594"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------
UserTest: test_duplicate_password
---------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Example User"], ["email", "user@example.com"], ["encrypted_password", "$2a$04$uX/uLRCVSFQKEG/6UO8yx.w8LLWA4eOliSHqDCGhTdzisLEiMgc4C"], ["rest", "f"], ["created_at", "2015-10-30 22:31:04.826518"], ["updated_at", "2015-10-30 22:31:04.826518"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user2@example.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Example User2"], ["email", "user2@example.com"], ["encrypted_password", "$2a$04$PP6Vgx/a2dHGKQNkA/ds9exrdDaGGNh604dRQIdCyEVW/8Rx6M4FG"], ["rest", "f"], ["created_at", "2015-10-30 22:31:04.829876"], ["updated_at", "2015-10-30 22:31:04.829876"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------
UserTest: test_duplicate_name
-----------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Example User"], ["email", "user@example.com"], ["encrypted_password", "$2a$04$cGkYmFDOAvcNl0XkV/hwwOTo1AJliLfyiMpSSCK.6DZu551R9Uojy"], ["rest", "f"], ["created_at", "2015-10-30 22:31:04.838042"], ["updated_at", "2015-10-30 22:31:04.838042"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user1@example.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Example User"], ["email", "user1@example.com"], ["encrypted_password", "$2a$04$C5dgB4Ww0Q8ioJMAw4Kqee5b0xeseElY8k80mjG6ntZs7yLRXJyP2"], ["rest", "f"], ["created_at", "2015-10-30 22:31:04.842682"], ["updated_at", "2015-10-30 22:31:04.842682"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------
UserTest: test_duplicate_email
------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Example User"], ["email", "user@example.com"], ["encrypted_password", "$2a$04$drwEXOINRFhEJzJ27x0tQ.rrqSpxDf6hqUZLYLJp9NfahM60CPiui"], ["rest", "f"], ["created_at", "2015-10-30 22:31:04.850400"], ["updated_at", "2015-10-30 22:31:04.850400"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
----------------------------
UserTest: test_Correct_login
----------------------------
  [1m[35m (1.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "Example User"], ["email", "user@example.com"], ["encrypted_password", "$2a$04$9/AF0eYqr4aNggjIDUvpXOTLOzXk6K1jjK9ZYNRm89ixEFgt7kt0y"], ["rest", "f"], ["created_at", "2015-10-30 22:31:04.864850"], ["updated_at", "2015-10-30 22:31:04.864850"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------------------------
UsersIntegrationTest: test_sign_up_user_failure_password_don't_match
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.870643"], ["updated_at", "2015-10-30 22:31:04.870643"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$MyYlcikvJH1Z/BLM8ZHndek70yT3OrWPToU9DiOv0iRU1AwXOnqXK"], ["created_at", "2015-10-30 22:31:04.876905"], ["updated_at", "2015-10-30 22:31:04.876905"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Started POST "/create-user" for 127.0.0.1 at 2015-10-30 15:31:04 -0700
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"user@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/signup-user
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 302 Found in 11ms (ActiveRecord: 1.4ms)
Started GET "/signup-user" for 127.0.0.1 at 2015-10-30 15:31:04 -0700
Processing by Users::RegistrationsController#new_user as HTML
  Rendered users/registrations/new_user.html.erb within layouts/application (5.2ms)
Completed 200 OK in 9ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
UsersIntegrationTest: test_sign_up_user_failure_no_email
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.911603"], ["updated_at", "2015-10-30 22:31:04.911603"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$UkVyeHdMjHlwPeGv3N4K8.cLwwCEoceN0V.DlmCOV51.WGdQXWmk2"], ["created_at", "2015-10-30 22:31:04.916486"], ["updated_at", "2015-10-30 22:31:04.916486"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "customers"
Started POST "/create-user" for 127.0.0.1 at 2015-10-30 15:31:04 -0700
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/signup-user
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 302 Found in 7ms (ActiveRecord: 0.5ms)
Started GET "/signup-user" for 127.0.0.1 at 2015-10-30 15:31:04 -0700
Processing by Users::RegistrationsController#new_user as HTML
  Rendered users/registrations/new_user.html.erb within layouts/application (1.9ms)
Completed 200 OK in 3ms (Views: 2.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
UsersIntegrationTest: test_sign_up_user_failure_email_regex_bad
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.938489"], ["updated_at", "2015-10-30 22:31:04.938489"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$bSjCJZ5WSktbSD7b9pU23.7gQLHwdASQVcKMhGndI/qOvOox.VEja"], ["created_at", "2015-10-30 22:31:04.943247"], ["updated_at", "2015-10-30 22:31:04.943247"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Started POST "/create-user" for 127.0.0.1 at 2015-10-30 15:31:04 -0700
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"asdf", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'asdf' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/signup-user
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'asdf' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 302 Found in 12ms (ActiveRecord: 1.6ms)
Started GET "/signup-user" for 127.0.0.1 at 2015-10-30 15:31:04 -0700
Processing by Users::RegistrationsController#new_user as HTML
  Rendered users/registrations/new_user.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
UsersIntegrationTest: test_sign_up_restaurant_user_successfully
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:04.973502"], ["updated_at", "2015-10-30 22:31:04.973502"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$OGK8M54LkozAqVF79RTd2OXrRO/m4cAC65BFlzRVt6QHJfRRmpFaa"], ["created_at", "2015-10-30 22:31:04.978481"], ["updated_at", "2015-10-30 22:31:04.978481"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "restaurants"
Started POST "/create-restaurant" for 127.0.0.1 at 2015-10-30 15:31:04 -0700
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"FendyBilly@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendybilly@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "name", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "fendybilly@gmail.com"], ["encrypted_password", "$2a$04$cQOUuQZIeQ74nvpW4Y247uX08G4iiis6Ur4PBWBD8JZ/sa6nY6sW6"], ["name", "FendyBilly"], ["rest", "t"], ["created_at", "2015-10-30 22:31:04.988635"], ["updated_at", "2015-10-30 22:31:04.988635"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-10-30 22:31:04.991063"], ["current_sign_in_at", "2015-10-30 22:31:04.991063"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:04.991827"], ["id", 980190996]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190996], ["created_at", "2015-10-30 22:31:04.996692"], ["updated_at", "2015-10-30 22:31:04.996692"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 302 Found in 14ms (ActiveRecord: 2.3ms)
Started GET "/" for 127.0.0.1 at 2015-10-30 15:31:04 -0700
Processing by DynamicPagesController#home as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190996]]
Redirected to http://www.example.com/profile
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:05 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190996]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (0.2ms)
Completed 200 OK in 4ms (Views: 1.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
UsersIntegrationTest: test_sign_in_user_don't_exist
---------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:05.015038"], ["updated_at", "2015-10-30 22:31:05.015038"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$iwUKaqq3ecODonk2iFzeXO1R.GOuiJUuYTkFDW4Q5uNo9GXdpHdfu"], ["created_at", "2015-10-30 22:31:05.022035"], ["updated_at", "2015-10-30 22:31:05.022035"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:05 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"userdontexist@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "userdontexist@gmail.com"]]
Completed 401 Unauthorized in 2ms (ActiveRecord: 0.2ms)
Started GET "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:05 -0700
Processing by Users::SessionsController#new as HTML
  Rendered users/sessions/new.html.erb within layouts/application (2.9ms)
Completed 200 OK in 6ms (Views: 4.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
UsersIntegrationTest: test_sign_up_rest_failure_email_regex_bad
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:05.042160"], ["updated_at", "2015-10-30 22:31:05.042160"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$Ju/klgymC.WRoQbmubkXZuUEY/Oar8Nk3OMzfaDsV6hI7Tflmm4rm"], ["created_at", "2015-10-30 22:31:05.047076"], ["updated_at", "2015-10-30 22:31:05.047076"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Started POST "/create-restaurant" for 127.0.0.1 at 2015-10-30 15:31:05 -0700
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"asdf", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'asdf' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/signup-restaurant
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'asdf' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 302 Found in 12ms (ActiveRecord: 1.6ms)
Started GET "/signup-restaurant" for 127.0.0.1 at 2015-10-30 15:31:05 -0700
Processing by Users::RegistrationsController#new_rest as HTML
  Rendered users/registrations/new_rest.html.erb within layouts/application (12.7ms)
Completed 200 OK in 15ms (Views: 14.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------------------
UsersIntegrationTest: test_sign_up_user_failure_password_<_8
------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:05.087473"], ["updated_at", "2015-10-30 22:31:05.087473"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$8zx3zYb05XDm3DHjRNvQROxcj8HwhdQ1s5wGyJUWAZ2Boy2PUV3yW"], ["created_at", "2015-10-30 22:31:05.094485"], ["updated_at", "2015-10-30 22:31:05.094485"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
Started POST "/create-user" for 127.0.0.1 at 2015-10-30 15:31:05 -0700
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"user@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/signup-user
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 302 Found in 9ms (ActiveRecord: 1.2ms)
Started GET "/signup-user" for 127.0.0.1 at 2015-10-30 15:31:05 -0700
Processing by Users::RegistrationsController#new_user as HTML
  Rendered users/registrations/new_user.html.erb within layouts/application (2.5ms)
Completed 200 OK in 5ms (Views: 3.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------------------------
UsersIntegrationTest: test_sign_up_rest_failure_password_don't_match
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:05.120770"], ["updated_at", "2015-10-30 22:31:05.120770"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$oxGVo/nkjVf9vDIcvvH7COFCkvOudJXcBpyRRN0vgClPbs7u3GmXO"], ["created_at", "2015-10-30 22:31:05.126499"], ["updated_at", "2015-10-30 22:31:05.126499"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Started POST "/create-restaurant" for 127.0.0.1 at 2015-10-30 15:31:05 -0700
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"user@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/signup-restaurant
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 302 Found in 14ms (ActiveRecord: 1.8ms)
Started GET "/signup-restaurant" for 127.0.0.1 at 2015-10-30 15:31:05 -0700
Processing by Users::RegistrationsController#new_rest as HTML
  Rendered users/registrations/new_rest.html.erb within layouts/application (2.9ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
UsersIntegrationTest: test_sign_up_rest_failure_no_email
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:05.161081"], ["updated_at", "2015-10-30 22:31:05.161081"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$Zh7fATWH79Xw7IHlYJ8h5uTVIDzukDBXHSEm95fZPeTCayYTacO/6"], ["created_at", "2015-10-30 22:31:05.165633"], ["updated_at", "2015-10-30 22:31:05.165633"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "customers"
Started POST "/create-restaurant" for 127.0.0.1 at 2015-10-30 15:31:05 -0700
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/signup-restaurant
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 302 Found in 7ms (ActiveRecord: 0.6ms)
Started GET "/signup-restaurant" for 127.0.0.1 at 2015-10-30 15:31:05 -0700
Processing by Users::RegistrationsController#new_rest as HTML
  Rendered users/registrations/new_rest.html.erb within layouts/application (1.9ms)
Completed 200 OK in 3ms (Views: 2.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------
UsersIntegrationTest: test_sign_up_user_duplicate_failure
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:05.188300"], ["updated_at", "2015-10-30 22:31:05.188300"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$dq22FzALy2aFQlgqLTwbrOJeHRHIHHo0khgATGOoTrE7ze0a819Li"], ["created_at", "2015-10-30 22:31:05.192817"], ["updated_at", "2015-10-30 22:31:05.192817"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Started POST "/create-user" for 127.0.0.1 at 2015-10-30 15:31:05 -0700
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/signup-user
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 302 Found in 10ms (ActiveRecord: 1.4ms)
Started GET "/signup-user" for 127.0.0.1 at 2015-10-30 15:31:05 -0700
Processing by Users::RegistrationsController#new_user as HTML
  Rendered users/registrations/new_user.html.erb within layouts/application (1.9ms)
Completed 200 OK in 3ms (Views: 2.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------------
UsersIntegrationTest: test_sign_up_rest_failure_password_<_8
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:05.219547"], ["updated_at", "2015-10-30 22:31:05.219547"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$PYvH.0asq08WkpwHVmCqO.Ob8LU//Bi2QMyaIoExSTUPUA1/nHGOO"], ["created_at", "2015-10-30 22:31:05.225352"], ["updated_at", "2015-10-30 22:31:05.225352"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "customers"
Started POST "/create-restaurant" for 127.0.0.1 at 2015-10-30 15:31:05 -0700
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"user@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/signup-restaurant
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 302 Found in 9ms (ActiveRecord: 1.3ms)
Started GET "/signup-restaurant" for 127.0.0.1 at 2015-10-30 15:31:05 -0700
Processing by Users::RegistrationsController#new_rest as HTML
  Rendered users/registrations/new_rest.html.erb within layouts/application (2.1ms)
Completed 200 OK in 4ms (Views: 3.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
UsersIntegrationTest: test_sign_up_restaurant_duplicate_failure
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:05.252140"], ["updated_at", "2015-10-30 22:31:05.252140"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$yWdVSAOj6C0W2qN7NTEozO99mi17C9h3K/XXFhkoRBshA8neCyg5u"], ["created_at", "2015-10-30 22:31:05.258968"], ["updated_at", "2015-10-30 22:31:05.258968"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Started POST "/create-restaurant" for 127.0.0.1 at 2015-10-30 15:31:05 -0700
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/signup-restaurant
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 302 Found in 11ms (ActiveRecord: 1.5ms)
Started GET "/signup-restaurant" for 127.0.0.1 at 2015-10-30 15:31:05 -0700
Processing by Users::RegistrationsController#new_rest as HTML
  Rendered users/registrations/new_rest.html.erb within layouts/application (2.1ms)
Completed 200 OK in 4ms (Views: 3.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------
UsersIntegrationTest: test_sign_in_wrong_password
-------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:05.287065"], ["updated_at", "2015-10-30 22:31:05.287065"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$ytMOAizW9PIkF7tvB7xsG.YNaEhaDHc/ztd5Az95eNabJZp9s.oBW"], ["created_at", "2015-10-30 22:31:05.292640"], ["updated_at", "2015-10-30 22:31:05.292640"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:05 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "atidjenad@gmail.com"]]
Completed 401 Unauthorized in 3ms (ActiveRecord: 0.3ms)
Started GET "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:05 -0700
Processing by Users::SessionsController#new as HTML
  Rendered users/sessions/new.html.erb within layouts/application (1.9ms)
Completed 200 OK in 5ms (Views: 3.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------
UsersIntegrationTest: test_sign_up_customer_user_successfully
-------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:05.310278"], ["updated_at", "2015-10-30 22:31:05.310278"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$B3UYGVrwiHTi4.t.YcdKieESBuqd3EWyuDoisCbdT9EWKltGcg7ra"], ["created_at", "2015-10-30 22:31:05.315013"], ["updated_at", "2015-10-30 22:31:05.315013"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "customers"
Started POST "/create-user" for 127.0.0.1 at 2015-10-30 15:31:05 -0700
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"FendyBilly@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendybilly@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "name", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "fendybilly@gmail.com"], ["encrypted_password", "$2a$04$8E3VEBb6KIAAFYSVMlW8QekP4BW4qzjXRd3kNjVxIgLx2rOEtzyXG"], ["name", "FendyBilly"], ["rest", "f"], ["created_at", "2015-10-30 22:31:05.324181"], ["updated_at", "2015-10-30 22:31:05.324181"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-10-30 22:31:05.326144"], ["current_sign_in_at", "2015-10-30 22:31:05.326144"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:05.326790"], ["id", 980190997]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190997], ["phone_number", 0], ["created_at", "2015-10-30 22:31:05.331760"], ["updated_at", "2015-10-30 22:31:05.331760"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 302 Found in 13ms (ActiveRecord: 2.2ms)
Started GET "/" for 127.0.0.1 at 2015-10-30 15:31:05 -0700
Processing by DynamicPagesController#home as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190997]]
Redirected to http://www.example.com/profile
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:05 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190997]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.3ms)
Completed 200 OK in 5ms (Views: 2.0ms | ActiveRecord: 0.4ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------------
UsersIntegrationTest: test_sign_in_user_successfully
----------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:05.351816"], ["updated_at", "2015-10-30 22:31:05.351816"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$u1FiEWpagUwOTZbaGVucaelWbhCsvfSrLkGmA3uBndYNfmdaQKY/2"], ["created_at", "2015-10-30 22:31:05.357958"], ["updated_at", "2015-10-30 22:31:05.357958"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:05 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "atidjenad@gmail.com"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-30 22:31:05.365348"], ["current_sign_in_at", "2015-10-30 22:31:05.365348"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:05.366186"], ["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 9ms (ActiveRecord: 0.8ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:05 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 2]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.2ms)
Completed 200 OK in 4ms (Views: 1.5ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (3.7ms)[0m  ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "customers"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at", "id") VALUES (1, 123, '2015-10-30 22:31:24', '2015-10-30 22:31:24', 980190962)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "restaurants"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at", "id") VALUES (1, '1893 Berkeley Avenue', '9:00 am - 10:00 pm', '2015-10-30 22:31:24', '2015-10-30 22:31:24', 518579358)[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES ('abc@gmail.com', 'abcd', 'abcd', '2015-10-09', '2015-10-09', '2015-10-10', '2015-10-10', '192.168.1.5', '192.168.1.9', 'FendyOnel', 't', '2015-10-30 22:31:24', '2015-10-30 22:31:24', 980190962)[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "waitlists"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "waitlists" ("rest_id", "cust_id", "people", "created_at", "updated_at", "id") VALUES (2, 1, 10, '2015-10-30 22:31:24', '2015-10-30 22:31:24', 980190962)[0m
  [1m[35m (0.5ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
WaitlistRoutesTest: test_customer_delete_waitlist_success
---------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$70fpYVlBiHX1qqpJnp/tPuVz/xb5EehajGDCMqLS4/nLte9wOHafu"], ["rest", "f"], ["created_at", "2015-10-30 22:31:24.315430"], ["updated_at", "2015-10-30 22:31:24.315430"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190963], ["phone_number", 0], ["created_at", "2015-10-30 22:31:24.321990"], ["updated_at", "2015-10-30 22:31:24.321990"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$.sOL/YA4QbhRtzfeTVyXQOiQG7v0aWA/QRanADQAvUh0wjIWW5Z.C"], ["rest", "t"], ["created_at", "2015-10-30 22:31:24.329945"], ["updated_at", "2015-10-30 22:31:24.329945"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190964], ["created_at", "2015-10-30 22:31:24.335538"], ["updated_at", "2015-10-30 22:31:24.335538"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test1@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-30 22:31:24.414656"], ["current_sign_in_at", "2015-10-30 22:31:24.414656"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:24.415905"], ["id", 980190963]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 71ms (ActiveRecord: 1.6ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190963]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (2.9ms)
Completed 200 OK in 13ms (Views: 8.9ms | ActiveRecord: 0.6ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"people"=>"5", "rest_id"=>"980190964"}}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190963]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190963]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190964]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190964]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190963]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 980190963], ["rest_id", 980190964]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 980190963], ["rest_id", 980190964], ["people", 5], ["created_at", "2015-10-30 22:31:24.501891"], ["updated_at", "2015-10-30 22:31:24.501891"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/waitlists
Completed 302 Found in 21ms (ActiveRecord: 2.8ms)
  [1m[36mWaitlist Load (0.4ms)[0m  [1mSELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1[0m  [["cust_id", 980190963]]
Started DELETE "/waitlists/980190963" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by WaitlistsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[35mWaitlist Load (0.6ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."id" = $1 LIMIT 1  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "waitlists" WHERE "waitlists"."id" = $1  [["id", 980190963]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/waitlists
Completed 302 Found in 5ms (ActiveRecord: 1.2ms)
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1  [["cust_id", 980190963]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
WaitlistRoutesTest: test_user_can_waitlist_after_sign_in
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$FPZ1u6ZK.wuDP9NaG/xykOpuo36dpzfoJGANeA/hyEmOZoNsdIt0G"], ["rest", "f"], ["created_at", "2015-10-30 22:31:24.525177"], ["updated_at", "2015-10-30 22:31:24.525177"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190965], ["phone_number", 0], ["created_at", "2015-10-30 22:31:24.527813"], ["updated_at", "2015-10-30 22:31:24.527813"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$10CV2XGdJPPhVvjzfUAXdexuujXgdDojcf1tkbfxunwQyTB1f81g6"], ["rest", "t"], ["created_at", "2015-10-30 22:31:24.534111"], ["updated_at", "2015-10-30 22:31:24.534111"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190966], ["created_at", "2015-10-30 22:31:24.537075"], ["updated_at", "2015-10-30 22:31:24.537075"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test1@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-30 22:31:24.546592"], ["current_sign_in_at", "2015-10-30 22:31:24.546592"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:24.547688"], ["id", 980190965]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 10ms (ActiveRecord: 1.1ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190965]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.3ms)
Completed 200 OK in 4ms (Views: 1.8ms | ActiveRecord: 0.4ms)
Started GET "/waitlists_new" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by WaitlistsController#new as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190965]]
  Rendered waitlists/new.html.erb within layouts/application (21.8ms)
Completed 200 OK in 28ms (Views: 25.6ms | ActiveRecord: 0.5ms)
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------
WaitlistRoutesTest: test_customer_waitlist_fail
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$EQsM8o3RB1KERu22kQq5R.4He7e.He91DyfU8kmSlQfYwg4V8S5jm"], ["rest", "f"], ["created_at", "2015-10-30 22:31:24.597980"], ["updated_at", "2015-10-30 22:31:24.597980"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190967], ["phone_number", 0], ["created_at", "2015-10-30 22:31:24.600405"], ["updated_at", "2015-10-30 22:31:24.600405"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$L3T4gIrDFA7ilNdYVj.su.f1MxMrLsfp5MnTQUaZieyO0qYgxw0uq"], ["rest", "t"], ["created_at", "2015-10-30 22:31:24.606905"], ["updated_at", "2015-10-30 22:31:24.606905"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190968], ["created_at", "2015-10-30 22:31:24.611842"], ["updated_at", "2015-10-30 22:31:24.611842"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test1@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-30 22:31:24.625188"], ["current_sign_in_at", "2015-10-30 22:31:24.625188"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:24.626415"], ["id", 980190967]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 13ms (ActiveRecord: 1.7ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190967]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.2ms)
Completed 200 OK in 3ms (Views: 1.2ms | ActiveRecord: 0.5ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"cust_id"=>"980190967", "people"=>"5", "rest_id"=>"980190968"}}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190967]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190967]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190968]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190968]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190967]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 980190967], ["rest_id", 980190968]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 980190967], ["rest_id", 980190968], ["people", 5], ["created_at", "2015-10-30 22:31:24.701955"], ["updated_at", "2015-10-30 22:31:24.701955"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/waitlists
Completed 302 Found in 10ms (ActiveRecord: 2.6ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists"[0m
Started POST "/waitlists" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"cust_id"=>"980190967", "people"=>"10", "rest_id"=>"980190968"}}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190967]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190967]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190968]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190968]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190967]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 980190967], ["rest_id", 980190968]]
Redirected to http://www.example.com/waitlists
Completed 302 Found in 5ms (ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
WaitlistRoutesTest: test_customer_waitlist_success
--------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$cG.Q.dZPUqOv4H4dwxx4iuAoXms1KA45Qr7PLMvtAkhXrLjBLfbOC"], ["rest", "f"], ["created_at", "2015-10-30 22:31:24.718830"], ["updated_at", "2015-10-30 22:31:24.718830"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190969], ["phone_number", 0], ["created_at", "2015-10-30 22:31:24.720975"], ["updated_at", "2015-10-30 22:31:24.720975"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$dK40KH/7vQT1ii9m68sLoev1SzRKeTKaUMx6CnrBQMJAZsFHoX3Q6"], ["rest", "t"], ["created_at", "2015-10-30 22:31:24.727274"], ["updated_at", "2015-10-30 22:31:24.727274"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190970], ["created_at", "2015-10-30 22:31:24.729233"], ["updated_at", "2015-10-30 22:31:24.729233"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test1@gmail.com"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-30 22:31:24.737373"], ["current_sign_in_at", "2015-10-30 22:31:24.737373"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:24.738146"], ["id", 980190969]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 9ms (ActiveRecord: 1.1ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190969]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.3ms)
Completed 200 OK in 3ms (Views: 1.2ms | ActiveRecord: 0.3ms)
Started POST "/waitlists_new" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"cust_id"=>"980190969", "people"=>"5", "rest_id"=>"980190970"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190969]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190969]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190970]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190970]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190969]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 980190969], ["rest_id", 980190970]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 980190969], ["rest_id", 980190970], ["people", 5], ["created_at", "2015-10-30 22:31:24.757868"], ["updated_at", "2015-10-30 22:31:24.757868"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/waitlists
Completed 302 Found in 10ms (ActiveRecord: 1.7ms)
  [1m[36mWaitlist Load (0.5ms)[0m  [1mSELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1[0m  [["cust_id", 980190969]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-----------------------------------------------------------
WaitlistRoutesTest: test_restaurant_delete_waitlist_success
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$AY3kFSOrbN8Igx.YBsG4YuiQqId0Gb04rOj0Vi5JZOZ4hFZAEBpgy"], ["rest", "f"], ["created_at", "2015-10-30 22:31:24.770758"], ["updated_at", "2015-10-30 22:31:24.770758"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190971], ["phone_number", 0], ["created_at", "2015-10-30 22:31:24.773523"], ["updated_at", "2015-10-30 22:31:24.773523"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$J5uFJ71.VQQwh1lsiffkfO0RECHNSpdnOgkOcdaYkc98TDp5O0reW"], ["rest", "t"], ["created_at", "2015-10-30 22:31:24.781948"], ["updated_at", "2015-10-30 22:31:24.781948"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["user_id", 980190972], ["created_at", "2015-10-30 22:31:24.784023"], ["updated_at", "2015-10-30 22:31:24.784023"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "test1@gmail.com"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-10-30 22:31:24.795815"], ["current_sign_in_at", "2015-10-30 22:31:24.795815"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:24.796959"], ["id", 980190971]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 13ms (ActiveRecord: 1.5ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190971]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.2ms)
Completed 200 OK in 3ms (Views: 1.1ms | ActiveRecord: 0.4ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190971]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 8ms (ActiveRecord: 0.8ms)
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test2@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "test2@gmail.com"]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-10-30 22:31:24.830279"], ["current_sign_in_at", "2015-10-30 22:31:24.830279"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:24.831823"], ["id", 980190972]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 13ms (ActiveRecord: 1.8ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190972]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (0.9ms)
Completed 200 OK in 6ms (Views: 3.6ms | ActiveRecord: 0.4ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"people"=>"5", "rest_id"=>"980190972"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190972]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190972]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190972]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190972]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 980190972], ["rest_id", 980190972], ["people", 5], ["created_at", "2015-10-30 22:31:24.851257"], ["updated_at", "2015-10-30 22:31:24.851257"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/waitlists
Completed 302 Found in 6ms (ActiveRecord: 1.1ms)
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1  [["cust_id", 980190972]]
Started DELETE "/waitlists/980190966" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by WaitlistsController#destroy as HTML
  Parameters: {"id"=>"980190966"}
  [1m[36mWaitlist Load (0.3ms)[0m  [1mSELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."id" = $1 LIMIT 1[0m  [["id", 980190966]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "waitlists" WHERE "waitlists"."id" = $1[0m  [["id", 980190966]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/waitlists
Completed 302 Found in 3ms (ActiveRecord: 0.7ms)
  [1m[36mWaitlist Load (0.3ms)[0m  [1mSELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1[0m  [["cust_id", 980190972]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------------
WaitlistRoutesTest: test_restaurant_put_waitlist_success
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$rPAeAS3L.NKLGwwoPsX0YOlIDK0vlFF05Wb8oHkjsktMLHdVoJ6w2"], ["rest", "f"], ["created_at", "2015-10-30 22:31:24.868570"], ["updated_at", "2015-10-30 22:31:24.868570"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190973], ["phone_number", 0], ["created_at", "2015-10-30 22:31:24.870963"], ["updated_at", "2015-10-30 22:31:24.870963"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.9ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$DB4MGFY4tISUimM1ePOE8.HJ3WSdfO8cKpnfgiA8lMXWS63oADSTK"], ["rest", "t"], ["created_at", "2015-10-30 22:31:24.883164"], ["updated_at", "2015-10-30 22:31:24.883164"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["user_id", 980190974], ["created_at", "2015-10-30 22:31:24.888043"], ["updated_at", "2015-10-30 22:31:24.888043"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "test1@gmail.com"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-10-30 22:31:24.903840"], ["current_sign_in_at", "2015-10-30 22:31:24.903840"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:24.905021"], ["id", 980190973]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 14ms (ActiveRecord: 1.2ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190973]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.3ms)
Completed 200 OK in 3ms (Views: 1.2ms | ActiveRecord: 0.3ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190973]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 0.5ms)
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test2@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "test2@gmail.com"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-10-30 22:31:24.930920"], ["current_sign_in_at", "2015-10-30 22:31:24.930920"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:24.931708"], ["id", 980190974]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 9ms (ActiveRecord: 0.9ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190974]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (0.1ms)
Completed 200 OK in 4ms (Views: 1.2ms | ActiveRecord: 0.3ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"people"=>"5", "rest_id"=>"980190974"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190974]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190974]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190974]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190974]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 980190974], ["rest_id", 980190974], ["people", 5], ["created_at", "2015-10-30 22:31:24.950747"], ["updated_at", "2015-10-30 22:31:24.950747"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/waitlists
Completed 302 Found in 6ms (ActiveRecord: 1.1ms)
  [1m[35mWaitlist Load (0.4ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1  [["cust_id", 980190974]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------
WaitlistRoutesTest: test_restaurant_put_waitlist_fail
-----------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$Vf7xFrghpCWXKvWqANLCmOlt7qLhgbjyPRnxlLKrVIJxEm.N5TTRC"], ["rest", "f"], ["created_at", "2015-10-30 22:31:24.961234"], ["updated_at", "2015-10-30 22:31:24.961234"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190975], ["phone_number", 0], ["created_at", "2015-10-30 22:31:24.963587"], ["updated_at", "2015-10-30 22:31:24.963587"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$VkUNfTPymoYKZu4a4e0T4uglYOz/5pLXOPQOFgyYpbT8QzhFTpMq2"], ["rest", "t"], ["created_at", "2015-10-30 22:31:24.970520"], ["updated_at", "2015-10-30 22:31:24.970520"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190976], ["created_at", "2015-10-30 22:31:24.972584"], ["updated_at", "2015-10-30 22:31:24.972584"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test1@gmail.com"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-30 22:31:24.981229"], ["current_sign_in_at", "2015-10-30 22:31:24.981229"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:24.981980"], ["id", 980190975]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 9ms (ActiveRecord: 0.8ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:24 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190975]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.4ms)
Completed 200 OK in 3ms (Views: 1.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test3@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test3"], ["email", "test3@gmail.com"], ["encrypted_password", "$2a$04$qyV1MwA8hzL73Y8VuGvIv.HiVRRl7R56oWsAWkZlk4vmVZPn2ANIu"], ["rest", "t"], ["created_at", "2015-10-30 22:31:24.997660"], ["updated_at", "2015-10-30 22:31:24.997660"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190977], ["created_at", "2015-10-30 22:31:25.000367"], ["updated_at", "2015-10-30 22:31:25.000367"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-30 15:31:25 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190975]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:25 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test2@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "test2@gmail.com"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-10-30 22:31:25.019014"], ["current_sign_in_at", "2015-10-30 22:31:25.019014"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:25.020021"], ["id", 980190976]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 10ms (ActiveRecord: 0.9ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:25 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190976]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (0.1ms)
Completed 200 OK in 3ms (Views: 0.9ms | ActiveRecord: 0.2ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-10-30 15:31:25 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"people"=>"5", "rest_id"=>"980190977"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190976]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190976]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190977]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190977]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190976]]
Redirected to http://www.example.com/waitlists
Completed 302 Found in 4ms (ActiveRecord: 0.7ms)
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1  [["cust_id", 980190976]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
WaitlistRoutesTest: test_user_unable_to_waitlist_before_sign_in
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$MVkexyUfzrKNFsR6xyyuAu49O39OFq1o0qAahG0pQwGqmbxQ9Blfa"], ["rest", "f"], ["created_at", "2015-10-30 22:31:25.044262"], ["updated_at", "2015-10-30 22:31:25.044262"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190978], ["phone_number", 0], ["created_at", "2015-10-30 22:31:25.046473"], ["updated_at", "2015-10-30 22:31:25.046473"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$oKocF3zkTXIki7rVQk45V.jwuhnFkHIC1sxaxsOFPQVvEGuUJ.PZ."], ["rest", "t"], ["created_at", "2015-10-30 22:31:25.063926"], ["updated_at", "2015-10-30 22:31:25.063926"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190979], ["created_at", "2015-10-30 22:31:25.066130"], ["updated_at", "2015-10-30 22:31:25.066130"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:25 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test1@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-30 22:31:25.074704"], ["current_sign_in_at", "2015-10-30 22:31:25.074704"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:25.075954"], ["id", 980190978]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 10ms (ActiveRecord: 0.9ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:25 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190978]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.2ms)
Completed 200 OK in 3ms (Views: 1.0ms | ActiveRecord: 0.3ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-30 15:31:25 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190978]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 0.5ms)
Started GET "/waitlists_new" for 127.0.0.1 at 2015-10-30 15:31:25 -0700
Processing by WaitlistsController#new as HTML
Redirected to http://www.example.com/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------
WaitlistRoutesTest: test_restaurant_put_multiple_waitlist_success
-----------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$i3oZd/zeoZGlbJMZ1lhyLOzKXL0DZ45wNgkYzny3xCR2yM9J5p.Ui"], ["rest", "f"], ["created_at", "2015-10-30 22:31:25.103745"], ["updated_at", "2015-10-30 22:31:25.103745"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190980], ["phone_number", 0], ["created_at", "2015-10-30 22:31:25.106095"], ["updated_at", "2015-10-30 22:31:25.106095"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$AR0RTA8SxIYSHBq.yZ/HNOXc4G/q6qR3Nw.tdzWLqZYNJhFiHYXd6"], ["rest", "t"], ["created_at", "2015-10-30 22:31:25.113388"], ["updated_at", "2015-10-30 22:31:25.113388"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190981], ["created_at", "2015-10-30 22:31:25.116153"], ["updated_at", "2015-10-30 22:31:25.116153"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:25 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test1@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-30 22:31:25.127879"], ["current_sign_in_at", "2015-10-30 22:31:25.127879"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:25.129019"], ["id", 980190980]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 10ms (ActiveRecord: 1.1ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:25 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190980]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.2ms)
Completed 200 OK in 3ms (Views: 1.2ms | ActiveRecord: 0.3ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-30 15:31:25 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190980]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 7ms (ActiveRecord: 0.9ms)
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:25 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test2@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test2@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-30 22:31:25.156200"], ["current_sign_in_at", "2015-10-30 22:31:25.156200"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:25.157276"], ["id", 980190981]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 10ms (ActiveRecord: 1.1ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:25 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190981]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (0.1ms)
Completed 200 OK in 3ms (Views: 0.9ms | ActiveRecord: 0.3ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-10-30 15:31:25 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"people"=>"5", "rest_id"=>"980190981"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190981]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190981]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190981]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190981]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 980190981], ["rest_id", 980190981], ["people", 5], ["created_at", "2015-10-30 22:31:25.174191"], ["updated_at", "2015-10-30 22:31:25.174191"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/waitlists
Completed 302 Found in 5ms (ActiveRecord: 1.1ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-10-30 15:31:25 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"people"=>"10", "rest_id"=>"980190981"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190981]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190981]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190981]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190981]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 980190981], ["rest_id", 980190981], ["people", 10], ["created_at", "2015-10-30 22:31:25.181868"], ["updated_at", "2015-10-30 22:31:25.181868"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/waitlists
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1  [["cust_id", 980190981]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------
WaitlistRoutesTest: test_customer_waitlist_multiple_rests_success
-----------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$AqQ5SdlCrCI/tBtffz5GyOZrWzHHXxcngJ.FAdK0gLl4WrY07WsSq"], ["rest", "f"], ["created_at", "2015-10-30 22:31:25.190588"], ["updated_at", "2015-10-30 22:31:25.190588"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190982], ["phone_number", 0], ["created_at", "2015-10-30 22:31:25.193189"], ["updated_at", "2015-10-30 22:31:25.193189"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$LAFiheBh646vK1b1/aOIaeqMllFZwCMpABDzQep7OOT5LucXvuo5."], ["rest", "t"], ["created_at", "2015-10-30 22:31:25.200461"], ["updated_at", "2015-10-30 22:31:25.200461"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190983], ["created_at", "2015-10-30 22:31:25.203870"], ["updated_at", "2015-10-30 22:31:25.203870"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:25 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test1@gmail.com"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-30 22:31:25.216142"], ["current_sign_in_at", "2015-10-30 22:31:25.216142"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:25.217097"], ["id", 980190982]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 10ms (ActiveRecord: 0.8ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:25 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190982]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.2ms)
Completed 200 OK in 3ms (Views: 1.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test3@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test3"], ["email", "test3@gmail.com"], ["encrypted_password", "$2a$04$1BJUrg84gKROe5vJZ1ZvT.Vq5m1WW0MBAJ9OhE8gAlEH6KVk0AWfS"], ["rest", "t"], ["created_at", "2015-10-30 22:31:25.232530"], ["updated_at", "2015-10-30 22:31:25.232530"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190984], ["created_at", "2015-10-30 22:31:25.234719"], ["updated_at", "2015-10-30 22:31:25.234719"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/waitlists" for 127.0.0.1 at 2015-10-30 15:31:25 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"cust_id"=>"980190982", "people"=>"5", "rest_id"=>"980190983"}}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190982]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190982]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190983]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190983]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190982]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 980190982], ["rest_id", 980190983]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 980190982], ["rest_id", 980190983], ["people", 5], ["created_at", "2015-10-30 22:31:25.244866"], ["updated_at", "2015-10-30 22:31:25.244866"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/waitlists
Completed 302 Found in 9ms (ActiveRecord: 1.7ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-10-30 15:31:25 -0700
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"cust_id"=>"980190982", "people"=>"5", "rest_id"=>"980190984"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190982]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190982]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190984]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190984]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190982]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 980190982], ["rest_id", 980190984]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 980190982], ["rest_id", 980190984], ["people", 5], ["created_at", "2015-10-30 22:31:25.256574"], ["updated_at", "2015-10-30 22:31:25.256574"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/waitlists
Completed 302 Found in 8ms (ActiveRecord: 1.5ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1[0m  [["cust_id", 980190982]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------------
RestaurantsControllerTest: test_should_create_restaurant
--------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:25.277535"], ["updated_at", "2015-10-30 22:31:25.277535"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$qxkTstVbFptJr94pLrPFW.Ea6MyOKbRvJy6M4DMI7xrbDFbtsPGBK"], ["created_at", "2015-10-30 22:31:25.285639"], ["updated_at", "2015-10-30 22:31:25.285639"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
Processing by RestaurantsController#create as HTML
  Parameters: {"restaurant"=>{"user_id"=>"10", "address"=>"MLK", "hours"=>"24hr"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "restaurants" ("address", "hours", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["address", "MLK"], ["hours", "24hr"], ["user_id", 10], ["created_at", "2015-10-30 22:31:25.299717"], ["updated_at", "2015-10-30 22:31:25.299717"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/restaurants/518579372
Completed 302 Found in 6ms (ActiveRecord: 0.7ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------
RestaurantsControllerTest: test_should_destroy_restaurant
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:25.307735"], ["updated_at", "2015-10-30 22:31:25.307735"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$ucBXK14b0No0p3R20D2cd.6yCQXessG9ME7EHmllk1yJeMTgjDTYq"], ["created_at", "2015-10-30 22:31:25.316134"], ["updated_at", "2015-10-30 22:31:25.316134"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
Processing by RestaurantsController#destroy as HTML
  Parameters: {"id"=>"518579373"}
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 518579373]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "restaurants" WHERE "restaurants"."id" = $1  [["id", 518579373]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/restaurants
Completed 302 Found in 3ms (ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------
RestaurantsControllerTest: test_should_show_restaurant
------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:25.327165"], ["updated_at", "2015-10-30 22:31:25.327165"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$7o8wWJdlWnHzIuSlaYeHM.6WcpsSUD4Xzmw7AfhvICxugo7HaZVPO"], ["created_at", "2015-10-30 22:31:25.332483"], ["updated_at", "2015-10-30 22:31:25.332483"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"518579374"}
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 518579374]]
  Rendered restaurants/show.html.erb within layouts/application (0.9ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------
RestaurantsControllerTest: test_should_get_edit
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:25.344443"], ["updated_at", "2015-10-30 22:31:25.344443"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$LFOtbQ9IQkcCosopA4GQquCCSmmj1Pj3VDOIezDJXSr15DFz6Qmqi"], ["created_at", "2015-10-30 22:31:25.350760"], ["updated_at", "2015-10-30 22:31:25.350760"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"518579375"}
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 518579375]]
  Rendered restaurants/_form.html.erb (5.6ms)
  Rendered restaurants/edit.html.erb within layouts/application (12.5ms)
Completed 200 OK in 16ms (Views: 14.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RestaurantsControllerTest: test_should_update_restaurant
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:25.371868"], ["updated_at", "2015-10-30 22:31:25.371868"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$g8Pzj4kfBPqTiu3YGSAMAu1V2uGJH10R4rC2qk8O7Qr28ON4ALMO6"], ["created_at", "2015-10-30 22:31:25.379482"], ["updated_at", "2015-10-30 22:31:25.379482"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestaurantsController#update as HTML
  Parameters: {"restaurant"=>{"user_id"=>"5", "address"=>"MLK1", "hours"=>"25hr"}, "id"=>"518579376"}
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 518579376]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "restaurants" SET "address" = $1, "hours" = $2, "user_id" = $3, "updated_at" = $4 WHERE "restaurants"."id" = $5  [["address", "MLK1"], ["hours", "25hr"], ["user_id", 5], ["updated_at", "2015-10-30 22:31:25.385599"], ["id", 518579376]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/restaurants/518579376
Completed 302 Found in 5ms (ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:25.390634"], ["updated_at", "2015-10-30 22:31:25.390634"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$huhw7URsXiibfcHBEOXA.ulkc4Clncjt/PtHMFl13ZuZ1EJionEsC"], ["created_at", "2015-10-30 22:31:25.395476"], ["updated_at", "2015-10-30 22:31:25.395476"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT "restaurants".* FROM "restaurants"[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered restaurants/index.html.erb within layouts/application (6.8ms)
Completed 200 OK in 10ms (Views: 7.8ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------
RestaurantTest: test_hours
--------------------------
  [1m[35mRestaurant Load (0.5ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 518579358]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:25.412102"], ["updated_at", "2015-10-30 22:31:25.412102"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 518579378]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "restaurants" SET "user_id" = $1, "updated_at" = $2 WHERE "restaurants"."id" = $3  [["user_id", 9], ["updated_at", "2015-10-30 22:31:25.414871"], ["id", 518579378]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "restaurants" WHERE "restaurants"."id" = $1[0m  [["id", 518579378]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------
RestaurantTest: test_address
----------------------------
  [1m[36mRestaurant Load (0.1ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 518579358]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:25.419401"], ["updated_at", "2015-10-30 22:31:25.419401"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRestaurant Load (0.1ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 518579379]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "restaurants" SET "user_id" = $1, "updated_at" = $2 WHERE "restaurants"."id" = $3[0m  [["user_id", 1893], ["updated_at", "2015-10-30 22:31:25.421566"], ["id", 518579379]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "restaurants" WHERE "restaurants"."id" = $1  [["id", 518579379]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------
RestaurantTest: test_user_id
----------------------------
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 518579358]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:25.427000"], ["updated_at", "2015-10-30 22:31:25.427000"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 518579380]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "restaurants" WHERE "restaurants"."id" = $1  [["id", 518579380]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------
RestaurantTest: test_count
--------------------------
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 518579358]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:25.435507"], ["updated_at", "2015-10-30 22:31:25.435507"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "restaurants" WHERE "restaurants"."id" = $1  [["id", 518579381]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------
CustomersControllerTest: test_should_get_edit_customer
------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:25.445667"], ["updated_at", "2015-10-30 22:31:25.445667"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$ENFNSkTYu9P8epfU.uMotu/1PZNo4zlQU0rfVgCMBjn0op8Umu.wm"], ["created_at", "2015-10-30 22:31:25.451393"], ["updated_at", "2015-10-30 22:31:25.451393"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Processing by CustomersController#edit as HTML
  Parameters: {"id"=>"980190973"}
  [1m[35mCustomer Load (0.3ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT 1  [["id", 980190973]]
  Rendered customers/_form.html.erb (3.7ms)
  Rendered customers/edit.html.erb within layouts/application (17.1ms)
Completed 200 OK in 23ms (Views: 21.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CustomersControllerTest: test_should_show_customer
--------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:25.485701"], ["updated_at", "2015-10-30 22:31:25.485701"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$ZaLs1EP6HwW/0AN93mxrrOULDoQtZmRFjoGAbvqL2MrHnd0VJyRXC"], ["created_at", "2015-10-30 22:31:25.491738"], ["updated_at", "2015-10-30 22:31:25.491738"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CustomersController#show as HTML
  Parameters: {"id"=>"980190974"}
  [1m[36mCustomer Load (0.3ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT 1[0m  [["id", 980190974]]
  Rendered customers/show.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------------
CustomersControllerTest: test_should_update_customer
----------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:25.502109"], ["updated_at", "2015-10-30 22:31:25.502109"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$KljMycgz.HjTgsLgUTNHh.Z2/uRLoWhvViarMf.hGQRzxodeVRfVS"], ["created_at", "2015-10-30 22:31:25.507174"], ["updated_at", "2015-10-30 22:31:25.507174"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Processing by CustomersController#update as HTML
  Parameters: {"customer"=>{"user_id"=>"10", "phone_number"=>"0"}, "id"=>"980190975"}
  [1m[35mCustomer Load (0.4ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT 1  [["id", 980190975]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "customers" SET "user_id" = $1, "updated_at" = $2 WHERE "customers"."id" = $3  [["user_id", 10], ["updated_at", "2015-10-30 22:31:25.513688"], ["id", 980190975]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/customers/980190975
Completed 302 Found in 5ms (ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------
CustomersControllerTest: test_should_destroy_customer
-----------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:25.520153"], ["updated_at", "2015-10-30 22:31:25.520153"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$hFjIh3TpYhW7GFybJZbJgOSuoaSpTVkBCdAq0qfls6tx4LO8Gi8wC"], ["created_at", "2015-10-30 22:31:25.525703"], ["updated_at", "2015-10-30 22:31:25.525703"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "customers"
Processing by CustomersController#destroy as HTML
  Parameters: {"id"=>"980190976"}
  [1m[36mCustomer Load (0.6ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT 1[0m  [["id", 980190976]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "customers" WHERE "customers"."id" = $1[0m  [["id", 980190976]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/customers
Completed 302 Found in 4ms (ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------------
CustomersControllerTest: test_should_create_customer
----------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:25.538524"], ["updated_at", "2015-10-30 22:31:25.538524"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$ZEgt5AzMaKDCDpdE8aVYV.z9q48JvLz/MQNhLiEs0supkJkN9b8fa"], ["created_at", "2015-10-30 22:31:25.543462"], ["updated_at", "2015-10-30 22:31:25.543462"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Processing by CustomersController#create as HTML
  Parameters: {"customer"=>{"user_id"=>"10", "phone_number"=>"0"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("phone_number", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["phone_number", 0], ["user_id", 10], ["created_at", "2015-10-30 22:31:25.548226"], ["updated_at", "2015-10-30 22:31:25.548226"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/customers/980190978
Completed 302 Found in 3ms (ActiveRecord: 0.5ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------
CustomerTest: test_correct_customer
-----------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:25.554824"], ["updated_at", "2015-10-30 22:31:25.554824"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$JRr9Y.Smb3GvWkPnwinptOU4fw3doKkTBVUkHBxycv4tjcHJLGT8i"], ["created_at", "2015-10-30 22:31:25.560268"], ["updated_at", "2015-10-30 22:31:25.560268"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 3], ["phone_number", 0], ["created_at", "2015-10-30 22:31:25.563204"], ["updated_at", "2015-10-30 22:31:25.563204"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------
UserTest: test_Password_don't_match
-----------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------
UserTest: test_No_Password
--------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------
UserTest: test_duplicate_name
-----------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "Example User"], ["email", "user@example.com"], ["encrypted_password", "$2a$04$w89LkHirQ6jpsPJBvLQyi.8sBW7atv1i0o4IffLPi5AZqUJvEOYde"], ["rest", "f"], ["created_at", "2015-10-30 22:31:25.590130"], ["updated_at", "2015-10-30 22:31:25.590130"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user1@example.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "Example User"], ["email", "user1@example.com"], ["encrypted_password", "$2a$04$Fa1t.iFdjWvQNIcygHhwAOn9zWzaM8pqDi4OOjsrFee5AUdaGzbLW"], ["rest", "f"], ["created_at", "2015-10-30 22:31:25.593316"], ["updated_at", "2015-10-30 22:31:25.593316"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------
UserTest: test_password_<_8
---------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------
UserTest: test_duplicate_email
------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Example User"], ["email", "user@example.com"], ["encrypted_password", "$2a$04$Dk/AwTrmfg2Blwx0n7Bio.wNHkTIA2ecZrKJrOIlXCoqqCFdHKCym"], ["rest", "f"], ["created_at", "2015-10-30 22:31:25.608002"], ["updated_at", "2015-10-30 22:31:25.608002"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
UserTest: test_duplicate_different_case_email
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "Example User"], ["email", "user@example.com"], ["encrypted_password", "$2a$04$XKQS1yo2bhU/SkJzrR5cFOZ2J5icPnZag5PfmrY1EqMPG/TIHVbxG"], ["rest", "f"], ["created_at", "2015-10-30 22:31:25.622105"], ["updated_at", "2015-10-30 22:31:25.622105"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
----------------------------
UserTest: test_Correct_login
----------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Example User"], ["email", "user@example.com"], ["encrypted_password", "$2a$04$ZDJbTa3X.4.Rn64uUATRdufqVnhf0wX8pfR1JT0JvvWBKBGogRMhC"], ["rest", "f"], ["created_at", "2015-10-30 22:31:25.633806"], ["updated_at", "2015-10-30 22:31:25.633806"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------
UserTest: test_duplicate_password
---------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Example User"], ["email", "user@example.com"], ["encrypted_password", "$2a$04$Qgpc2qCuYBM6Xx5FPKD5MOtLO/2Sb7CdTygTj.UEU1gQGQHkJolWe"], ["rest", "f"], ["created_at", "2015-10-30 22:31:25.642211"], ["updated_at", "2015-10-30 22:31:25.642211"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user2@example.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Example User2"], ["email", "user2@example.com"], ["encrypted_password", "$2a$04$haLeXzAz8g4IWsy/YpuskuOTpd/TqhEebNKI3htE9.Xyodx/yw8yu"], ["rest", "f"], ["created_at", "2015-10-30 22:31:25.646423"], ["updated_at", "2015-10-30 22:31:25.646423"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------
UserTest: test_No_Email
-----------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------
UserTest: test_Email_regex_bad
------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'userexamplecom' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@examplecom' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------
UserTest: test_No_Rest
----------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------
UserTest: test_No_Name
----------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", ""], ["email", "user@example.com"], ["encrypted_password", "$2a$04$Fr94bJVe1OxSBbIN7qDaru1LOWGPpZid1mg.g.Uxn.f68Ox80XVJ2"], ["rest", "f"], ["created_at", "2015-10-30 22:31:25.680651"], ["updated_at", "2015-10-30 22:31:25.680651"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
WaitlistTest: test_position_if_deleted_1st_place
------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:25.686849"], ["updated_at", "2015-10-30 22:31:25.686849"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$W.rEO3v/.NM7NuD3fIsDfO8mlXfAnmPouPoQZmWUsHWvcC/qMz.g2"], ["created_at", "2015-10-30 22:31:25.691791"], ["updated_at", "2015-10-30 22:31:25.691791"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:25.693863"], ["updated_at", "2015-10-30 22:31:25.693863"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$bwrc7j73uy1j/eK4N0UgD.sLjRw.CX/L21Wmm3dfbvKrc6juajWWC"], ["created_at", "2015-10-30 22:31:25.698516"], ["updated_at", "2015-10-30 22:31:25.698516"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:25.700874"], ["updated_at", "2015-10-30 22:31:25.700874"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$ZBWZAu2Gjjg75Gm52z0E4.P9vS5OuwzFr8IDvTsnrCv3WCG8XgcKW"], ["created_at", "2015-10-30 22:31:25.706147"], ["updated_at", "2015-10-30 22:31:25.706147"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-30 22:31:25.708387"], ["updated_at", "2015-10-30 22:31:25.708387"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$Ds9ZFOjnHG2Cex3DNviJJetEXnUQnXaUy2PRGXNg1N1WPA640joPC"], ["created_at", "2015-10-30 22:31:25.714545"], ["updated_at", "2015-10-30 22:31:25.714545"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 2], ["rest_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-30 22:31:25.720631"], ["updated_at", "2015-10-30 22:31:25.720631"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 4], ["rest_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 4], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-30 22:31:25.725140"], ["updated_at", "2015-10-30 22:31:25.725140"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mWaitlist Load (0.6ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 2]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:25.720631')[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.5ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 4]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:25.725140')[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."id" = $1 LIMIT 1[0m  [["id", 980190972]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "waitlists" WHERE "waitlists"."id" = $1[0m  [["id", 980190972]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 2]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 4]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:25.725140')[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["rest_id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
WaitlistTest: test_delete_position_in_2_restaurants
---------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:25.743554"], ["updated_at", "2015-10-30 22:31:25.743554"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$0Xvrp9jTtRW8/0dMv1lpOe6QGRhT/MvrbEKCwT7Nvdk.xeTbExYBK"], ["created_at", "2015-10-30 22:31:25.749057"], ["updated_at", "2015-10-30 22:31:25.749057"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:25.751099"], ["updated_at", "2015-10-30 22:31:25.751099"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$zR8/7x55A6IrOuJrkna6IORcH/LyXVgeptqS2XE1MPjkvBxHOCBAK"], ["created_at", "2015-10-30 22:31:25.755642"], ["updated_at", "2015-10-30 22:31:25.755642"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:25.757569"], ["updated_at", "2015-10-30 22:31:25.757569"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$YvlskJ.vJS1G67cIP4jQeug799LDTbEDiPsDpXy2C3QfXcAAIVL4G"], ["created_at", "2015-10-30 22:31:25.762300"], ["updated_at", "2015-10-30 22:31:25.762300"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-30 22:31:25.765276"], ["updated_at", "2015-10-30 22:31:25.765276"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$sktSzwC4Gl.pC8CziFlWo.A2TgPcfHwzqJuoft9s2YcWkP.Vvs59m"], ["created_at", "2015-10-30 22:31:25.770790"], ["updated_at", "2015-10-30 22:31:25.770790"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 2], ["rest_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-30 22:31:25.775926"], ["updated_at", "2015-10-30 22:31:25.775926"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 4], ["rest_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 4], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-30 22:31:25.782229"], ["updated_at", "2015-10-30 22:31:25.782229"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36m (1.9ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 4], ["rest_id", 3]]
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 4], ["rest_id", 3], ["people", 3], ["created_at", "2015-10-30 22:31:25.791097"], ["updated_at", "2015-10-30 22:31:25.791097"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 2], ["rest_id", 3]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 2], ["rest_id", 3], ["people", 3], ["created_at", "2015-10-30 22:31:25.798292"], ["updated_at", "2015-10-30 22:31:25.798292"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mWaitlist Load (0.3ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 2]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:25.775926')  [["rest_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:25.798292')[0m  [["rest_id", 3]]
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 4]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:25.782229')[0m  [["rest_id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:25.791097')  [["rest_id", 3]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["rest_id", 3]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."id" = $1 LIMIT 1[0m  [["id", 980190974]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "waitlists" WHERE "waitlists"."id" = $1[0m  [["id", 980190974]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mWaitlist Load (0.1ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 2]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:25.798292')  [["rest_id", 3]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 4]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:25.782229')  [["rest_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:25.791097')[0m  [["rest_id", 3]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["rest_id", 3]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."id" = $1 LIMIT 1  [["id", 980190976]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "waitlists" WHERE "waitlists"."id" = $1  [["id", 980190976]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mWaitlist Load (0.1ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 2]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:25.798292')[0m  [["rest_id", 3]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 4]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:25.782229')[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["rest_id", 3]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------
WaitlistTest: test_position_simple
----------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:25.822336"], ["updated_at", "2015-10-30 22:31:25.822336"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$rW.E9vTeCkQJG56lNR2lV.EOM1XcRgYUHjBbVuSgi48dWPTnmhYVy"], ["created_at", "2015-10-30 22:31:25.828170"], ["updated_at", "2015-10-30 22:31:25.828170"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:25.830456"], ["updated_at", "2015-10-30 22:31:25.830456"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$28zpqBMZsJOc1089uuMrRu80CG1jMz0nBL9yiMv5F963FK7J9BwoS"], ["created_at", "2015-10-30 22:31:25.835085"], ["updated_at", "2015-10-30 22:31:25.835085"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:25.837127"], ["updated_at", "2015-10-30 22:31:25.837127"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$0vnRNFauFZABBFlx/va8Qe.rljNm1z959d7tzm.yV31gZcnWNdl9K"], ["created_at", "2015-10-30 22:31:25.841620"], ["updated_at", "2015-10-30 22:31:25.841620"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-30 22:31:25.843597"], ["updated_at", "2015-10-30 22:31:25.843597"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$YR4N8gKSt45rDizJybDeWeGmh5JqA6bIH1mE4QHEURhI2MurU62t."], ["created_at", "2015-10-30 22:31:25.848012"], ["updated_at", "2015-10-30 22:31:25.848012"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 2], ["rest_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-30 22:31:25.852686"], ["updated_at", "2015-10-30 22:31:25.852686"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 4], ["rest_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 4], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-30 22:31:25.858235"], ["updated_at", "2015-10-30 22:31:25.858235"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 2]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:25.852686')[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 4]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:25.858235')[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["rest_id", 1]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------------
WaitlistTest: test_cust_id_==_rest_id_able_to_waitlist_more_than_once
---------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:25.867821"], ["updated_at", "2015-10-30 22:31:25.867821"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$DabBMm8MaYPwnzQzX/.vc.wtrDEO3BoY7qU19jJTxubWgDJFe54M."], ["created_at", "2015-10-30 22:31:25.872691"], ["updated_at", "2015-10-30 22:31:25.872691"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:25.874590"], ["updated_at", "2015-10-30 22:31:25.874590"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$5O5DsH75WzKMQDWS4SFMTOFTTS0BT7QgtDJ5qrtlriwzRAM1RgvW6"], ["created_at", "2015-10-30 22:31:25.880176"], ["updated_at", "2015-10-30 22:31:25.880176"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:25.884059"], ["updated_at", "2015-10-30 22:31:25.884059"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$PcgMvLi.gxCcOCqMQ4UmZOyFPN4vVgM0DBV.nqTA8u2ksIoiqHpqS"], ["created_at", "2015-10-30 22:31:25.889931"], ["updated_at", "2015-10-30 22:31:25.889931"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-30 22:31:25.891987"], ["updated_at", "2015-10-30 22:31:25.891987"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$YoizF8CSaO6yV4nrzQ88EOXb17eSaYEKKfpQAMYilpZsyqhADMWIO"], ["created_at", "2015-10-30 22:31:25.897907"], ["updated_at", "2015-10-30 22:31:25.897907"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists"[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 1], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-30 22:31:25.902840"], ["updated_at", "2015-10-30 22:31:25.902840"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists"[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 1], ["rest_id", 1], ["people", 4], ["created_at", "2015-10-30 22:31:25.908105"], ["updated_at", "2015-10-30 22:31:25.908105"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "waitlists"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
WaitlistTest: test_Correct_Waitlist_parameter
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:25.914157"], ["updated_at", "2015-10-30 22:31:25.914157"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$FkTm3Ccnb66q.68wDr9.1.xZvRnFp8wDk59qYhTZv5u0qyFeKcEo6"], ["created_at", "2015-10-30 22:31:25.922580"], ["updated_at", "2015-10-30 22:31:25.922580"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:25.924995"], ["updated_at", "2015-10-30 22:31:25.924995"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$yrcBxvDcyWIn.YsRjc32DueHtGEx6bbcK9x93H1dv.Odap9VfIbJy"], ["created_at", "2015-10-30 22:31:25.931769"], ["updated_at", "2015-10-30 22:31:25.931769"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:25.945908"], ["updated_at", "2015-10-30 22:31:25.945908"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$Bdvixm/MPWvUj9m.hVa53e3tNtNK7Fvj.SVqCGYGc0wm5dsBqGKqC"], ["created_at", "2015-10-30 22:31:25.951427"], ["updated_at", "2015-10-30 22:31:25.951427"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-30 22:31:25.953648"], ["updated_at", "2015-10-30 22:31:25.953648"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$jo9BfPFAmAzjB48VhhLq9exD79QvFcYPv8dc6igzNNvzKCvGyHAyK"], ["created_at", "2015-10-30 22:31:25.958404"], ["updated_at", "2015-10-30 22:31:25.958404"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-30 22:31:25.960549"], ["updated_at", "2015-10-30 22:31:25.960549"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WaitlistTest: test_position_in_2_restaurants
--------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:25.964371"], ["updated_at", "2015-10-30 22:31:25.964371"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$ttnbazuyvbxRl7/m4D3q6ejelICQGPxMEK.Kw5G3C3E6kpZmoTrL2"], ["created_at", "2015-10-30 22:31:25.969404"], ["updated_at", "2015-10-30 22:31:25.969404"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:25.971596"], ["updated_at", "2015-10-30 22:31:25.971596"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$XPuiu5Sw5kbHY8ydNb/t9OYp2CewlKAvGQDouK3qpavL5eIh10G0O"], ["created_at", "2015-10-30 22:31:25.976197"], ["updated_at", "2015-10-30 22:31:25.976197"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:25.978149"], ["updated_at", "2015-10-30 22:31:25.978149"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$pqdfoQs8rEaas80O.At1oeP/N0fIoN8AT6IyqZgSS2CzF0xnPksNa"], ["created_at", "2015-10-30 22:31:25.982624"], ["updated_at", "2015-10-30 22:31:25.982624"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-30 22:31:25.984741"], ["updated_at", "2015-10-30 22:31:25.984741"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$QT0jaZZCv2PBPECxSoTPJeS0pzAUSwTzED1vIiqfAcmNkXheff1Sq"], ["created_at", "2015-10-30 22:31:25.989750"], ["updated_at", "2015-10-30 22:31:25.989750"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 2], ["rest_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-30 22:31:25.995260"], ["updated_at", "2015-10-30 22:31:25.995260"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 4], ["rest_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 4], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-30 22:31:26.000666"], ["updated_at", "2015-10-30 22:31:26.000666"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 4], ["rest_id", 3]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 4], ["rest_id", 3], ["people", 3], ["created_at", "2015-10-30 22:31:26.005825"], ["updated_at", "2015-10-30 22:31:26.005825"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 2], ["rest_id", 3]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 2], ["rest_id", 3], ["people", 3], ["created_at", "2015-10-30 22:31:26.010406"], ["updated_at", "2015-10-30 22:31:26.010406"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 2]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:25.995260')[0m  [["rest_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:26.010406')  [["rest_id", 3]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 4]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:26.000666')  [["rest_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:26.005825')[0m  [["rest_id", 3]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["rest_id", 3]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
WaitlistTest: test_position_if_deleted_2nd_place
------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:26.024996"], ["updated_at", "2015-10-30 22:31:26.024996"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$QEZxtSRmQ2AjhrZwcn7/wOZDdV5D7uo.vaRohpYyYW1zn3PLJUy2K"], ["created_at", "2015-10-30 22:31:26.031261"], ["updated_at", "2015-10-30 22:31:26.031261"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:26.033775"], ["updated_at", "2015-10-30 22:31:26.033775"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$SjLFgQ9QpGeWYkzy6c45a.Yck.5FCaih89Ji9opB4cSgcUOhAC0sS"], ["created_at", "2015-10-30 22:31:26.038967"], ["updated_at", "2015-10-30 22:31:26.038967"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:26.040974"], ["updated_at", "2015-10-30 22:31:26.040974"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$dgTPTu5KMbThnmI2WXNt1u4abnHNk25zTmzVneYsxlXjtzXD4wdKa"], ["created_at", "2015-10-30 22:31:26.047941"], ["updated_at", "2015-10-30 22:31:26.047941"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-30 22:31:26.051425"], ["updated_at", "2015-10-30 22:31:26.051425"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$ho2wl4zNJjTyc9MF3ZltzurK7RujxZNnzYS75KuVv4fMbnesQshzm"], ["created_at", "2015-10-30 22:31:26.057361"], ["updated_at", "2015-10-30 22:31:26.057361"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 2], ["rest_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-30 22:31:26.063650"], ["updated_at", "2015-10-30 22:31:26.063650"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 4], ["rest_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 4], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-30 22:31:26.069054"], ["updated_at", "2015-10-30 22:31:26.069054"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 2]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:26.063650')[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 4]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:26.069054')[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.3ms)[0m  [1mSELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."id" = $1 LIMIT 1[0m  [["id", 980190988]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "waitlists" WHERE "waitlists"."id" = $1[0m  [["id", 980190988]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mWaitlist Load (0.3ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 2]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-10-30 22:31:26.063650')  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.3ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 4]]
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["rest_id", 1]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------
WaitlistTest: test_unique_customer_to_restaurant_waitlist
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:26.086434"], ["updated_at", "2015-10-30 22:31:26.086434"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$eg5LuFpf6SMOWD0.GkwKKeTiuQqjTUrTlShgKhAndzyTJ5HR7JPZy"], ["created_at", "2015-10-30 22:31:26.091522"], ["updated_at", "2015-10-30 22:31:26.091522"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:26.094313"], ["updated_at", "2015-10-30 22:31:26.094313"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$gSGUJ4fyeiy6GG5HfstjmO/4BOBpndl4PtodhJDpgVIeoB0Xci4e."], ["created_at", "2015-10-30 22:31:26.099193"], ["updated_at", "2015-10-30 22:31:26.099193"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:26.101177"], ["updated_at", "2015-10-30 22:31:26.101177"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$SehV4LHmiuHmR6F2f/Qh5u.v2i4wVvJuKOfLxemy/026qdQJFJ/8q"], ["created_at", "2015-10-30 22:31:26.108477"], ["updated_at", "2015-10-30 22:31:26.108477"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-30 22:31:26.112621"], ["updated_at", "2015-10-30 22:31:26.112621"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$DNneuMQ2Gl/OYTx14dF8ZO27dUt347sNtGV.So8i.kTXtZ5F/nFRS"], ["created_at", "2015-10-30 22:31:26.120199"], ["updated_at", "2015-10-30 22:31:26.120199"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 2], ["rest_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-10-30 22:31:26.127770"], ["updated_at", "2015-10-30 22:31:26.127770"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 2], ["rest_id", 1]]
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------
WaitlistTest: test_no_people
----------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:26.138549"], ["updated_at", "2015-10-30 22:31:26.138549"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$pvWtuCoLGNCrdzwdBJrn6OdX2PFz506u.XY7CH1xKZusZl3VyfPUi"], ["created_at", "2015-10-30 22:31:26.144430"], ["updated_at", "2015-10-30 22:31:26.144430"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:26.147269"], ["updated_at", "2015-10-30 22:31:26.147269"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$YYREtL21uqIOgmdANkcQrOcsPvMnji0Y1.1OM4TBpWY79oyGfh3RK"], ["created_at", "2015-10-30 22:31:26.152016"], ["updated_at", "2015-10-30 22:31:26.152016"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:26.153998"], ["updated_at", "2015-10-30 22:31:26.153998"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$SVEKAYLCEAJNUntbv3E9WeqGlUMYQrJysUilN3UTJpcphG09S9KFO"], ["created_at", "2015-10-30 22:31:26.159119"], ["updated_at", "2015-10-30 22:31:26.159119"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-30 22:31:26.161197"], ["updated_at", "2015-10-30 22:31:26.161197"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$6SvzKB7EoLHjv8Omto5B0u1XRBqGJBEKZ3ZKj.zrrr2EoQt4hgPni"], ["created_at", "2015-10-30 22:31:26.166081"], ["updated_at", "2015-10-30 22:31:26.166081"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
----------------------------------------
WaitlistTest: test_id_cust_id_is_invalid
----------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:26.172595"], ["updated_at", "2015-10-30 22:31:26.172595"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$xLwzRE5u1w7/QfYclEHgeu0HTZH6qsnAe358uqvsA8ZZKGkt2zq1q"], ["created_at", "2015-10-30 22:31:26.180271"], ["updated_at", "2015-10-30 22:31:26.180271"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:26.183253"], ["updated_at", "2015-10-30 22:31:26.183253"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$OAly3z4M2SsAsJ0MS7lUTOVYDxKqaqPTH/it9eTi4xt8ooqkE6tmm"], ["created_at", "2015-10-30 22:31:26.188595"], ["updated_at", "2015-10-30 22:31:26.188595"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:26.190668"], ["updated_at", "2015-10-30 22:31:26.190668"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$jsHGUtZcLJSUTKUhB0SI8.qR2oYrZWYY3afh19Zwt85Sl8UUtsjDu"], ["created_at", "2015-10-30 22:31:26.197204"], ["updated_at", "2015-10-30 22:31:26.197204"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-30 22:31:26.201099"], ["updated_at", "2015-10-30 22:31:26.201099"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$6AgH2.FbctQCRhRa5lRKJ.esj.wxCzeqKDsevwAToEbXuIs.9Pn6m"], ["created_at", "2015-10-30 22:31:26.206446"], ["updated_at", "2015-10-30 22:31:26.206446"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 2], ["rest_id", 1]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------
WaitlistTest: test_id_rest_id_is_invalid
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 1], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:26.213839"], ["updated_at", "2015-10-30 22:31:26.213839"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$8.wjwoZqWgUfFhwxDU0Oout/xu4X4TOh7FRT7BVMdN2ArjRV5Z7HW"], ["created_at", "2015-10-30 22:31:26.218814"], ["updated_at", "2015-10-30 22:31:26.218814"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:26.220841"], ["updated_at", "2015-10-30 22:31:26.220841"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$AgoS2CHnqsSSlY3/KOEBCODKtJ/kCCHmqKy067Y.b0L1y8zz9d6wi"], ["created_at", "2015-10-30 22:31:26.225315"], ["updated_at", "2015-10-30 22:31:26.225315"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:26.227330"], ["updated_at", "2015-10-30 22:31:26.227330"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$eZJgavgu/Q91gyPDwlleSeTu9UyWfD.A9cFPDhAJF3gzSPD456bvq"], ["created_at", "2015-10-30 22:31:26.233673"], ["updated_at", "2015-10-30 22:31:26.233673"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-10-30 22:31:26.235888"], ["updated_at", "2015-10-30 22:31:26.235888"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$KhUo5kOz0Wtn/egmz9h/8OIuCr8S/T73OGkwOsCuNWTwf0.avenL6"], ["created_at", "2015-10-30 22:31:26.242011"], ["updated_at", "2015-10-30 22:31:26.242011"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------
RestaurantIntegrationTest: test_login_waitlist_restaurant_not_yet_sign_in
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 3], ["address", "1892 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:26.253533"], ["updated_at", "2015-10-30 22:31:26.253533"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "FendyOnel"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$6kHaDG./3te8xCVaXRG2kuKpO4.3M4EDP5b6s1.kl0utRO.zq1tz."], ["created_at", "2015-10-30 22:31:26.258372"], ["updated_at", "2015-10-30 22:31:26.258372"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/restaurants" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by RestaurantsController#index as HTML
  [1m[35mRestaurant Load (0.7ms)[0m  SELECT "restaurants".* FROM "restaurants"
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  Rendered restaurants/index.html.erb within layouts/application (6.8ms)
Completed 200 OK in 9ms (Views: 6.9ms | ActiveRecord: 1.3ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Devise::SessionsController#destroy as HTML
Redirected to https://www.example.com/
Filter chain halted as :verify_signed_out_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/waitlists" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by WaitlistsController#index as HTML
Redirected to https://www.example.com/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::SessionsController#new as HTML
  Rendered users/sessions/new.html.erb within layouts/application (12.1ms)
Completed 200 OK in 24ms (Views: 18.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------------------
RestaurantIntegrationTest: test_create_new_restaurant
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 3], ["address", "1892 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:26.308108"], ["updated_at", "2015-10-30 22:31:26.308108"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "FendyOnel"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$YJNyRpmHLJCefdfJsH0wDer0YgrYkpT0sWqtaNwSPYiP1VLgsWylC"], ["created_at", "2015-10-30 22:31:26.315715"], ["updated_at", "2015-10-30 22:31:26.315715"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/restaurants" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT "restaurants".* FROM "restaurants"[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  Rendered restaurants/index.html.erb within layouts/application (3.8ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.8ms)
Started POST "/create-restaurant" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"FendyBilly@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendybilly@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "name", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "fendybilly@gmail.com"], ["encrypted_password", "$2a$04$1x4QgFZ5VyozuAr37MG7WedVxLx3kBOx5Pmxe.NQUPONw5MvQGTYi"], ["name", "FendyBilly"], ["rest", "t"], ["created_at", "2015-10-30 22:31:26.348555"], ["updated_at", "2015-10-30 22:31:26.348555"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-10-30 22:31:26.351392"], ["current_sign_in_at", "2015-10-30 22:31:26.351392"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:26.352240"], ["id", 980190993]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to https://www.example.com/
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190993], ["created_at", "2015-10-30 22:31:26.360076"], ["updated_at", "2015-10-30 22:31:26.360076"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 302 Found in 18ms (ActiveRecord: 2.5ms)
Started GET "/" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by DynamicPagesController#home as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190993]]
Redirected to https://www.example.com/profile
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190993]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (0.1ms)
Completed 200 OK in 3ms (Views: 1.1ms | ActiveRecord: 0.3ms)
Started POST "/users/sign_in" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Devise::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"FendyBilly@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190993]]
Redirected to https://www.example.com/
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
Started GET "/" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by DynamicPagesController#home as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190993]]
Redirected to https://www.example.com/profile
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190993]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (0.1ms)
Completed 200 OK in 3ms (Views: 0.9ms | ActiveRecord: 0.3ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190993]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to https://www.example.com/
Completed 302 Found in 5ms (ActiveRecord: 0.6ms)
Started DELETE "/destroy-user" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::RegistrationsController#destroy as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------------------------
RestaurantIntegrationTest: test_count_how_many_restaurants
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["user_id", 3], ["address", "1892 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:26.414537"], ["updated_at", "2015-10-30 22:31:26.414537"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "FendyOnel"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$eeHkbP8z72jy07mvsTMuQ.TrhRLA8QCyTadvREjwv5J9QwAhYDxky"], ["created_at", "2015-10-30 22:31:26.419584"], ["updated_at", "2015-10-30 22:31:26.419584"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
Started POST "/create-restaurant" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"Billy1", "email"=>"Billy1@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'billy1@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "name", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "billy1@gmail.com"], ["encrypted_password", "$2a$04$iVk5vmnsBueP7D/3NtYGcOWalpBEDxurs92XJjyyqwJumB3ZbFjNO"], ["name", "Billy1"], ["rest", "t"], ["created_at", "2015-10-30 22:31:26.427453"], ["updated_at", "2015-10-30 22:31:26.427453"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-10-30 22:31:26.429409"], ["current_sign_in_at", "2015-10-30 22:31:26.429409"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:26.430075"], ["id", 980190994]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190994], ["created_at", "2015-10-30 22:31:26.435215"], ["updated_at", "2015-10-30 22:31:26.435215"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 302 Found in 13ms (ActiveRecord: 2.1ms)
Started GET "/signup-restaurant" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::RegistrationsController#new_rest as HTML
  Rendered users/registrations/new_rest.html.erb within layouts/application (4.1ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190994]]
Completed 200 OK in 10ms (Views: 9.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "restaurants"
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190994]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 0.6ms)
Started DELETE "/destroy-user" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::RegistrationsController#destroy as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
RestaurantIntegrationTest: test_login_waitlist_restaurant_already_sign_up
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 3], ["address", "1892 Berkeley Avenue"], ["hours", "9:00 am - 10:00 pm"], ["created_at", "2015-10-30 22:31:26.468335"], ["updated_at", "2015-10-30 22:31:26.468335"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "FendyOnel"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$ExKyuWCBW6U/e3tltkXXHOFGY6IpHAd5C.SejOCD8f/BQHcJrWbfC"], ["created_at", "2015-10-30 22:31:26.474316"], ["updated_at", "2015-10-30 22:31:26.474316"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/restaurants" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (0.4ms)[0m  [1mSELECT "restaurants".* FROM "restaurants"[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  Rendered restaurants/index.html.erb within layouts/application (4.3ms)
Completed 200 OK in 6ms (Views: 4.4ms | ActiveRecord: 0.9ms)
Started POST "/create-user" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyOnel2", "email"=>"FendyOnel2@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "name", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "fendyonel2@gmail.com"], ["encrypted_password", "$2a$04$efCuIU9TcYGCbe4VRVvGKee0K0.Uo.aTnGLqbiS49a63dy70eb9p6"], ["name", "FendyOnel2"], ["rest", "f"], ["created_at", "2015-10-30 22:31:26.492270"], ["updated_at", "2015-10-30 22:31:26.492270"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-10-30 22:31:26.495617"], ["current_sign_in_at", "2015-10-30 22:31:26.495617"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:26.496498"], ["id", 980190995]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190995], ["phone_number", 0], ["created_at", "2015-10-30 22:31:26.506149"], ["updated_at", "2015-10-30 22:31:26.506149"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 302 Found in 22ms (ActiveRecord: 3.0ms)
Started GET "/" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by DynamicPagesController#home as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190995]]
Redirected to http://www.example.com/profile
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190995]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.2ms)
Completed 200 OK in 4ms (Views: 1.5ms | ActiveRecord: 0.3ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190995]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 0.6ms)
Started DELETE "/destroy-user" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::RegistrationsController#destroy as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)
Started POST "/users/sign_in" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Devise::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"FendyOnel2@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "fendyonel2@gmail.com"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "users" SET "current_sign_in_at" = $1, "sign_in_count" = $2, "updated_at" = $3 WHERE "users"."id" = $4  [["current_sign_in_at", "2015-10-30 22:31:26.538201"], ["sign_in_count", 2], ["updated_at", "2015-10-30 22:31:26.539188"], ["id", 980190995]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 10ms (ActiveRecord: 1.0ms)
Started GET "/waitlists_new?rest_id=@user.id" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by WaitlistsController#new as HTML
  Parameters: {"rest_id"=>"@user.id"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190995]]
  Rendered waitlists/new.html.erb within layouts/application (1.5ms)
Completed 200 OK in 5ms (Views: 2.4ms | ActiveRecord: 0.3ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Devise::SessionsController#destroy as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190995]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 0.6ms)
Started DELETE "/destroy-user" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::RegistrationsController#destroy as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
UsersIntegrationTest: test_sign_up_user_failure_email_regex_bad
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:26.564652"], ["updated_at", "2015-10-30 22:31:26.564652"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$3n/TcrJeh.j54i4SckRMLegimdOy7F.IMoiOmrXt1YDrQ6rEXQIU2"], ["created_at", "2015-10-30 22:31:26.569876"], ["updated_at", "2015-10-30 22:31:26.569876"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Started POST "/create-user" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"asdf", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'asdf' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/signup-user
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'asdf' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 302 Found in 10ms (ActiveRecord: 1.4ms)
Started GET "/signup-user" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::RegistrationsController#new_user as HTML
  Rendered users/registrations/new_user.html.erb within layouts/application (6.3ms)
Completed 200 OK in 18ms (Views: 17.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
UsersIntegrationTest: test_sign_up_restaurant_user_successfully
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:26.611297"], ["updated_at", "2015-10-30 22:31:26.611297"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$O//81CLiUF.2pXvSCOguO.b3Ya2wOf.Jx2RoLj5rtczMVw6AK.xcK"], ["created_at", "2015-10-30 22:31:26.619248"], ["updated_at", "2015-10-30 22:31:26.619248"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "restaurants"
Started POST "/create-restaurant" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"FendyBilly@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendybilly@gmail.com' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "name", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "fendybilly@gmail.com"], ["encrypted_password", "$2a$04$y7P22RsoUZ4iNo/UurBOoOfbphSy.k/HlmXSpIGTligZMdS8J/fse"], ["name", "FendyBilly"], ["rest", "t"], ["created_at", "2015-10-30 22:31:26.630372"], ["updated_at", "2015-10-30 22:31:26.630372"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-10-30 22:31:26.634026"], ["current_sign_in_at", "2015-10-30 22:31:26.634026"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:26.635243"], ["id", 980190996]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190996], ["created_at", "2015-10-30 22:31:26.641961"], ["updated_at", "2015-10-30 22:31:26.641961"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 302 Found in 18ms (ActiveRecord: 2.8ms)
Started GET "/" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by DynamicPagesController#home as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190996]]
Redirected to http://www.example.com/profile
Completed 302 Found in 4ms (ActiveRecord: 0.5ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190996]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (0.1ms)
Completed 200 OK in 4ms (Views: 1.3ms | ActiveRecord: 0.3ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------------
UsersIntegrationTest: test_sign_in_user_successfully
----------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:26.665731"], ["updated_at", "2015-10-30 22:31:26.665731"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$50lF5wo10F2UMr9lOv4mXuexnSgoUjRUrPLXY060ytI3Ff36V58sG"], ["created_at", "2015-10-30 22:31:26.673370"], ["updated_at", "2015-10-30 22:31:26.673370"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "atidjenad@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-10-30 22:31:26.681269"], ["current_sign_in_at", "2015-10-30 22:31:26.681269"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:26.682220"], ["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 9ms (ActiveRecord: 0.8ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 2]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.1ms)
Completed 200 OK in 3ms (Views: 1.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------
UsersIntegrationTest: test_sign_up_user_duplicate_failure
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:26.694073"], ["updated_at", "2015-10-30 22:31:26.694073"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$rAw6I458Opr3uyARQoygAuuhtmXNbajQdoZLlgr36d5IWk4aKskgW"], ["created_at", "2015-10-30 22:31:26.700482"], ["updated_at", "2015-10-30 22:31:26.700482"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Started POST "/create-user" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/signup-user
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 302 Found in 24ms (ActiveRecord: 1.8ms)
Started GET "/signup-user" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::RegistrationsController#new_user as HTML
  Rendered users/registrations/new_user.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------
UsersIntegrationTest: test_sign_up_customer_user_successfully
-------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:26.743631"], ["updated_at", "2015-10-30 22:31:26.743631"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$uZa8V7QhHLTuxAg2Qk0sMOrE6OmDnL23dyif46F.lwvtA/uVhemI6"], ["created_at", "2015-10-30 22:31:26.749838"], ["updated_at", "2015-10-30 22:31:26.749838"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
Started POST "/create-user" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"FendyBilly@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendybilly@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "name", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "fendybilly@gmail.com"], ["encrypted_password", "$2a$04$nOY/xfxeOQp8qOF8mVJ/p.6AUY5/uO3TAqVIyEdfRog7WwDLXIGYK"], ["name", "FendyBilly"], ["rest", "f"], ["created_at", "2015-10-30 22:31:26.761209"], ["updated_at", "2015-10-30 22:31:26.761209"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-10-30 22:31:26.763885"], ["current_sign_in_at", "2015-10-30 22:31:26.763885"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-10-30 22:31:26.765077"], ["id", 980190997]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190997], ["phone_number", 0], ["created_at", "2015-10-30 22:31:26.772365"], ["updated_at", "2015-10-30 22:31:26.772365"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 302 Found in 17ms (ActiveRecord: 2.7ms)
Started GET "/" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by DynamicPagesController#home as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190997]]
Redirected to http://www.example.com/profile
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/profile" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190997]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.3ms)
Completed 200 OK in 4ms (Views: 1.8ms | ActiveRecord: 0.4ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
UsersIntegrationTest: test_sign_up_restaurant_duplicate_failure
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:26.792037"], ["updated_at", "2015-10-30 22:31:26.792037"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$dv1IKzDYp3rzAZ6dVQb9p.XQuYsWI5X/HNc5qG/yi/VYZb0edahJ6"], ["created_at", "2015-10-30 22:31:26.797526"], ["updated_at", "2015-10-30 22:31:26.797526"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Started POST "/create-restaurant" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/signup-restaurant
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 302 Found in 10ms (ActiveRecord: 1.3ms)
Started GET "/signup-restaurant" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::RegistrationsController#new_rest as HTML
  Rendered users/registrations/new_rest.html.erb within layouts/application (2.1ms)
Completed 200 OK in 4ms (Views: 3.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------------
UsersIntegrationTest: test_sign_up_rest_failure_password_<_8
------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:26.826013"], ["updated_at", "2015-10-30 22:31:26.826013"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$awynVKVslpXrWnQsDUshROjJrCurEWbfbOtZgsLV/zro/.gAfJrrK"], ["created_at", "2015-10-30 22:31:26.832451"], ["updated_at", "2015-10-30 22:31:26.832451"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "customers"
Started POST "/create-restaurant" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"user@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/signup-restaurant
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 302 Found in 10ms (ActiveRecord: 1.3ms)
Started GET "/signup-restaurant" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::RegistrationsController#new_rest as HTML
  Rendered users/registrations/new_rest.html.erb within layouts/application (2.4ms)
Completed 200 OK in 5ms (Views: 3.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------------
UsersIntegrationTest: test_sign_up_rest_failure_no_email
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:26.862271"], ["updated_at", "2015-10-30 22:31:26.862271"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$mI6YM/ug3nSSarxOnfXP4.jWJKz3qLUwr7Msurnn52EQ30Rl3Oli6"], ["created_at", "2015-10-30 22:31:26.868531"], ["updated_at", "2015-10-30 22:31:26.868531"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Started POST "/create-restaurant" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/signup-restaurant
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 302 Found in 7ms (ActiveRecord: 0.5ms)
Started GET "/signup-restaurant" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::RegistrationsController#new_rest as HTML
  Rendered users/registrations/new_rest.html.erb within layouts/application (2.4ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------
UsersIntegrationTest: test_sign_in_wrong_password
-------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:26.893757"], ["updated_at", "2015-10-30 22:31:26.893757"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$bj9MG2JsbjeA0OF1e3FwA.8aE3NaCbpQrEvdm1FBQd8TXNNnWHZ1u"], ["created_at", "2015-10-30 22:31:26.902626"], ["updated_at", "2015-10-30 22:31:26.902626"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "atidjenad@gmail.com"]]
Completed 401 Unauthorized in 5ms (ActiveRecord: 0.4ms)
Started GET "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::SessionsController#new as HTML
  Rendered users/sessions/new.html.erb within layouts/application (2.3ms)
Completed 200 OK in 5ms (Views: 3.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
UsersIntegrationTest: test_sign_up_rest_failure_email_regex_bad
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:26.926701"], ["updated_at", "2015-10-30 22:31:26.926701"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$PnHayE8T9t5oSWLudYSgN.6EDqSpsEGX8DLjzpeP9Je6viqTKc8gO"], ["created_at", "2015-10-30 22:31:26.933903"], ["updated_at", "2015-10-30 22:31:26.933903"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
Started POST "/create-restaurant" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"asdf", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'asdf' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/signup-restaurant
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'asdf' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 302 Found in 11ms (ActiveRecord: 1.6ms)
Started GET "/signup-restaurant" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::RegistrationsController#new_rest as HTML
  Rendered users/registrations/new_rest.html.erb within layouts/application (2.3ms)
Completed 200 OK in 4ms (Views: 3.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------
UsersIntegrationTest: test_sign_up_user_failure_password_<_8
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:26.964975"], ["updated_at", "2015-10-30 22:31:26.964975"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$5Kp3JQenbjWRxI.KymOQo.CbGfU97UwGM.L/q/XUF7FI.7eLRpflm"], ["created_at", "2015-10-30 22:31:26.970471"], ["updated_at", "2015-10-30 22:31:26.970471"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Started POST "/create-user" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"user@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/signup-user
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 302 Found in 13ms (ActiveRecord: 1.6ms)
Started GET "/signup-user" for 127.0.0.1 at 2015-10-30 15:31:26 -0700
Processing by Users::RegistrationsController#new_user as HTML
  Rendered users/registrations/new_user.html.erb within layouts/application (2.4ms)
Completed 200 OK in 5ms (Views: 3.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------------------
UsersIntegrationTest: test_sign_up_user_failure_password_don't_match
--------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:27.002843"], ["updated_at", "2015-10-30 22:31:27.002843"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$CQR0rlAdWpasNqo7va7Om.a8uybijpSzru8hAXGbEg2G4EXS2gQOy"], ["created_at", "2015-10-30 22:31:27.007828"], ["updated_at", "2015-10-30 22:31:27.007828"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "customers"
Started POST "/create-user" for 127.0.0.1 at 2015-10-30 15:31:27 -0700
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"user@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/signup-user
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 302 Found in 11ms (ActiveRecord: 1.5ms)
Started GET "/signup-user" for 127.0.0.1 at 2015-10-30 15:31:27 -0700
Processing by Users::RegistrationsController#new_user as HTML
  Rendered users/registrations/new_user.html.erb within layouts/application (2.5ms)
Completed 200 OK in 5ms (Views: 3.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------------
UsersIntegrationTest: test_sign_up_user_failure_no_email
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:27.039290"], ["updated_at", "2015-10-30 22:31:27.039290"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$MpzdArTiddjqDvsOTUlXMeitPAgOMkMwZZ6.MUtSyArYZT7FuzZ/2"], ["created_at", "2015-10-30 22:31:27.044434"], ["updated_at", "2015-10-30 22:31:27.044434"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Started POST "/create-user" for 127.0.0.1 at 2015-10-30 15:31:27 -0700
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/signup-user
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 302 Found in 18ms (ActiveRecord: 0.7ms)
Started GET "/signup-user" for 127.0.0.1 at 2015-10-30 15:31:27 -0700
Processing by Users::RegistrationsController#new_user as HTML
  Rendered users/registrations/new_user.html.erb within layouts/application (2.4ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------------------
UsersIntegrationTest: test_sign_up_rest_failure_password_don't_match
--------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:27.082145"], ["updated_at", "2015-10-30 22:31:27.082145"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$RvMBVEiPZIPIcwwQi0h2VuHAF853nHV60PqHmjthfmwPR.XEpKqYq"], ["created_at", "2015-10-30 22:31:27.087459"], ["updated_at", "2015-10-30 22:31:27.087459"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "customers"
Started POST "/create-restaurant" for 127.0.0.1 at 2015-10-30 15:31:27 -0700
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"user@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/signup-restaurant
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 302 Found in 13ms (ActiveRecord: 1.8ms)
Started GET "/signup-restaurant" for 127.0.0.1 at 2015-10-30 15:31:27 -0700
Processing by Users::RegistrationsController#new_rest as HTML
  Rendered users/registrations/new_rest.html.erb within layouts/application (2.2ms)
Completed 200 OK in 4ms (Views: 3.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
UsersIntegrationTest: test_sign_in_user_don't_exist
---------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-10-30 22:31:27.120524"], ["updated_at", "2015-10-30 22:31:27.120524"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$3Sq7HM2BolwQFPoMKL1XXe7y0eMgLS75x5E3rjHc8SPdWosDbEsoq"], ["created_at", "2015-10-30 22:31:27.128386"], ["updated_at", "2015-10-30 22:31:27.128386"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:27 -0700
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"userdontexist@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "userdontexist@gmail.com"]]
Completed 401 Unauthorized in 4ms (ActiveRecord: 0.5ms)
Started GET "/sign_in" for 127.0.0.1 at 2015-10-30 15:31:27 -0700
Processing by Users::SessionsController#new as HTML
  Rendered users/sessions/new.html.erb within layouts/application (2.5ms)
Completed 200 OK in 6ms (Views: 4.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (5.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36m (307.0ms)[0m  [1mDROP DATABASE IF EXISTS "bytlyn_test"[0m
  [1m[35m (468.7ms)[0m  CREATE DATABASE "bytlyn_test" ENCODING = 'unicode'
  [1m[36mSQL (4.0ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (33.6ms)[0m  CREATE TABLE "accounts" ("id" serial primary key, "email" character varying NOT NULL, "rest" boolean NOT NULL, "name" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "password_digest" character varying) 
  [1m[36m (5.4ms)[0m  [1mCREATE TABLE "customers" ("id" serial primary key, "user_id" integer NOT NULL, "phone_number" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "avatar_file_name" character varying, "avatar_content_type" character varying, "avatar_file_size" integer, "avatar_updated_at" timestamp) [0m
  [1m[35m (3.8ms)[0m  CREATE TABLE "hours" ("id" serial primary key, "rest_id" integer NOT NULL, "day_id" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "open" time, "close" time) 
  [1m[36m (5.3ms)[0m  [1mCREATE TABLE "restaurants" ("id" serial primary key, "user_id" integer NOT NULL, "address" character varying, "hours" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "rating" integer, "price" integer, "rest_type" character varying, "description" text, "city" character varying, "zip" character varying, "lat" decimal, "lon" decimal) [0m
  [1m[35m (8.0ms)[0m  CREATE TABLE "users" ("id" serial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "name" character varying NOT NULL, "rest" boolean NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "avatar_file_name" character varying, "avatar_content_type" character varying, "avatar_file_size" integer, "avatar_updated_at" timestamp) 
  [1m[36m (4.2ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (1.4ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (5.7ms)[0m  [1mCREATE TABLE "waitlists" ("id" serial primary key, "rest_id" integer NOT NULL, "cust_id" integer NOT NULL, "people" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "name" character varying) [0m
  [1m[35m (2.6ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (1.3ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.4ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (6.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151105053540')[0m
  [1m[35m (1.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151009043556')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151020021727')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151020022423')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151020022841')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151102054331')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151102205558')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151103061341')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151104061534')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151104082106')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151105042308')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.7ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (5.0ms)[0m  [1mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "customers" DISABLE TRIGGER ALL;ALTER TABLE "hours" DISABLE TRIGGER ALL;ALTER TABLE "restaurants" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "waitlists" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "customers"[0m
  [1m[35mFixture Insert (1.5ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at", "id") VALUES (1, 123, '2015-11-06 06:08:34', '2015-11-06 06:08:34', 980190962)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "restaurants"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "hours", "created_at", "updated_at", "id") VALUES (1, '1893 Berkeley Avenue', '9:00 am - 10:00 pm', '2015-11-06 06:08:34', '2015-11-06 06:08:34', 518579358)
  [1m[36mFixture Delete (2.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.7ms)[0m  INSERT INTO "users" ("email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "current_sign_in_at", "last_sign_in_at", "current_sign_in_ip", "last_sign_in_ip", "name", "rest", "created_at", "updated_at", "id") VALUES ('abc@gmail.com', 'abcd', 'abcd', '2015-10-09', '2015-10-09', '2015-10-10', '2015-10-10', '192.168.1.5', '192.168.1.9', 'FendyOnel', 't', '2015-11-06 06:08:34', '2015-11-06 06:08:34', 980190962)
  [1m[36mFixture Delete (2.2ms)[0m  [1mDELETE FROM "waitlists"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "waitlists" ("rest_id", "cust_id", "people", "created_at", "updated_at", "id") VALUES (2, 1, 10, '2015-11-06 06:08:34', '2015-11-06 06:08:34', 980190962)
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "customers" ENABLE TRIGGER ALL;ALTER TABLE "hours" ENABLE TRIGGER ALL;ALTER TABLE "restaurants" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "waitlists" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------
CustomersControllerTest: test_should_get_edit_customer
------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.6ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:35.012777"], ["updated_at", "2015-11-06 06:08:35.012777"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$8ZzdOwpRGIFRqOiLIckCeetqjmlOnruN68omVgHKbn.JDY5YkbMuq"], ["created_at", "2015-11-06 06:08:35.060677"], ["updated_at", "2015-11-06 06:08:35.060677"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Processing by CustomersController#edit as HTML
  Parameters: {"id"=>"980190963"}
  [1m[35mCustomer Load (0.8ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT 1  [["id", 980190963]]
  Rendered customers/_form.html.erb (27.1ms)
  Rendered customers/edit.html.erb within layouts/application (38.3ms)
Completed 200 OK in 78ms (Views: 65.9ms | ActiveRecord: 0.8ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
----------------------------------------------------
CustomersControllerTest: test_should_create_customer
----------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:35.154747"], ["updated_at", "2015-11-06 06:08:35.154747"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$RkM1j0rB88np372MDW474OSn7odriHy4uMlW3StecP1Drut2EGkKi"], ["created_at", "2015-11-06 06:08:35.163141"], ["updated_at", "2015-11-06 06:08:35.163141"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Processing by CustomersController#create as HTML
  Parameters: {"customer"=>{"user_id"=>"10", "phone_number"=>"0"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("phone_number", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["phone_number", 0], ["user_id", 10], ["created_at", "2015-11-06 06:08:35.168721"], ["updated_at", "2015-11-06 06:08:35.168721"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/customers/980190965
Completed 302 Found in 4ms (ActiveRecord: 0.6ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------------------
CustomersControllerTest: test_should_destroy_customer
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:35.175772"], ["updated_at", "2015-11-06 06:08:35.175772"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$F7Z3r4ImyOmp72vRBa37Hus1Yn/YXSfx9GU6.NEbtz262wOmHA9xK"], ["created_at", "2015-11-06 06:08:35.181929"], ["updated_at", "2015-11-06 06:08:35.181929"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Processing by CustomersController#destroy as HTML
  Parameters: {"id"=>"980190966"}
  [1m[35mCustomer Load (0.5ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT 1  [["id", 980190966]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "customers" WHERE "customers"."id" = $1  [["id", 980190966]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/customers
Completed 302 Found in 4ms (ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CustomersControllerTest: test_should_show_customer
--------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:35.194096"], ["updated_at", "2015-11-06 06:08:35.194096"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$qL4Z8Tv3MoGiCN8LmddNuureYDwk3GDmk8MfJ/GTgxqVRnl3sHHc2"], ["created_at", "2015-11-06 06:08:35.201161"], ["updated_at", "2015-11-06 06:08:35.201161"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CustomersController#show as HTML
  Parameters: {"id"=>"980190967"}
  [1m[35mCustomer Load (0.4ms)[0m  SELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT 1  [["id", 980190967]]
  Rendered customers/show.html.erb within layouts/application (0.8ms)
Completed 200 OK in 4ms (Views: 3.2ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------------------
CustomersControllerTest: test_should_update_customer
----------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:35.211260"], ["updated_at", "2015-11-06 06:08:35.211260"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$zLBpUBNdNkYV7YWO03akw.b.OP/atueUy/6kCXl0IkIk2i7BUlnWu"], ["created_at", "2015-11-06 06:08:35.217055"], ["updated_at", "2015-11-06 06:08:35.217055"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
Processing by CustomersController#update as HTML
  Parameters: {"customer"=>{"user_id"=>"10", "phone_number"=>"0"}, "id"=>"980190968"}
  [1m[36mCustomer Load (0.3ms)[0m  [1mSELECT  "customers".* FROM "customers" WHERE "customers"."id" = $1 LIMIT 1[0m  [["id", 980190968]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "customers" SET "user_id" = $1, "updated_at" = $2 WHERE "customers"."id" = $3[0m  [["user_id", 10], ["updated_at", "2015-11-06 06:08:35.222787"], ["id", 980190968]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/customers/980190968
Completed 302 Found in 6ms (ActiveRecord: 0.9ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------------
RestaurantsControllerTest: test_should_create_restaurant
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 90 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("description", "price", "address", "rest_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["description", "123"], ["price", 123], ["address", "123"], ["rest_type", "Italian"], ["user_id", 90], ["created_at", "2015-11-06 06:08:35.265341"], ["updated_at", "2015-11-06 06:08:35.265341"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$eooQ20L5CMNDyBd/ymaHteJMDxTDit2m629B/hIgotPLyGDbJhg9S"], ["created_at", "2015-11-06 06:08:35.271520"], ["updated_at", "2015-11-06 06:08:35.271520"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
Processing by RestaurantsController#create as HTML
  Parameters: {"restaurant"=>{"description"=>"123", "price"=>"123", "address"=>"123", "rest_type"=>"Italian", "hours_attributes"=>{"0"=>{"open"=>"11:11", "close"=>"11:11", "rest_id"=>"34", "day_id"=>"1"}, "1"=>{"open"=>"14:22", "close"=>"14:22", "rest_id"=>"34", "day_id"=>"1"}, "2"=>{"open"=>"15:32", "close"=>"15:33", "rest_id"=>"34", "day_id"=>"1"}, "3"=>{"open"=>"03:22", "close"=>"15:32", "rest_id"=>"34", "day_id"=>"1"}, "4"=>{"open"=>"16:44", "close"=>"21:09", "rest_id"=>"34", "day_id"=>"1"}, "5"=>{"open"=>"18:06", "close"=>"19:07", "rest_id"=>"34", "day_id"=>"1"}, "6"=>{"open"=>"08:08", "close"=>"20:08", "rest_id"=>"34", "day_id"=>"1"}}, "user_id"=>"34"}}
  [1m[36mHour Exists (1.2ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 34 AND "hours"."day_id" = 1) LIMIT 1[0m
  [1m[35mHour Exists (0.4ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 34 AND "hours"."day_id" = 2) LIMIT 1
  [1m[36mHour Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 34 AND "hours"."day_id" = 3) LIMIT 1[0m
  [1m[35mHour Exists (0.3ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 34 AND "hours"."day_id" = 4) LIMIT 1
  [1m[36mHour Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 34 AND "hours"."day_id" = 5) LIMIT 1[0m
  [1m[35mHour Exists (0.3ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 34 AND "hours"."day_id" = 6) LIMIT 1
  [1m[36mHour Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 34 AND "hours"."day_id" = 7) LIMIT 1[0m
  [1m[35mRestaurant Exists (0.3ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 34 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mHour Exists (0.3ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 34 AND "hours"."day_id" = 1) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["day_id", 1], ["open", "2000-01-01 11:11:00.000000"], ["close", "2000-01-01 11:11:00.000000"], ["rest_id", 34], ["created_at", "2015-11-06 06:08:35.322755"], ["updated_at", "2015-11-06 06:08:35.322755"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mHour Exists (0.3ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 34 AND "hours"."day_id" = 2) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["day_id", 2], ["open", "2000-01-01 14:22:00.000000"], ["close", "2000-01-01 14:22:00.000000"], ["rest_id", 34], ["created_at", "2015-11-06 06:08:35.325921"], ["updated_at", "2015-11-06 06:08:35.325921"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mHour Exists (0.6ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 34 AND "hours"."day_id" = 3) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["day_id", 3], ["open", "2000-01-01 15:32:00.000000"], ["close", "2000-01-01 15:33:00.000000"], ["rest_id", 34], ["created_at", "2015-11-06 06:08:35.329522"], ["updated_at", "2015-11-06 06:08:35.329522"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mHour Exists (0.6ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 34 AND "hours"."day_id" = 4) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["day_id", 4], ["open", "2000-01-01 03:22:00.000000"], ["close", "2000-01-01 15:32:00.000000"], ["rest_id", 34], ["created_at", "2015-11-06 06:08:35.334634"], ["updated_at", "2015-11-06 06:08:35.334634"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mHour Exists (0.3ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 34 AND "hours"."day_id" = 5) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["day_id", 5], ["open", "2000-01-01 16:44:00.000000"], ["close", "2000-01-01 21:09:00.000000"], ["rest_id", 34], ["created_at", "2015-11-06 06:08:35.338061"], ["updated_at", "2015-11-06 06:08:35.338061"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mHour Exists (0.3ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 34 AND "hours"."day_id" = 6) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["day_id", 6], ["open", "2000-01-01 18:06:00.000000"], ["close", "2000-01-01 19:07:00.000000"], ["rest_id", 34], ["created_at", "2015-11-06 06:08:35.341447"], ["updated_at", "2015-11-06 06:08:35.341447"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mHour Exists (0.4ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 34 AND "hours"."day_id" = 7) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["day_id", 7], ["open", "2000-01-01 08:08:00.000000"], ["close", "2000-01-01 20:08:00.000000"], ["rest_id", 34], ["created_at", "2015-11-06 06:08:35.344774"], ["updated_at", "2015-11-06 06:08:35.344774"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.3ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 34 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("address", "user_id", "rest_type", "price", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["address", "123"], ["user_id", 34], ["rest_type", "Italian"], ["price", 123], ["description", "123"], ["created_at", "2015-11-06 06:08:35.347807"], ["updated_at", "2015-11-06 06:08:35.347807"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/profile
Completed 302 Found in 71ms (ActiveRecord: 14.4ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------------
RestaurantsControllerTest: test_should_get_edit
-----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 90 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("description", "price", "address", "rest_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["description", "123"], ["price", 123], ["address", "123"], ["rest_type", "Italian"], ["user_id", 90], ["created_at", "2015-11-06 06:08:35.356010"], ["updated_at", "2015-11-06 06:08:35.356010"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$w55RjibX/RsQW1Z.Y6PiGuUqabIPGiLY.YdAS6mkvDDMCEBdhmkoy"], ["created_at", "2015-11-06 06:08:35.362449"], ["updated_at", "2015-11-06 06:08:35.362449"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by RestaurantsController#edit as HTML
  Parameters: {"id"=>"518579361"}
  [1m[35mRestaurant Load (0.5ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 518579361]]
  Rendered restaurants/_form.html.erb (24.4ms)
  Rendered restaurants/edit.html.erb within layouts/application (26.2ms)
Completed 200 OK in 32ms (Views: 29.6ms | ActiveRecord: 0.5ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
RestaurantsControllerTest: test_should_update_restaurant
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.5ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 90 LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "restaurants" ("description", "price", "address", "rest_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["description", "123"], ["price", 123], ["address", "123"], ["rest_type", "Italian"], ["user_id", 90], ["created_at", "2015-11-06 06:08:35.402206"], ["updated_at", "2015-11-06 06:08:35.402206"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$b2noOp.v0AYGgpXuXNZkPezM5dHXBkZJ6oF8anUHcgtKqLe7u73EC"], ["created_at", "2015-11-06 06:08:35.410363"], ["updated_at", "2015-11-06 06:08:35.410363"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestaurantsController#update as HTML
  Parameters: {"restaurant"=>{"user_id"=>"5", "address"=>"MLK1"}, "id"=>"518579362"}
  [1m[36mRestaurant Load (0.7ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 518579362]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE ("restaurants"."user_id" = 5 AND "restaurants"."id" != 518579362) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "restaurants" SET "address" = $1, "user_id" = $2, "updated_at" = $3 WHERE "restaurants"."id" = $4  [["address", "MLK1"], ["user_id", 5], ["updated_at", "2015-11-06 06:08:35.431118"], ["id", 518579362]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/restaurants/518579362
Completed 302 Found in 9ms (ActiveRecord: 2.1ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------
RestaurantsControllerTest: test_should_destroy_restaurant
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 90 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "restaurants" ("description", "price", "address", "rest_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["description", "123"], ["price", 123], ["address", "123"], ["rest_type", "Italian"], ["user_id", 90], ["created_at", "2015-11-06 06:08:35.438245"], ["updated_at", "2015-11-06 06:08:35.438245"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$Yctzn3ZXQs.k3q0c.MppJ.RPvDxNz38f6y0hUmfpzHnGSTPUAvD/i"], ["created_at", "2015-11-06 06:08:35.445610"], ["updated_at", "2015-11-06 06:08:35.445610"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
Processing by RestaurantsController#destroy as HTML
  Parameters: {"id"=>"518579363"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 518579363]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "restaurants" WHERE "restaurants"."id" = $1[0m  [["id", 518579363]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/restaurants
Completed 302 Found in 3ms (ActiveRecord: 0.8ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------
RestaurantsControllerTest: test_should_show_restaurant
------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 90 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "restaurants" ("description", "price", "address", "rest_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["description", "123"], ["price", 123], ["address", "123"], ["rest_type", "Italian"], ["user_id", 90], ["created_at", "2015-11-06 06:08:35.456962"], ["updated_at", "2015-11-06 06:08:35.456962"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$ISocIwVYuYWC.ZSQusyWjuvRY3KlxT6NVn9LxXwr7SFw5Uz0c0.UC"], ["created_at", "2015-11-06 06:08:35.464440"], ["updated_at", "2015-11-06 06:08:35.464440"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
Processing by RestaurantsController#create as HTML
  Parameters: {"restaurant"=>{"description"=>"123", "price"=>"123", "address"=>"123", "rest_type"=>"Italian", "hours_attributes"=>{"0"=>{"open"=>"11:11", "close"=>"11:11", "rest_id"=>"17", "day_id"=>"1"}, "1"=>{"open"=>"14:22", "close"=>"14:22", "rest_id"=>"17", "day_id"=>"2"}, "2"=>{"open"=>"15:32", "close"=>"15:33", "rest_id"=>"17", "day_id"=>"3"}, "3"=>{"open"=>"03:22", "close"=>"15:32", "rest_id"=>"17", "day_id"=>"4"}, "4"=>{"open"=>"16:44", "close"=>"21:09", "rest_id"=>"17", "day_id"=>"5"}, "5"=>{"open"=>"18:06", "close"=>"19:07", "rest_id"=>"17", "day_id"=>"6"}, "6"=>{"open"=>"08:08", "close"=>"20:08", "rest_id"=>"17", "day_id"=>"7"}}, "user_id"=>"17"}}
  [1m[36mHour Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 17 AND "hours"."day_id" = 1) LIMIT 1[0m
  [1m[35mHour Exists (0.5ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 17 AND "hours"."day_id" = 2) LIMIT 1
  [1m[36mHour Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 17 AND "hours"."day_id" = 3) LIMIT 1[0m
  [1m[35mHour Exists (0.5ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 17 AND "hours"."day_id" = 4) LIMIT 1
  [1m[36mHour Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 17 AND "hours"."day_id" = 5) LIMIT 1[0m
  [1m[35mHour Exists (0.8ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 17 AND "hours"."day_id" = 6) LIMIT 1
  [1m[36mHour Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 17 AND "hours"."day_id" = 7) LIMIT 1[0m
  [1m[35mRestaurant Exists (0.4ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 17 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mHour Exists (0.4ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 17 AND "hours"."day_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["day_id", 1], ["open", "2000-01-01 11:11:00.000000"], ["close", "2000-01-01 11:11:00.000000"], ["rest_id", 17], ["created_at", "2015-11-06 06:08:35.502798"], ["updated_at", "2015-11-06 06:08:35.502798"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mHour Exists (0.4ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 17 AND "hours"."day_id" = 2) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["day_id", 2], ["open", "2000-01-01 14:22:00.000000"], ["close", "2000-01-01 14:22:00.000000"], ["rest_id", 17], ["created_at", "2015-11-06 06:08:35.506378"], ["updated_at", "2015-11-06 06:08:35.506378"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mHour Exists (0.4ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 17 AND "hours"."day_id" = 3) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["day_id", 3], ["open", "2000-01-01 15:32:00.000000"], ["close", "2000-01-01 15:33:00.000000"], ["rest_id", 17], ["created_at", "2015-11-06 06:08:35.510140"], ["updated_at", "2015-11-06 06:08:35.510140"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mHour Exists (0.4ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 17 AND "hours"."day_id" = 4) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["day_id", 4], ["open", "2000-01-01 03:22:00.000000"], ["close", "2000-01-01 15:32:00.000000"], ["rest_id", 17], ["created_at", "2015-11-06 06:08:35.513830"], ["updated_at", "2015-11-06 06:08:35.513830"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mHour Exists (0.4ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 17 AND "hours"."day_id" = 5) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["day_id", 5], ["open", "2000-01-01 16:44:00.000000"], ["close", "2000-01-01 21:09:00.000000"], ["rest_id", 17], ["created_at", "2015-11-06 06:08:35.517411"], ["updated_at", "2015-11-06 06:08:35.517411"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mHour Exists (0.4ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 17 AND "hours"."day_id" = 6) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["day_id", 6], ["open", "2000-01-01 18:06:00.000000"], ["close", "2000-01-01 19:07:00.000000"], ["rest_id", 17], ["created_at", "2015-11-06 06:08:35.520997"], ["updated_at", "2015-11-06 06:08:35.520997"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mHour Exists (0.4ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 17 AND "hours"."day_id" = 7) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["day_id", 7], ["open", "2000-01-01 08:08:00.000000"], ["close", "2000-01-01 20:08:00.000000"], ["rest_id", 17], ["created_at", "2015-11-06 06:08:35.524557"], ["updated_at", "2015-11-06 06:08:35.524557"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.4ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 17 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("address", "user_id", "rest_type", "price", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["address", "123"], ["user_id", 17], ["rest_type", "Italian"], ["price", 123], ["description", "123"], ["created_at", "2015-11-06 06:08:35.530288"], ["updated_at", "2015-11-06 06:08:35.530288"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/profile
Completed 302 Found in 62ms (ActiveRecord: 11.3ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"518579364"}
  [1m[35mRestaurant Load (0.5ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 518579364]]
  Rendered restaurants/show.html.erb within layouts/application (1.0ms)
Completed 200 OK in 5ms (Views: 3.5ms | ActiveRecord: 0.5ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
RestaurantsControllerTest: test_should_get_index
------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.4ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 90 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("description", "price", "address", "rest_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["description", "123"], ["price", 123], ["address", "123"], ["rest_type", "Italian"], ["user_id", 90], ["created_at", "2015-11-06 06:08:35.545077"], ["updated_at", "2015-11-06 06:08:35.545077"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$rElUzHslgJWTkocw0G3qLOFAORMDydIuNeFWzqFPOciogsLVGk43a"], ["created_at", "2015-11-06 06:08:35.551521"], ["updated_at", "2015-11-06 06:08:35.551521"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (0.6ms)[0m  [1mSELECT "restaurants".* FROM "restaurants"[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 90]]
  Rendered restaurants/index.html.erb within layouts/application (9.7ms)
Completed 200 OK in 13ms (Views: 10.6ms | ActiveRecord: 2.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------------------------------------
RestaurantIntegrationTest: test_login_waitlist_restaurant_not_yet_sign_in
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.4ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 3 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 3], ["address", "1892 Berkeley Avenue"], ["created_at", "2015-11-06 06:08:35.572864"], ["updated_at", "2015-11-06 06:08:35.572864"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "FendyOnel"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$Aj.BrcyXwx76bFGO/EtLp.9Tt/DIzURQMcZmlRRNmPLJIq/eJLZj."], ["created_at", "2015-11-06 06:08:35.579171"], ["updated_at", "2015-11-06 06:08:35.579171"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/restaurants" for 127.0.0.1 at 2015-11-05 22:08:35 -0800
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (0.5ms)[0m  [1mSELECT "restaurants".* FROM "restaurants"[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  Rendered restaurants/index.html.erb within layouts/application (5.8ms)
Completed 200 OK in 21ms (Views: 6.3ms | ActiveRecord: 1.4ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-11-05 22:08:35 -0800
Processing by Devise::SessionsController#destroy as HTML
Redirected to https://www.example.com/
Filter chain halted as :verify_signed_out_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/waitlists" for 127.0.0.1 at 2015-11-05 22:08:35 -0800
Processing by WaitlistsController#index as HTML
Redirected to https://www.example.com/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/login" for 127.0.0.1 at 2015-11-05 22:08:35 -0800
Processing by Users::SessionsController#new as HTML
  Rendered users/sessions/new.html.erb within layouts/application (23.4ms)
Completed 200 OK in 39ms (Views: 33.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------
RestaurantIntegrationTest: test_create_new_restaurant
-----------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.4ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 3 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 3], ["address", "1892 Berkeley Avenue"], ["created_at", "2015-11-06 06:08:35.733258"], ["updated_at", "2015-11-06 06:08:35.733258"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "FendyOnel"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$F4bu6BrYyJ1A.3EshIvKN.1vsRchAzbBgwjjAxtxCIrkCO3PGI7lS"], ["created_at", "2015-11-06 06:08:35.743047"], ["updated_at", "2015-11-06 06:08:35.743047"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/restaurants" for 127.0.0.1 at 2015-11-05 22:08:35 -0800
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (0.7ms)[0m  [1mSELECT "restaurants".* FROM "restaurants"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  Rendered restaurants/index.html.erb within layouts/application (6.4ms)
Completed 200 OK in 8ms (Views: 6.1ms | ActiveRecord: 1.6ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
Started POST "/create-restaurant" for 127.0.0.1 at 2015-11-05 22:08:35 -0800
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"FendyBilly@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendybilly@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("email", "encrypted_password", "name", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["email", "fendybilly@gmail.com"], ["encrypted_password", "$2a$04$Hm.lrxeCHidc8Klyxvx3pO42rGLl4FrJq2Z0A3XFiXTGCkso/zFOu"], ["name", "FendyBilly"], ["rest", "t"], ["created_at", "2015-11-06 06:08:35.788132"], ["updated_at", "2015-11-06 06:08:35.788132"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-11-06 06:08:35.791522"], ["current_sign_in_at", "2015-11-06 06:08:35.791522"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-11-06 06:08:35.792626"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to https://www.example.com/restaurant_new
Completed 302 Found in 23ms (ActiveRecord: 2.2ms)
Started GET "/restaurant_new" for 127.0.0.1 at 2015-11-05 22:08:35 -0800
Processing by RestaurantsController#new as HTML
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190963]]
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."user_id" = $1 LIMIT 1  [["user_id", 980190963]]
  Rendered restaurants/new.html.erb within layouts/application (29.5ms)
Completed 200 OK in 42ms (Views: 31.5ms | ActiveRecord: 1.4ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT 1[0m  [["email", "fendybilly@gmail.com"]]
Started POST "/restaurants" for 127.0.0.1 at 2015-11-05 22:08:35 -0800
Processing by RestaurantsController#create as HTML
  Parameters: {"restaurant"=>{"description"=>"123", "price"=>"123", "address"=>"123", "rest_type"=>"Italian", "hours_attributes"=>{"0"=>{"open"=>"11:11", "close"=>"11:11", "rest_id"=>"980190963", "day_id"=>"1"}, "1"=>{"open"=>"14:22", "close"=>"14:22", "rest_id"=>"980190963", "day_id"=>"2"}, "2"=>{"open"=>"15:32", "close"=>"15:33", "rest_id"=>"980190963", "day_id"=>"3"}, "3"=>{"open"=>"03:22", "close"=>"15:32", "rest_id"=>"980190963", "day_id"=>"4"}, "4"=>{"open"=>"16:44", "close"=>"21:09", "rest_id"=>"980190963", "day_id"=>"5"}, "5"=>{"open"=>"18:06", "close"=>"19:07", "rest_id"=>"980190963", "day_id"=>"6"}, "6"=>{"open"=>"08:08", "close"=>"20:08", "rest_id"=>"980190963", "day_id"=>"7"}}, "user_id"=>"980190963"}}
  [1m[35mHour Exists (0.5ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190963 AND "hours"."day_id" = 1) LIMIT 1
  [1m[36mHour Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190963 AND "hours"."day_id" = 2) LIMIT 1[0m
  [1m[35mHour Exists (0.3ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190963 AND "hours"."day_id" = 3) LIMIT 1
  [1m[36mHour Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190963 AND "hours"."day_id" = 4) LIMIT 1[0m
  [1m[35mHour Exists (0.3ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190963 AND "hours"."day_id" = 5) LIMIT 1
  [1m[36mHour Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190963 AND "hours"."day_id" = 6) LIMIT 1[0m
  [1m[35mHour Exists (0.3ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190963 AND "hours"."day_id" = 7) LIMIT 1
  [1m[36mRestaurant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 980190963 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mHour Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190963 AND "hours"."day_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["day_id", 1], ["open", "2000-01-01 11:11:00.000000"], ["close", "2000-01-01 11:11:00.000000"], ["rest_id", 980190963], ["created_at", "2015-11-06 06:08:35.898154"], ["updated_at", "2015-11-06 06:08:35.898154"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mHour Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190963 AND "hours"."day_id" = 2) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["day_id", 2], ["open", "2000-01-01 14:22:00.000000"], ["close", "2000-01-01 14:22:00.000000"], ["rest_id", 980190963], ["created_at", "2015-11-06 06:08:35.901414"], ["updated_at", "2015-11-06 06:08:35.901414"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mHour Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190963 AND "hours"."day_id" = 3) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["day_id", 3], ["open", "2000-01-01 15:32:00.000000"], ["close", "2000-01-01 15:33:00.000000"], ["rest_id", 980190963], ["created_at", "2015-11-06 06:08:35.903967"], ["updated_at", "2015-11-06 06:08:35.903967"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mHour Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190963 AND "hours"."day_id" = 4) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["day_id", 4], ["open", "2000-01-01 03:22:00.000000"], ["close", "2000-01-01 15:32:00.000000"], ["rest_id", 980190963], ["created_at", "2015-11-06 06:08:35.907022"], ["updated_at", "2015-11-06 06:08:35.907022"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mHour Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190963 AND "hours"."day_id" = 5) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["day_id", 5], ["open", "2000-01-01 16:44:00.000000"], ["close", "2000-01-01 21:09:00.000000"], ["rest_id", 980190963], ["created_at", "2015-11-06 06:08:35.909477"], ["updated_at", "2015-11-06 06:08:35.909477"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mHour Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190963 AND "hours"."day_id" = 6) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["day_id", 6], ["open", "2000-01-01 18:06:00.000000"], ["close", "2000-01-01 19:07:00.000000"], ["rest_id", 980190963], ["created_at", "2015-11-06 06:08:35.911938"], ["updated_at", "2015-11-06 06:08:35.911938"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mHour Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190963 AND "hours"."day_id" = 7) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["day_id", 7], ["open", "2000-01-01 08:08:00.000000"], ["close", "2000-01-01 20:08:00.000000"], ["rest_id", 980190963], ["created_at", "2015-11-06 06:08:35.914380"], ["updated_at", "2015-11-06 06:08:35.914380"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 980190963 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("address", "user_id", "rest_type", "price", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["address", "123"], ["user_id", 980190963], ["rest_type", "Italian"], ["price", 123], ["description", "123"], ["created_at", "2015-11-06 06:08:35.916948"], ["updated_at", "2015-11-06 06:08:35.916948"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to https://www.example.com/profile
Completed 302 Found in 59ms (ActiveRecord: 9.5ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:35 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190963]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."user_id" = $1 LIMIT 1[0m  [["user_id", 980190963]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (1.7ms)
Completed 200 OK in 8ms (Views: 4.8ms | ActiveRecord: 0.8ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "restaurants"
Started POST "/users/sign_in" for 127.0.0.1 at 2015-11-05 22:08:35 -0800
Processing by Devise::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"FendyBilly@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190963]]
Redirected to https://www.example.com/
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.4ms)
Started GET "/" for 127.0.0.1 at 2015-11-05 22:08:35 -0800
Processing by DynamicPagesController#home as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190963]]
Redirected to https://www.example.com/profile
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:35 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190963]]
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."user_id" = $1 LIMIT 1  [["user_id", 980190963]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (0.6ms)
Completed 200 OK in 4ms (Views: 1.5ms | ActiveRecord: 0.7ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-11-05 22:08:35 -0800
Processing by Devise::SessionsController#destroy as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190963]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to https://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 1.1ms)
Started DELETE "/destroy-user" for 127.0.0.1 at 2015-11-05 22:08:35 -0800
Processing by Users::RegistrationsController#destroy as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
RestaurantIntegrationTest: test_login_waitlist_restaurant_already_sign_up
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 3], ["address", "1892 Berkeley Avenue"], ["created_at", "2015-11-06 06:08:35.974088"], ["updated_at", "2015-11-06 06:08:35.974088"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "FendyOnel"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$CCvwdlOa47CBbTW6kKZqzuTzx1lZMgtU5D2rG91LzBGWGybwUwGPm"], ["created_at", "2015-11-06 06:08:35.979557"], ["updated_at", "2015-11-06 06:08:35.979557"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/restaurants" for 127.0.0.1 at 2015-11-05 22:08:35 -0800
Processing by RestaurantsController#index as HTML
  [1m[35mRestaurant Load (0.4ms)[0m  SELECT "restaurants".* FROM "restaurants"
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  Rendered restaurants/index.html.erb within layouts/application (3.6ms)
Completed 200 OK in 5ms (Views: 3.7ms | ActiveRecord: 0.8ms)
Started POST "/create-user" for 127.0.0.1 at 2015-11-05 22:08:35 -0800
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyOnel2", "email"=>"FendyOnel2@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("email", "encrypted_password", "name", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["email", "fendyonel2@gmail.com"], ["encrypted_password", "$2a$04$OqmuGVKAsersgrL69y91deLVV8PoeRatPVsOzInIFB9lDV2J0EfWG"], ["name", "FendyOnel2"], ["rest", "f"], ["created_at", "2015-11-06 06:08:35.994670"], ["updated_at", "2015-11-06 06:08:35.994670"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-11-06 06:08:35.997523"], ["current_sign_in_at", "2015-11-06 06:08:35.997523"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-11-06 06:08:35.998364"], ["id", 980190964]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190964], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.006174"], ["updated_at", "2015-11-06 06:08:36.006174"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 302 Found in 18ms (ActiveRecord: 2.7ms)
Started GET "/" for 127.0.0.1 at 2015-11-05 22:08:36 -0800
Processing by DynamicPagesController#home as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190964]]
Redirected to http://www.example.com/profile
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:36 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190964]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (2.3ms)
Completed 200 OK in 7ms (Views: 4.7ms | ActiveRecord: 0.3ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-11-05 22:08:36 -0800
Processing by Devise::SessionsController#destroy as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190964]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 6ms (ActiveRecord: 0.7ms)
Started DELETE "/destroy-user" for 127.0.0.1 at 2015-11-05 22:08:36 -0800
Processing by Users::RegistrationsController#destroy as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)
Started POST "/users/sign_in" for 127.0.0.1 at 2015-11-05 22:08:36 -0800
Processing by Devise::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"FendyOnel2@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "fendyonel2@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "current_sign_in_at" = $1, "sign_in_count" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["current_sign_in_at", "2015-11-06 06:08:36.044134"], ["sign_in_count", 2], ["updated_at", "2015-11-06 06:08:36.045453"], ["id", 980190964]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 16ms (ActiveRecord: 1.7ms)
Started GET "/waitlists_new?rest_id=@user.id" for 127.0.0.1 at 2015-11-05 22:08:36 -0800
Processing by WaitlistsController#new as HTML
  Parameters: {"rest_id"=>"@user.id"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190964]]
  Rendered waitlists/new.html.erb within layouts/application (7.1ms)
Completed 200 OK in 22ms (Views: 14.0ms | ActiveRecord: 0.3ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-11-05 22:08:36 -0800
Processing by Devise::SessionsController#destroy as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190964]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 5ms (ActiveRecord: 0.7ms)
Started DELETE "/destroy-user" for 127.0.0.1 at 2015-11-05 22:08:36 -0800
Processing by Users::RegistrationsController#destroy as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
----------------------------------------------------------
RestaurantIntegrationTest: test_count_how_many_restaurants
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.3ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 3 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 3], ["address", "1892 Berkeley Avenue"], ["created_at", "2015-11-06 06:08:36.095952"], ["updated_at", "2015-11-06 06:08:36.095952"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "FendyOnel"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$T6HTVnaGqz09vENyifOlbu7K8s8N0bNcD9Dlv/h3rB12gpns1u9wG"], ["created_at", "2015-11-06 06:08:36.101355"], ["updated_at", "2015-11-06 06:08:36.101355"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
Started POST "/create-restaurant" for 127.0.0.1 at 2015-11-05 22:08:36 -0800
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"FendyBilly@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendybilly@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("email", "encrypted_password", "name", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["email", "fendybilly@gmail.com"], ["encrypted_password", "$2a$04$wA8q/9udyTK/Xvhvo3QdOeVtQRsPBCj1vZAvihmLKT4Bgho3cTmW6"], ["name", "FendyBilly"], ["rest", "t"], ["created_at", "2015-11-06 06:08:36.111709"], ["updated_at", "2015-11-06 06:08:36.111709"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-11-06 06:08:36.114496"], ["current_sign_in_at", "2015-11-06 06:08:36.114496"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-11-06 06:08:36.115214"], ["id", 980190965]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/restaurant_new
Completed 302 Found in 14ms (ActiveRecord: 1.9ms)
Started GET "/restaurant_new" for 127.0.0.1 at 2015-11-05 22:08:36 -0800
Processing by RestaurantsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190965]]
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."user_id" = $1 LIMIT 1  [["user_id", 980190965]]
  Rendered restaurants/new.html.erb within layouts/application (9.8ms)
Completed 200 OK in 16ms (Views: 10.9ms | ActiveRecord: 0.6ms)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 LIMIT 1[0m  [["email", "fendybilly@gmail.com"]]
Started POST "/restaurants" for 127.0.0.1 at 2015-11-05 22:08:36 -0800
Processing by RestaurantsController#create as HTML
  Parameters: {"restaurant"=>{"description"=>"123", "price"=>"123", "address"=>"123", "rest_type"=>"Italian", "hours_attributes"=>{"0"=>{"open"=>"11:11", "close"=>"11:11", "rest_id"=>"980190965", "day_id"=>"1"}, "1"=>{"open"=>"14:22", "close"=>"14:22", "rest_id"=>"980190965", "day_id"=>"2"}, "2"=>{"open"=>"15:32", "close"=>"15:33", "rest_id"=>"980190965", "day_id"=>"3"}, "3"=>{"open"=>"03:22", "close"=>"15:32", "rest_id"=>"980190965", "day_id"=>"4"}, "4"=>{"open"=>"16:44", "close"=>"21:09", "rest_id"=>"980190965", "day_id"=>"5"}, "5"=>{"open"=>"18:06", "close"=>"19:07", "rest_id"=>"980190965", "day_id"=>"6"}, "6"=>{"open"=>"08:08", "close"=>"20:08", "rest_id"=>"980190965", "day_id"=>"7"}}, "user_id"=>"980190965"}}
  [1m[35mHour Exists (0.4ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190965 AND "hours"."day_id" = 1) LIMIT 1
  [1m[36mHour Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190965 AND "hours"."day_id" = 2) LIMIT 1[0m
  [1m[35mHour Exists (0.3ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190965 AND "hours"."day_id" = 3) LIMIT 1
  [1m[36mHour Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190965 AND "hours"."day_id" = 4) LIMIT 1[0m
  [1m[35mHour Exists (0.4ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190965 AND "hours"."day_id" = 5) LIMIT 1
  [1m[36mHour Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190965 AND "hours"."day_id" = 6) LIMIT 1[0m
  [1m[35mHour Exists (0.3ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190965 AND "hours"."day_id" = 7) LIMIT 1
  [1m[36mRestaurant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 980190965 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mHour Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190965 AND "hours"."day_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["day_id", 1], ["open", "2000-01-01 11:11:00.000000"], ["close", "2000-01-01 11:11:00.000000"], ["rest_id", 980190965], ["created_at", "2015-11-06 06:08:36.169214"], ["updated_at", "2015-11-06 06:08:36.169214"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mHour Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190965 AND "hours"."day_id" = 2) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["day_id", 2], ["open", "2000-01-01 14:22:00.000000"], ["close", "2000-01-01 14:22:00.000000"], ["rest_id", 980190965], ["created_at", "2015-11-06 06:08:36.183575"], ["updated_at", "2015-11-06 06:08:36.183575"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mHour Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190965 AND "hours"."day_id" = 3) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["day_id", 3], ["open", "2000-01-01 15:32:00.000000"], ["close", "2000-01-01 15:33:00.000000"], ["rest_id", 980190965], ["created_at", "2015-11-06 06:08:36.187354"], ["updated_at", "2015-11-06 06:08:36.187354"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mHour Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190965 AND "hours"."day_id" = 4) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["day_id", 4], ["open", "2000-01-01 03:22:00.000000"], ["close", "2000-01-01 15:32:00.000000"], ["rest_id", 980190965], ["created_at", "2015-11-06 06:08:36.191387"], ["updated_at", "2015-11-06 06:08:36.191387"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mHour Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190965 AND "hours"."day_id" = 5) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["day_id", 5], ["open", "2000-01-01 16:44:00.000000"], ["close", "2000-01-01 21:09:00.000000"], ["rest_id", 980190965], ["created_at", "2015-11-06 06:08:36.194462"], ["updated_at", "2015-11-06 06:08:36.194462"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mHour Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190965 AND "hours"."day_id" = 6) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["day_id", 6], ["open", "2000-01-01 18:06:00.000000"], ["close", "2000-01-01 19:07:00.000000"], ["rest_id", 980190965], ["created_at", "2015-11-06 06:08:36.197261"], ["updated_at", "2015-11-06 06:08:36.197261"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mHour Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 980190965 AND "hours"."day_id" = 7) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "hours" ("day_id", "open", "close", "rest_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["day_id", 7], ["open", "2000-01-01 08:08:00.000000"], ["close", "2000-01-01 20:08:00.000000"], ["rest_id", 980190965], ["created_at", "2015-11-06 06:08:36.200084"], ["updated_at", "2015-11-06 06:08:36.200084"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 980190965 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("address", "user_id", "rest_type", "price", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["address", "123"], ["user_id", 980190965], ["rest_type", "Italian"], ["price", 123], ["description", "123"], ["created_at", "2015-11-06 06:08:36.203127"], ["updated_at", "2015-11-06 06:08:36.203127"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 62ms (ActiveRecord: 9.7ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:36 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190965]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."user_id" = $1 LIMIT 1[0m  [["user_id", 980190965]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (0.8ms)
Completed 200 OK in 4ms (Views: 1.7ms | ActiveRecord: 0.6ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "restaurants"
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-11-05 22:08:36 -0800
Processing by Devise::SessionsController#destroy as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190965]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 0.5ms)
Started DELETE "/destroy-user" for 127.0.0.1 at 2015-11-05 22:08:36 -0800
Processing by Users::RegistrationsController#destroy as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
WaitlistTest: test_Correct_Waitlist_parameter
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$Qgk5Tw545.1pJi2dFNoaB.3X3N26j01uUk30KBXUs8GN.mRpH5xAS"], ["created_at", "2015-11-06 06:08:36.236336"], ["updated_at", "2015-11-06 06:08:36.236336"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.238733"], ["updated_at", "2015-11-06 06:08:36.238733"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$6f9QfOOqKh1Pk9kLqZy0FeGHK76JZJexoqHRtdoyZHL8M31WvunCe"], ["created_at", "2015-11-06 06:08:36.243644"], ["updated_at", "2015-11-06 06:08:36.243644"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["created_at", "2015-11-06 06:08:36.247655"], ["updated_at", "2015-11-06 06:08:36.247655"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$86cLtdcTZGH6Z2f0EfRcb.USkxPuNhfzb07wQgELIWd30J9RKIrwm"], ["created_at", "2015-11-06 06:08:36.254043"], ["updated_at", "2015-11-06 06:08:36.254043"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.256538"], ["updated_at", "2015-11-06 06:08:36.256538"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$t6hWOeaxbAYJi56Jz0yp7eJk.DLvIXWB84HKgRe3BWWmcW/Kq.eJG"], ["created_at", "2015-11-06 06:08:36.262704"], ["updated_at", "2015-11-06 06:08:36.262704"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-11-06 06:08:36.267339"], ["updated_at", "2015-11-06 06:08:36.267339"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------
WaitlistTest: test_no_cust_id
-----------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$ddDWYvs0WcXj8lCN18QRV.4LFazqQMYAif7lEAE18MRozfpnPkzy2"], ["created_at", "2015-11-06 06:08:36.278532"], ["updated_at", "2015-11-06 06:08:36.278532"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.282466"], ["updated_at", "2015-11-06 06:08:36.282466"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$r736BWpXoJ3hE.dFd6.ofuZT2/is9ZspHxW9aaQ9ItaVX269oggye"], ["created_at", "2015-11-06 06:08:36.287777"], ["updated_at", "2015-11-06 06:08:36.287777"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["created_at", "2015-11-06 06:08:36.290829"], ["updated_at", "2015-11-06 06:08:36.290829"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$1sdd4jzsJYh49QEfRe9tB.IWqFAUHfrWw8wo5Otcns0wPYooe5Iqu"], ["created_at", "2015-11-06 06:08:36.297335"], ["updated_at", "2015-11-06 06:08:36.297335"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.300071"], ["updated_at", "2015-11-06 06:08:36.300071"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$gaNtuWMaeb1apqXOftNHe.AOW2of6SrSl8vOD43rI2pWseRJuOmsm"], ["created_at", "2015-11-06 06:08:36.305336"], ["updated_at", "2015-11-06 06:08:36.305336"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------
WaitlistTest: test_no_people
----------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.4ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 1 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$Hr0JqHNz2pQDa1DXb6JD6O6VrMGNj2WFFQ2lz.VYJKWQ774Q8BtBm"], ["created_at", "2015-11-06 06:08:36.318381"], ["updated_at", "2015-11-06 06:08:36.318381"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.321004"], ["updated_at", "2015-11-06 06:08:36.321004"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$3evCTQZbnuzWTq4lVZnt0OLRZNOjvNkP414Onaa4mGpaF4covf9sy"], ["created_at", "2015-11-06 06:08:36.325988"], ["updated_at", "2015-11-06 06:08:36.325988"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.4ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 3 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["created_at", "2015-11-06 06:08:36.330159"], ["updated_at", "2015-11-06 06:08:36.330159"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$eR4F9vOMG82ShMpPuTTgBe5yIsocVB6hQMiQVaztk4a8aoyyLzebi"], ["created_at", "2015-11-06 06:08:36.336136"], ["updated_at", "2015-11-06 06:08:36.336136"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.338371"], ["updated_at", "2015-11-06 06:08:36.338371"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$5mIuA0GwWkEevqtFsOTCcuDMSbvuuLkgmP5NjlZffc1V342HqJZwu"], ["created_at", "2015-11-06 06:08:36.343246"], ["updated_at", "2015-11-06 06:08:36.343246"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------
WaitlistTest: test_unique_customer_to_restaurant_waitlist
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$KhJ9uirz6E4p2AaS5aJeuuYvHieYSW9yr3fSgHHMvFkUtjZ4wUh1u"], ["created_at", "2015-11-06 06:08:36.354804"], ["updated_at", "2015-11-06 06:08:36.354804"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.356946"], ["updated_at", "2015-11-06 06:08:36.356946"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$gNSUqZRjzEsEp1tKbe6kbuKmxnj5IOe6axP3eC5fN7jmtm1ggCeWO"], ["created_at", "2015-11-06 06:08:36.363877"], ["updated_at", "2015-11-06 06:08:36.363877"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["created_at", "2015-11-06 06:08:36.369180"], ["updated_at", "2015-11-06 06:08:36.369180"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$IAaK3x8NKT0lH9KV7ZxsauW59It7B.qOg/0eZoN5IhoDY8yjZy06i"], ["created_at", "2015-11-06 06:08:36.374446"], ["updated_at", "2015-11-06 06:08:36.374446"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.377008"], ["updated_at", "2015-11-06 06:08:36.377008"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$qqUuBN1ZhJDwz7Jz3xAUTOS5s4e0387G3pePvTZbf/GTyqsONmKzu"], ["created_at", "2015-11-06 06:08:36.381921"], ["updated_at", "2015-11-06 06:08:36.381921"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 2], ["rest_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-11-06 06:08:36.387969"], ["updated_at", "2015-11-06 06:08:36.387969"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 2], ["rest_id", 1]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WaitlistTest: test_position_in_2_restaurants
--------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$FUc55AR3noyf0UpI.SYIjua3swQ/q/kIee35771SiHPxtyLxldcQC"], ["created_at", "2015-11-06 06:08:36.402095"], ["updated_at", "2015-11-06 06:08:36.402095"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.404377"], ["updated_at", "2015-11-06 06:08:36.404377"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$.MoCIWSdDqZAzdZbm4kVte1dmIqSUPEvuyUrcqTLT.FwY4ZJhh4B2"], ["created_at", "2015-11-06 06:08:36.411032"], ["updated_at", "2015-11-06 06:08:36.411032"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["created_at", "2015-11-06 06:08:36.416250"], ["updated_at", "2015-11-06 06:08:36.416250"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$e7gd2bb8Mp0ztOwa4yRAS.ke7y66lptTisRN.gb6GPH7rW5OA3w36"], ["created_at", "2015-11-06 06:08:36.423884"], ["updated_at", "2015-11-06 06:08:36.423884"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.426974"], ["updated_at", "2015-11-06 06:08:36.426974"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$nzF49f3B2.3aeuJWyTeCuOAqPv5jL8E0uJrHCYVjaIWxJpwkZ6VdO"], ["created_at", "2015-11-06 06:08:36.434440"], ["updated_at", "2015-11-06 06:08:36.434440"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 2], ["rest_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-11-06 06:08:36.442457"], ["updated_at", "2015-11-06 06:08:36.442457"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 4], ["rest_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 4], ["rest_id", 1], ["people", 3], ["created_at", "2015-11-06 06:08:36.450017"], ["updated_at", "2015-11-06 06:08:36.450017"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 4], ["rest_id", 3]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 4], ["rest_id", 3], ["people", 3], ["created_at", "2015-11-06 06:08:36.457920"], ["updated_at", "2015-11-06 06:08:36.457920"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 2], ["rest_id", 3]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 2], ["rest_id", 3], ["people", 3], ["created_at", "2015-11-06 06:08:36.466409"], ["updated_at", "2015-11-06 06:08:36.466409"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mWaitlist Load (0.6ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-11-06 06:08:36.442457')  [["rest_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-11-06 06:08:36.466409')[0m  [["rest_id", 3]]
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 4]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-11-06 06:08:36.450017')[0m  [["rest_id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-11-06 06:08:36.457920')  [["rest_id", 3]]
  [1m[36mWaitlist Load (0.3ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["rest_id", 3]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------
WaitlistTest: test_no_rest_id
-----------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.4ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$aUeaboSR1lnDi9tty8QEHuMfG/8oUW2Pbar83bZmw95h0aARHCi4C"], ["created_at", "2015-11-06 06:08:36.488179"], ["updated_at", "2015-11-06 06:08:36.488179"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.491908"], ["updated_at", "2015-11-06 06:08:36.491908"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$EBWMBc/V0PC1iVFVAidvgezLQFI4EmVzY.yZQC5nYflAd.qJA7gXu"], ["created_at", "2015-11-06 06:08:36.499319"], ["updated_at", "2015-11-06 06:08:36.499319"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.4ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 3 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["created_at", "2015-11-06 06:08:36.503773"], ["updated_at", "2015-11-06 06:08:36.503773"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$rk4tdwnpFQxRFqGnTj.gvel1aZviAYq2UHiEyWZCXygIU/1UlKws6"], ["created_at", "2015-11-06 06:08:36.510089"], ["updated_at", "2015-11-06 06:08:36.510089"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.513047"], ["updated_at", "2015-11-06 06:08:36.513047"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$Fwq3CUIzRY1pb1EeFtjXKea7UJ9gXW5JI7bCqCUcMD3dLJCEYb78G"], ["created_at", "2015-11-06 06:08:36.519863"], ["updated_at", "2015-11-06 06:08:36.519863"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------
WaitlistTest: test_id_rest_id_is_invalid
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 1 LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$NaqFy61EFn65MjULMcmGT.u2xM9dGpR1WAGcf.Hd.d9D.3QidtoVC"], ["created_at", "2015-11-06 06:08:36.532023"], ["updated_at", "2015-11-06 06:08:36.532023"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.534984"], ["updated_at", "2015-11-06 06:08:36.534984"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$Bmth50IvTO1rxCmiL8PJiu8vc177dL5Azj4YNuRTsa0Oec.BK5wbW"], ["created_at", "2015-11-06 06:08:36.540217"], ["updated_at", "2015-11-06 06:08:36.540217"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["created_at", "2015-11-06 06:08:36.543820"], ["updated_at", "2015-11-06 06:08:36.543820"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$T9suu.DAhl89N9Qcg6wPmOGTGte0sia/9.6n04m5XBFHkD5NvNun6"], ["created_at", "2015-11-06 06:08:36.551762"], ["updated_at", "2015-11-06 06:08:36.551762"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.554087"], ["updated_at", "2015-11-06 06:08:36.554087"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$50JyEjR4ypczzQmRo78N/unbGrL4nLBhZv0Qd0G0hJi0V2sXtROpS"], ["created_at", "2015-11-06 06:08:36.558900"], ["updated_at", "2015-11-06 06:08:36.558900"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
----------------------------------------
WaitlistTest: test_id_cust_id_is_invalid
----------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.4ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$r22uS7Lf9/Tjh4j5ZI1DfeVdFFY.Ih9aOzYxkx4UKOJRCOPsZ8CQi"], ["created_at", "2015-11-06 06:08:36.578509"], ["updated_at", "2015-11-06 06:08:36.578509"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.581530"], ["updated_at", "2015-11-06 06:08:36.581530"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$LcbKNAm4fbzKq9j18XXVz.WwzmbCvnFAr8Af7FLvTOwZqMmmdDWZy"], ["created_at", "2015-11-06 06:08:36.588357"], ["updated_at", "2015-11-06 06:08:36.588357"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.3ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 3 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["created_at", "2015-11-06 06:08:36.592025"], ["updated_at", "2015-11-06 06:08:36.592025"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$cnEcCptNoBom2k23EPLfPOCycjOlap/ED5OKVVyuUzIMHG8oQDO8K"], ["created_at", "2015-11-06 06:08:36.597589"], ["updated_at", "2015-11-06 06:08:36.597589"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.599773"], ["updated_at", "2015-11-06 06:08:36.599773"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$4u8df4NX3JZf4.RpPnhDreL6x.h6GNiY.KoYQGb5dDwtG6Yirqo4."], ["created_at", "2015-11-06 06:08:36.604840"], ["updated_at", "2015-11-06 06:08:36.604840"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 2], ["rest_id", 1]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
WaitlistTest: test_delete_position_in_2_restaurants
---------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.4ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 1 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$Fm59zHK3yUJv1lp1j7v4xu0OfGUy5bru8snGTIE/FPg.hGmhJIxxC"], ["created_at", "2015-11-06 06:08:36.619931"], ["updated_at", "2015-11-06 06:08:36.619931"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.622150"], ["updated_at", "2015-11-06 06:08:36.622150"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$tUU9wqNtfS5T34vZvx10hespRow8X5rfcuRZbm5LGg/ner3wYG2MW"], ["created_at", "2015-11-06 06:08:36.627026"], ["updated_at", "2015-11-06 06:08:36.627026"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.3ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 3 LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["created_at", "2015-11-06 06:08:36.630492"], ["updated_at", "2015-11-06 06:08:36.630492"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$pt6Kz/sAxm1DUnYZ13iHou43307Jo0iY3dbYoufZeUe3sc5fuBVfK"], ["created_at", "2015-11-06 06:08:36.637077"], ["updated_at", "2015-11-06 06:08:36.637077"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.639404"], ["updated_at", "2015-11-06 06:08:36.639404"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$/vVKo6NQUvWJJ4cjVzND8ONfbfGiEdAU.3L6cJ7ctF.pxNsbp3LNO"], ["created_at", "2015-11-06 06:08:36.644609"], ["updated_at", "2015-11-06 06:08:36.644609"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 2], ["rest_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-11-06 06:08:36.650150"], ["updated_at", "2015-11-06 06:08:36.650150"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 4], ["rest_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 4], ["rest_id", 1], ["people", 3], ["created_at", "2015-11-06 06:08:36.654890"], ["updated_at", "2015-11-06 06:08:36.654890"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 4], ["rest_id", 3]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 4], ["rest_id", 3], ["people", 3], ["created_at", "2015-11-06 06:08:36.659546"], ["updated_at", "2015-11-06 06:08:36.659546"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 2], ["rest_id", 3]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 2], ["rest_id", 3], ["people", 3], ["created_at", "2015-11-06 06:08:36.673996"], ["updated_at", "2015-11-06 06:08:36.673996"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 2]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-11-06 06:08:36.650150')[0m  [["rest_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-11-06 06:08:36.673996')  [["rest_id", 3]]
  [1m[36mWaitlist Load (0.7ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 4]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-11-06 06:08:36.654890')  [["rest_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-11-06 06:08:36.659546')[0m  [["rest_id", 3]]
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.5ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["rest_id", 3]]
  [1m[35mWaitlist Load (0.5ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."id" = $1 LIMIT 1  [["id", 980190969]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "waitlists" WHERE "waitlists"."id" = $1  [["id", 980190969]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 2]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-11-06 06:08:36.673996')[0m  [["rest_id", 3]]
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 4]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-11-06 06:08:36.654890')[0m  [["rest_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-11-06 06:08:36.659546')  [["rest_id", 3]]
  [1m[36mWaitlist Load (0.4ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["rest_id", 3]]
  [1m[36mWaitlist Load (0.3ms)[0m  [1mSELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."id" = $1 LIMIT 1[0m  [["id", 980190971]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "waitlists" WHERE "waitlists"."id" = $1[0m  [["id", 980190971]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-11-06 06:08:36.673996')  [["rest_id", 3]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 4]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-11-06 06:08:36.654890')  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["rest_id", 3]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------------
WaitlistTest: test_cust_id_==_rest_id_able_to_waitlist_more_than_once
---------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.3ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$bY8iGbM2I4Xm1LcTYjid..lQkSTh8mFgZ9Id91QrQFZ51nrBBsEVi"], ["created_at", "2015-11-06 06:08:36.717101"], ["updated_at", "2015-11-06 06:08:36.717101"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.720337"], ["updated_at", "2015-11-06 06:08:36.720337"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$XOB7Z8da146VDGYSWFD4N.G.Y8frG64dL2Wk1xTtyTToUtwsLl62C"], ["created_at", "2015-11-06 06:08:36.726331"], ["updated_at", "2015-11-06 06:08:36.726331"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.5ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 3 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["created_at", "2015-11-06 06:08:36.730380"], ["updated_at", "2015-11-06 06:08:36.730380"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$V1sNawKRiZgvOrtreea5Z.usCJWjYF.EMWu7BceBNCsTTTKPMLzRW"], ["created_at", "2015-11-06 06:08:36.736746"], ["updated_at", "2015-11-06 06:08:36.736746"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.739230"], ["updated_at", "2015-11-06 06:08:36.739230"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$XFXkc3h99YaQ4/jDTt02C.li4dl/EaugNSL..ENMrj1UkVT5flLBy"], ["created_at", "2015-11-06 06:08:36.744640"], ["updated_at", "2015-11-06 06:08:36.744640"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "waitlists"
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 1], ["rest_id", 1], ["people", 3], ["created_at", "2015-11-06 06:08:36.751540"], ["updated_at", "2015-11-06 06:08:36.751540"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists"
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 1], ["rest_id", 1], ["people", 4], ["created_at", "2015-11-06 06:08:36.756506"], ["updated_at", "2015-11-06 06:08:36.756506"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "waitlists"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
WaitlistTest: test_position_if_deleted_2nd_place
------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$wTcf2n0jxDRZyiiY6HtKI.j.blU8U8e7yfFNflPC77bXjM8HExV0C"], ["created_at", "2015-11-06 06:08:36.767954"], ["updated_at", "2015-11-06 06:08:36.767954"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.771218"], ["updated_at", "2015-11-06 06:08:36.771218"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$qs3igaZfDXDsBYLI9yOebuS6hPVJpH.n6kH.OxuCq5XPNkq5UX6ua"], ["created_at", "2015-11-06 06:08:36.777168"], ["updated_at", "2015-11-06 06:08:36.777168"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["created_at", "2015-11-06 06:08:36.780105"], ["updated_at", "2015-11-06 06:08:36.780105"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$0fUOurmZpGy.VLdTKTF4te3sXWTh1H6m/8sE5Q4SKp/2CFQwyA4/y"], ["created_at", "2015-11-06 06:08:36.789205"], ["updated_at", "2015-11-06 06:08:36.789205"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.792138"], ["updated_at", "2015-11-06 06:08:36.792138"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$eT/mgzQ.Dc6yuO1PYWh4d.sOQS1/ceyOc5oT1C2RlCsMtRYsLc6pi"], ["created_at", "2015-11-06 06:08:36.799235"], ["updated_at", "2015-11-06 06:08:36.799235"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 2], ["rest_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-11-06 06:08:36.805250"], ["updated_at", "2015-11-06 06:08:36.805250"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 4], ["rest_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 4], ["rest_id", 1], ["people", 3], ["created_at", "2015-11-06 06:08:36.810069"], ["updated_at", "2015-11-06 06:08:36.810069"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 2]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-11-06 06:08:36.805250')  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 4]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-11-06 06:08:36.810069')  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."id" = $1 LIMIT 1  [["id", 980190976]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "waitlists" WHERE "waitlists"."id" = $1  [["id", 980190976]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mWaitlist Load (0.1ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 2]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-11-06 06:08:36.805250')[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 4]]
  [1m[36mWaitlist Load (0.3ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["rest_id", 1]]
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
WaitlistTest: test_position_if_deleted_1st_place
------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$8WILVM9vM6sIPTNpU.0YmOl1TetabNIs2AB/B3LreCLCK3Akzn7U."], ["created_at", "2015-11-06 06:08:36.829564"], ["updated_at", "2015-11-06 06:08:36.829564"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.833221"], ["updated_at", "2015-11-06 06:08:36.833221"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$SEbGFklPxrbcQVSCgyT7SehjQKWFPEf62sWStBcdzQSdUCzUrRuiK"], ["created_at", "2015-11-06 06:08:36.841183"], ["updated_at", "2015-11-06 06:08:36.841183"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["created_at", "2015-11-06 06:08:36.844645"], ["updated_at", "2015-11-06 06:08:36.844645"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$BZBpRyyfXNqpC9xezEdQ/evtrIkJRB9yGoESLBIbT7Zmbxkklh.bu"], ["created_at", "2015-11-06 06:08:36.849985"], ["updated_at", "2015-11-06 06:08:36.849985"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.852109"], ["updated_at", "2015-11-06 06:08:36.852109"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$o/qOITBIrvPVehqV/iFrl.NmyQR6JXaC.Dp1oq4rPgr/sLPsiHIay"], ["created_at", "2015-11-06 06:08:36.857906"], ["updated_at", "2015-11-06 06:08:36.857906"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 2], ["rest_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-11-06 06:08:36.863550"], ["updated_at", "2015-11-06 06:08:36.863550"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 4], ["rest_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 4], ["rest_id", 1], ["people", 3], ["created_at", "2015-11-06 06:08:36.869839"], ["updated_at", "2015-11-06 06:08:36.869839"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 2]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-11-06 06:08:36.863550')  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 4]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-11-06 06:08:36.869839')  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["rest_id", 1]]
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."id" = $1 LIMIT 1  [["id", 980190977]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "waitlists" WHERE "waitlists"."id" = $1  [["id", 980190977]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mWaitlist Load (0.1ms)[0m  SELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC  [["cust_id", 2]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 4]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-11-06 06:08:36.869839')  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["rest_id", 1]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------
WaitlistTest: test_position_simple
----------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 1 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 1], ["name", "rest 1"], ["email", "fendyonel@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$mnT8FJbTRZquVb4Ysuo/rOwS62HOWxulhixBrz/TrnycjBziOBT8G"], ["created_at", "2015-11-06 06:08:36.887930"], ["updated_at", "2015-11-06 06:08:36.887930"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.890175"], ["updated_at", "2015-11-06 06:08:36.890175"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$nFxjlhUJVSHl6JhSZANlRefpS67ezDIFo4q204P7JFHjo8W2y77DK"], ["created_at", "2015-11-06 06:08:36.895474"], ["updated_at", "2015-11-06 06:08:36.895474"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 3 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "address", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 3], ["address", "1893 Berkeley Avenue"], ["created_at", "2015-11-06 06:08:36.898499"], ["updated_at", "2015-11-06 06:08:36.898499"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendyonel2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 3], ["name", "rest 2"], ["email", "fendyonel2@gmail.com"], ["rest", "t"], ["encrypted_password", "$2a$04$TTxcrikAiWLV2bwsfKx/QOGE7u67G9z6FboCKFZkdYLO4TxQKr5Ui"], ["created_at", "2015-11-06 06:08:36.904535"], ["updated_at", "2015-11-06 06:08:36.904535"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.906703"], ["updated_at", "2015-11-06 06:08:36.906703"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 4], ["name", "user 2"], ["email", "atidjenad2@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$9q2npOYBHbmnZR70hJO1Lu7vZpeRWZRFCEm8DWfY0mwf0U4AFuZZ."], ["created_at", "2015-11-06 06:08:36.911536"], ["updated_at", "2015-11-06 06:08:36.911536"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 2], ["rest_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 2], ["rest_id", 1], ["people", 3], ["created_at", "2015-11-06 06:08:36.918597"], ["updated_at", "2015-11-06 06:08:36.918597"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 4], ["rest_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 4], ["rest_id", 1], ["people", 3], ["created_at", "2015-11-06 06:08:36.923595"], ["updated_at", "2015-11-06 06:08:36.923595"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 2]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-11-06 06:08:36.918597')  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["cust_id", 4]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."rest_id" = $1 AND (created_at < '2015-11-06 06:08:36.923595')  [["rest_id", 1]]
  [1m[36mWaitlist Load (0.2ms)[0m  [1mSELECT "waitlists".* FROM "waitlists" WHERE "waitlists"."rest_id" = $1  ORDER BY "waitlists"."created_at" ASC[0m  [["rest_id", 1]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------
HourTest: test_successful_new_hour
----------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mHour Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 1 AND "hours"."day_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "hours" ("open", "close", "rest_id", "day_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["open", "2000-01-01 10:11:00.000000"], ["close", "2000-01-01 11:11:00.000000"], ["rest_id", 1], ["day_id", 1], ["created_at", "2015-11-06 06:08:36.933908"], ["updated_at", "2015-11-06 06:08:36.933908"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------
HourTest: test_not_successful_no_rest_id
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mHour Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" IS NULL AND "hours"."day_id" = 3) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------------------
HourTest: test_not_successful_no_day_id_out_of_range
----------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mHour Exists (0.3ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 1 AND "hours"."day_id" = 8) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mHour Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 1 AND "hours"."day_id" = 0) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mHour Exists (0.3ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 1 AND "hours"."day_id" IS NULL) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------
HourTest: test_not_unique_day_rest_id_pair
------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mHour Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 1 AND "hours"."day_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "hours" ("open", "close", "rest_id", "day_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["open", "2000-01-01 10:11:00.000000"], ["close", "2000-01-01 11:11:00.000000"], ["rest_id", 1], ["day_id", 1], ["created_at", "2015-11-06 06:08:36.948607"], ["updated_at", "2015-11-06 06:08:36.948607"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mHour Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 1 AND "hours"."day_id" = 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------
HourTest: test_open_hour_>_close_hour
-------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mHour Exists (0.3ms)[0m  SELECT  1 AS one FROM "hours" WHERE ("hours"."rest_id" = 1 AND "hours"."day_id" = 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------------------------------
WaitlistRoutesTest: test_restaurant_put_multiple_waitlist_success
-----------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$gcWnAj7akAq0GMAhfUrznODkLmEgN21O1pMEdyWeW0.09/7PxzGr2"], ["rest", "f"], ["created_at", "2015-11-06 06:08:36.960991"], ["updated_at", "2015-11-06 06:08:36.960991"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190966], ["phone_number", 0], ["created_at", "2015-11-06 06:08:36.963602"], ["updated_at", "2015-11-06 06:08:36.963602"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$b4O/ovBo.lrx4x.mELnDweT6w87nT3lkhEOXyRpg6vDs.GjVA/mHy"], ["rest", "t"], ["created_at", "2015-11-06 06:08:36.971887"], ["updated_at", "2015-11-06 06:08:36.971887"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.3ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 980190967 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190967], ["created_at", "2015-11-06 06:08:36.975041"], ["updated_at", "2015-11-06 06:08:36.975041"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.4ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE ("restaurants"."user_id" = 980190967 AND "restaurants"."id" != 518579386) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:36 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "test1@gmail.com"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-11-06 06:08:36.987448"], ["current_sign_in_at", "2015-11-06 06:08:36.987448"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-11-06 06:08:36.988352"], ["id", 980190966]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 9ms (ActiveRecord: 1.3ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:36 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190966]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.7ms)
Completed 200 OK in 3ms (Views: 1.6ms | ActiveRecord: 0.3ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-11-05 22:08:36 -0800
Processing by Devise::SessionsController#destroy as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190966]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 0.6ms)
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test2@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "test2@gmail.com"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-11-06 06:08:37.012883"], ["current_sign_in_at", "2015-11-06 06:08:37.012883"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-11-06 06:08:37.013867"], ["id", 980190967]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 10ms (ActiveRecord: 1.2ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190967]]
  [1m[36mRestaurant Load (0.5ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."user_id" = $1 LIMIT 1[0m  [["user_id", 980190967]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (1.3ms)
Completed 200 OK in 7ms (Views: 2.9ms | ActiveRecord: 1.4ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"people"=>"5", "rest_id"=>"980190967"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190967]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190967]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190967]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190967]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 980190967], ["rest_id", 980190967], ["people", 5], ["created_at", "2015-11-06 06:08:37.034376"], ["updated_at", "2015-11-06 06:08:37.034376"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/waitlists
Completed 302 Found in 6ms (ActiveRecord: 0.9ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"people"=>"10", "rest_id"=>"980190967"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190967]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190967]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190967]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190967]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 980190967], ["rest_id", 980190967], ["people", 10], ["created_at", "2015-11-06 06:08:37.043739"], ["updated_at", "2015-11-06 06:08:37.043739"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/waitlists
Completed 302 Found in 7ms (ActiveRecord: 1.4ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1  [["cust_id", 980190967]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------
WaitlistRoutesTest: test_restaurant_delete_waitlist_success
-----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$Vkq7myPlgDTG9DiDcJinl.4FjGs3fEDhW8G4GXlCZlZii5B790wZu"], ["rest", "f"], ["created_at", "2015-11-06 06:08:37.055128"], ["updated_at", "2015-11-06 06:08:37.055128"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190968], ["phone_number", 0], ["created_at", "2015-11-06 06:08:37.057535"], ["updated_at", "2015-11-06 06:08:37.057535"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$2uaWztxRDl5/16jmRrFzMuAPoLmrga3QGVnpDxBYfwcGiKlpi1nle"], ["rest", "t"], ["created_at", "2015-11-06 06:08:37.064768"], ["updated_at", "2015-11-06 06:08:37.064768"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 980190969 LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["user_id", 980190969], ["created_at", "2015-11-06 06:08:37.080187"], ["updated_at", "2015-11-06 06:08:37.080187"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE ("restaurants"."user_id" = 980190969 AND "restaurants"."id" != 518579387) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test1@gmail.com"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-11-06 06:08:37.092420"], ["current_sign_in_at", "2015-11-06 06:08:37.092420"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-11-06 06:08:37.093299"], ["id", 980190968]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 9ms (ActiveRecord: 1.1ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190968]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.7ms)
Completed 200 OK in 4ms (Views: 1.6ms | ActiveRecord: 0.3ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by Devise::SessionsController#destroy as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190968]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 0.6ms)
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test2@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test2@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-11-06 06:08:37.117717"], ["current_sign_in_at", "2015-11-06 06:08:37.117717"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-11-06 06:08:37.118637"], ["id", 980190969]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 9ms (ActiveRecord: 1.3ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190969]]
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."user_id" = $1 LIMIT 1  [["user_id", 980190969]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (0.7ms)
Completed 200 OK in 4ms (Views: 1.5ms | ActiveRecord: 0.5ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"people"=>"5", "rest_id"=>"980190969"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190969]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190969]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190969]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190969]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 980190969], ["rest_id", 980190969], ["people", 5], ["created_at", "2015-11-06 06:08:37.134611"], ["updated_at", "2015-11-06 06:08:37.134611"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/waitlists
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1  [["cust_id", 980190969]]
Started DELETE "/waitlists/980190983" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by WaitlistsController#destroy as HTML
  Parameters: {"id"=>"980190983"}
  [1m[36mWaitlist Load (0.3ms)[0m  [1mSELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."id" = $1 LIMIT 1[0m  [["id", 980190983]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "waitlists" WHERE "waitlists"."id" = $1[0m  [["id", 980190983]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/waitlists
Completed 302 Found in 3ms (ActiveRecord: 0.8ms)
  [1m[36mWaitlist Load (0.3ms)[0m  [1mSELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1[0m  [["cust_id", 980190969]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------------
WaitlistRoutesTest: test_user_can_waitlist_after_sign_in
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$nn6DxshA3A4rjVLyrGZrOun/UyDFgBX4R6NVGZJ2bxdZrZpijMnWq"], ["rest", "f"], ["created_at", "2015-11-06 06:08:37.151055"], ["updated_at", "2015-11-06 06:08:37.151055"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190970], ["phone_number", 0], ["created_at", "2015-11-06 06:08:37.153331"], ["updated_at", "2015-11-06 06:08:37.153331"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$smYdzUw/slDsOLrnnYTddu/o65E32jg/Bp5RJKSpkbBPzf2Utq.e."], ["rest", "t"], ["created_at", "2015-11-06 06:08:37.159900"], ["updated_at", "2015-11-06 06:08:37.159900"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.3ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 980190971 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190971], ["created_at", "2015-11-06 06:08:37.162991"], ["updated_at", "2015-11-06 06:08:37.162991"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.6ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE ("restaurants"."user_id" = 980190971 AND "restaurants"."id" != 518579388) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "test1@gmail.com"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-11-06 06:08:37.176683"], ["current_sign_in_at", "2015-11-06 06:08:37.176683"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-11-06 06:08:37.177830"], ["id", 980190970]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 11ms (ActiveRecord: 1.2ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190970]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.7ms)
Completed 200 OK in 4ms (Views: 1.9ms | ActiveRecord: 0.3ms)
Started GET "/waitlists_new" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by WaitlistsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190970]]
  Rendered waitlists/new.html.erb within layouts/application (1.5ms)
Completed 200 OK in 4ms (Views: 2.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------------
WaitlistRoutesTest: test_customer_delete_waitlist_success
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$mIbH8ObSChIzkgpbIxI99Og.MCcp6crH17NxW9UWSpiEAuzhvCz.i"], ["rest", "f"], ["created_at", "2015-11-06 06:08:37.205629"], ["updated_at", "2015-11-06 06:08:37.205629"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190972], ["phone_number", 0], ["created_at", "2015-11-06 06:08:37.208282"], ["updated_at", "2015-11-06 06:08:37.208282"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$2Pizz8pHFc/rSzxEooy61Owg9Kob55rV37iTI6hFJTNiGM3f9QIs."], ["rest", "t"], ["created_at", "2015-11-06 06:08:37.214948"], ["updated_at", "2015-11-06 06:08:37.214948"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.3ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 980190973 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190973], ["created_at", "2015-11-06 06:08:37.217971"], ["updated_at", "2015-11-06 06:08:37.217971"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.3ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE ("restaurants"."user_id" = 980190973 AND "restaurants"."id" != 518579389) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "test1@gmail.com"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-11-06 06:08:37.227670"], ["current_sign_in_at", "2015-11-06 06:08:37.227670"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-11-06 06:08:37.228977"], ["id", 980190972]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 10ms (ActiveRecord: 1.0ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190972]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (1.0ms)
Completed 200 OK in 5ms (Views: 2.3ms | ActiveRecord: 0.4ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"people"=>"5", "rest_id"=>"980190973"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190972]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190972]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190973]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190973]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190972]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 980190972], ["rest_id", 980190973]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 980190972], ["rest_id", 980190973], ["people", 5], ["created_at", "2015-11-06 06:08:37.253024"], ["updated_at", "2015-11-06 06:08:37.253024"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/waitlists
Completed 302 Found in 9ms (ActiveRecord: 1.6ms)
  [1m[35mWaitlist Load (0.4ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1  [["cust_id", 980190972]]
Started DELETE "/waitlists/980190984" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by WaitlistsController#destroy as HTML
  Parameters: {"id"=>"980190984"}
  [1m[36mWaitlist Load (0.4ms)[0m  [1mSELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."id" = $1 LIMIT 1[0m  [["id", 980190984]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "waitlists" WHERE "waitlists"."id" = $1[0m  [["id", 980190984]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/waitlists
Completed 302 Found in 3ms (ActiveRecord: 0.9ms)
  [1m[36mWaitlist Load (0.5ms)[0m  [1mSELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1[0m  [["cust_id", 980190999]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------------------------------
WaitlistRoutesTest: test_customer_waitlist_multiple_rests_success
-----------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$myFSHTDrUi5iQcg9eGSuOePaEdtTe85Y4K8.AYwCZYpLK.nBhh9x2"], ["rest", "f"], ["created_at", "2015-11-06 06:08:37.269248"], ["updated_at", "2015-11-06 06:08:37.269248"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190974], ["phone_number", 0], ["created_at", "2015-11-06 06:08:37.271524"], ["updated_at", "2015-11-06 06:08:37.271524"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$F1Qles77xDnuKp4bZcwdye1GIXjHX0HCt3vYqusBNDW6Pg7ljBn4u"], ["rest", "t"], ["created_at", "2015-11-06 06:08:37.278045"], ["updated_at", "2015-11-06 06:08:37.278045"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.3ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 980190975 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190975], ["created_at", "2015-11-06 06:08:37.281006"], ["updated_at", "2015-11-06 06:08:37.281006"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.3ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE ("restaurants"."user_id" = 980190975 AND "restaurants"."id" != 518579390) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "test1@gmail.com"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-11-06 06:08:37.290692"], ["current_sign_in_at", "2015-11-06 06:08:37.290692"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-11-06 06:08:37.291610"], ["id", 980190974]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 9ms (ActiveRecord: 0.9ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190974]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.9ms)
Completed 200 OK in 5ms (Views: 1.9ms | ActiveRecord: 1.0ms)
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test3@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test3"], ["email", "test3@gmail.com"], ["encrypted_password", "$2a$04$xXBVpZJuCUr4utAxmCdcS.ix8dgWIS0DobcHV9gxP3XNK4A.9UXcC"], ["rest", "t"], ["created_at", "2015-11-06 06:08:37.307279"], ["updated_at", "2015-11-06 06:08:37.307279"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.3ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 980190976 LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190976], ["created_at", "2015-11-06 06:08:37.310383"], ["updated_at", "2015-11-06 06:08:37.310383"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.3ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE ("restaurants"."user_id" = 980190976 AND "restaurants"."id" != 518579391) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/waitlists" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"cust_id"=>"980190974", "people"=>"5", "rest_id"=>"980190975"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190974]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190974]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190975]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190975]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190974]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 980190974], ["rest_id", 980190975]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 980190974], ["rest_id", 980190975], ["people", 5], ["created_at", "2015-11-06 06:08:37.322701"], ["updated_at", "2015-11-06 06:08:37.322701"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/waitlists
Completed 302 Found in 8ms (ActiveRecord: 1.5ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"cust_id"=>"980190974", "people"=>"5", "rest_id"=>"980190976"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190974]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190974]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190976]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190976]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190974]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 980190974], ["rest_id", 980190976]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 980190974], ["rest_id", 980190976], ["people", 5], ["created_at", "2015-11-06 06:08:37.332388"], ["updated_at", "2015-11-06 06:08:37.332388"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/waitlists
Completed 302 Found in 8ms (ActiveRecord: 1.5ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1  [["cust_id", 980190974]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------
WaitlistRoutesTest: test_customer_waitlist_fail
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$17OUBOhigpl1yHr3r1EEMeN3OcMFtTzXXbcgmHfeDoaF5e2iLEz7."], ["rest", "f"], ["created_at", "2015-11-06 06:08:37.342571"], ["updated_at", "2015-11-06 06:08:37.342571"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190977], ["phone_number", 0], ["created_at", "2015-11-06 06:08:37.345082"], ["updated_at", "2015-11-06 06:08:37.345082"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$GkhLYjd0HBaVEoFPTxg4ze2AdBVXCp1BgOwZaFCBdkX.EYTpSB7ti"], ["rest", "t"], ["created_at", "2015-11-06 06:08:37.357776"], ["updated_at", "2015-11-06 06:08:37.357776"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 980190978 LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["user_id", 980190978], ["created_at", "2015-11-06 06:08:37.361585"], ["updated_at", "2015-11-06 06:08:37.361585"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE ("restaurants"."user_id" = 980190978 AND "restaurants"."id" != 518579392) LIMIT 1[0m
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test1@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-11-06 06:08:37.373900"], ["current_sign_in_at", "2015-11-06 06:08:37.373900"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-11-06 06:08:37.375121"], ["id", 980190977]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 10ms (ActiveRecord: 1.0ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190977]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.8ms)
Completed 200 OK in 5ms (Views: 1.7ms | ActiveRecord: 0.3ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"cust_id"=>"980190977", "people"=>"5", "rest_id"=>"980190978"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190977]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190977]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190978]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190978]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190977]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 980190977], ["rest_id", 980190978]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["cust_id", 980190977], ["rest_id", 980190978], ["people", 5], ["created_at", "2015-11-06 06:08:37.395029"], ["updated_at", "2015-11-06 06:08:37.395029"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/waitlists
Completed 302 Found in 7ms (ActiveRecord: 1.4ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "waitlists"[0m
Started POST "/waitlists" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"cust_id"=>"980190977", "people"=>"10", "rest_id"=>"980190978"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190977]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190977]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190978]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190978]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190977]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2[0m  [["cust_id", 980190977], ["rest_id", 980190978]]
Redirected to http://www.example.com/waitlists
Completed 302 Found in 5ms (ActiveRecord: 0.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "waitlists"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------
WaitlistRoutesTest: test_restaurant_put_waitlist_fail
-----------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$OsNsFW2qgPsSrqr0GgJ37Otn9a1yFQrEBHuqY.iGmfoMT9W7ZAUNu"], ["rest", "f"], ["created_at", "2015-11-06 06:08:37.414403"], ["updated_at", "2015-11-06 06:08:37.414403"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190979], ["phone_number", 0], ["created_at", "2015-11-06 06:08:37.418422"], ["updated_at", "2015-11-06 06:08:37.418422"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$fnLQWkPWzTPEIQghBNoMlefsnjv2Ola7bP10W7TKYjb6gI.3jdzNS"], ["rest", "t"], ["created_at", "2015-11-06 06:08:37.434175"], ["updated_at", "2015-11-06 06:08:37.434175"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 980190980 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["user_id", 980190980], ["created_at", "2015-11-06 06:08:37.437625"], ["updated_at", "2015-11-06 06:08:37.437625"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE ("restaurants"."user_id" = 980190980 AND "restaurants"."id" != 518579393) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test1@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-11-06 06:08:37.448951"], ["current_sign_in_at", "2015-11-06 06:08:37.448951"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-11-06 06:08:37.450290"], ["id", 980190979]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 12ms (ActiveRecord: 1.1ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190979]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.6ms)
Completed 200 OK in 3ms (Views: 1.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test3@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test3"], ["email", "test3@gmail.com"], ["encrypted_password", "$2a$04$E4OZOsjsAprBFfTZF4kwBO8R.YRD3rBZ.CKnmpv.MIAhpXj330xtK"], ["rest", "t"], ["created_at", "2015-11-06 06:08:37.468544"], ["updated_at", "2015-11-06 06:08:37.468544"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 980190981 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["user_id", 980190981], ["created_at", "2015-11-06 06:08:37.473381"], ["updated_at", "2015-11-06 06:08:37.473381"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE ("restaurants"."user_id" = 980190981 AND "restaurants"."id" != 518579394) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by Devise::SessionsController#destroy as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190979]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 5ms (ActiveRecord: 0.6ms)
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test2@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "test2@gmail.com"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-11-06 06:08:37.491059"], ["current_sign_in_at", "2015-11-06 06:08:37.491059"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-11-06 06:08:37.491898"], ["id", 980190980]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 8ms (ActiveRecord: 0.9ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190980]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."user_id" = $1 LIMIT 1[0m  [["user_id", 980190980]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (1.2ms)
Completed 200 OK in 6ms (Views: 2.6ms | ActiveRecord: 0.7ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"people"=>"5", "rest_id"=>"980190981"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190980]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190980]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190981]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190981]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190980]]
Redirected to http://www.example.com/waitlists
Completed 302 Found in 5ms (ActiveRecord: 0.7ms)
  [1m[36mWaitlist Load (0.3ms)[0m  [1mSELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1[0m  [["cust_id", 980190980]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
WaitlistRoutesTest: test_user_unable_to_waitlist_before_sign_in
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$r0rbDQmsN/bSEb.uCngX0.x6w7QJeMkbkP3S1ot1lAdIkdAiIET4C"], ["rest", "f"], ["created_at", "2015-11-06 06:08:37.520489"], ["updated_at", "2015-11-06 06:08:37.520489"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190982], ["phone_number", 0], ["created_at", "2015-11-06 06:08:37.522719"], ["updated_at", "2015-11-06 06:08:37.522719"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$nQM/DnxvXWqim793u2N3ueC8N4sGbVh0E8j5vG0Kf1M.UTFuh6QAG"], ["rest", "t"], ["created_at", "2015-11-06 06:08:37.529247"], ["updated_at", "2015-11-06 06:08:37.529247"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.3ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 980190983 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190983], ["created_at", "2015-11-06 06:08:37.532283"], ["updated_at", "2015-11-06 06:08:37.532283"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.3ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE ("restaurants"."user_id" = 980190983 AND "restaurants"."id" != 518579395) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "test1@gmail.com"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-11-06 06:08:37.541930"], ["current_sign_in_at", "2015-11-06 06:08:37.541930"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-11-06 06:08:37.542826"], ["id", 980190982]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 10ms (ActiveRecord: 0.9ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190982]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.9ms)
Completed 200 OK in 5ms (Views: 2.2ms | ActiveRecord: 0.4ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by Devise::SessionsController#destroy as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190982]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 5ms (ActiveRecord: 0.6ms)
Started GET "/waitlists_new" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by WaitlistsController#new as HTML
Redirected to http://www.example.com/login
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
WaitlistRoutesTest: test_customer_waitlist_success
--------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$LILlQHTm9kQ./pPWLuW2ZOlcOPdXzrR5VNJNGWI4RuVLADvYN1bkK"], ["rest", "f"], ["created_at", "2015-11-06 06:08:37.582340"], ["updated_at", "2015-11-06 06:08:37.582340"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190984], ["phone_number", 0], ["created_at", "2015-11-06 06:08:37.584980"], ["updated_at", "2015-11-06 06:08:37.584980"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$FpFLFwSCw8NfEjmLDmoNI.ydFBHOgm5LEFy8tv4Z6fB1pprJTPe8i"], ["rest", "t"], ["created_at", "2015-11-06 06:08:37.591959"], ["updated_at", "2015-11-06 06:08:37.591959"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.3ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 980190985 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 980190985], ["created_at", "2015-11-06 06:08:37.594966"], ["updated_at", "2015-11-06 06:08:37.594966"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.3ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE ("restaurants"."user_id" = 980190985 AND "restaurants"."id" != 518579396) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "test1@gmail.com"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-11-06 06:08:37.607136"], ["current_sign_in_at", "2015-11-06 06:08:37.607136"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-11-06 06:08:37.608723"], ["id", 980190984]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 13ms (ActiveRecord: 1.1ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190984]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.9ms)
Completed 200 OK in 5ms (Views: 2.1ms | ActiveRecord: 0.4ms)
Started POST "/waitlists_new" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"cust_id"=>"980190984", "people"=>"5", "rest_id"=>"980190985"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190984]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190984]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190985]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190985]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190984]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "waitlists" WHERE "waitlists"."cust_id" = $1 AND "waitlists"."rest_id" = $2  [["cust_id", 980190984], ["rest_id", 980190985]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 980190984], ["rest_id", 980190985], ["people", 5], ["created_at", "2015-11-06 06:08:37.628743"], ["updated_at", "2015-11-06 06:08:37.628743"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/waitlists
Completed 302 Found in 7ms (ActiveRecord: 1.4ms)
  [1m[35mWaitlist Load (0.3ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1  [["cust_id", 980190984]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
WaitlistRoutesTest: test_restaurant_put_waitlist_success
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'test1@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "test1"], ["email", "test1@gmail.com"], ["encrypted_password", "$2a$04$Yj/0U2ddgmWUdrTInltC0ugBnA0iYhIqGlKTqyFpL0NUYrwee8RJO"], ["rest", "f"], ["created_at", "2015-11-06 06:08:37.638253"], ["updated_at", "2015-11-06 06:08:37.638253"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190986], ["phone_number", 0], ["created_at", "2015-11-06 06:08:37.640572"], ["updated_at", "2015-11-06 06:08:37.640572"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'test2@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "test2"], ["email", "test2@gmail.com"], ["encrypted_password", "$2a$04$7uRflaaoXtw2rZYj0rErb.i52pPc5npbRzfl7YBTs93.7X/7nHebC"], ["rest", "t"], ["created_at", "2015-11-06 06:08:37.647409"], ["updated_at", "2015-11-06 06:08:37.647409"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 980190987 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["user_id", 980190987], ["created_at", "2015-11-06 06:08:37.650558"], ["updated_at", "2015-11-06 06:08:37.650558"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE ("restaurants"."user_id" = 980190987 AND "restaurants"."id" != 518579397) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test1@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test1@gmail.com"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-11-06 06:08:37.660198"], ["current_sign_in_at", "2015-11-06 06:08:37.660198"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-11-06 06:08:37.661185"], ["id", 980190986]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 9ms (ActiveRecord: 0.8ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190986]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.7ms)
Completed 200 OK in 4ms (Views: 1.6ms | ActiveRecord: 0.3ms)
Started DELETE "/users/sign_out" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by Devise::SessionsController#destroy as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190986]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 0.6ms)
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"test2@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "test2@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-11-06 06:08:37.684562"], ["current_sign_in_at", "2015-11-06 06:08:37.684562"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-11-06 06:08:37.685767"], ["id", 980190987]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 10ms (ActiveRecord: 0.9ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190987]]
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."user_id" = $1 LIMIT 1  [["user_id", 980190987]]
  Rendered dynamic_pages/profile-resto.html.erb within layouts/application (0.7ms)
Completed 200 OK in 5ms (Views: 1.5ms | ActiveRecord: 0.5ms)
Started POST "/waitlists" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by WaitlistsController#create as HTML
  Parameters: {"waitlist"=>{"people"=>"5", "rest_id"=>"980190987"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190987]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190987]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190987]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190987]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "waitlists" ("cust_id", "rest_id", "people", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["cust_id", 980190987], ["rest_id", 980190987], ["people", 5], ["created_at", "2015-11-06 06:08:37.703768"], ["updated_at", "2015-11-06 06:08:37.703768"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/waitlists
Completed 302 Found in 6ms (ActiveRecord: 1.1ms)
  [1m[35mWaitlist Load (0.2ms)[0m  SELECT  "waitlists".* FROM "waitlists" WHERE "waitlists"."cust_id" = $1  ORDER BY "waitlists"."id" ASC LIMIT 1  [["cust_id", 980190987]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------
RestaurantTest: test_address
----------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mRestaurant Exists (0.3ms)[0m  SELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 34 LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "restaurants" ("description", "price", "address", "rest_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["description", "123"], ["price", 123], ["address", "123"], ["rest_type", "Italian"], ["user_id", 34], ["created_at", "2015-11-06 06:08:37.711706"], ["updated_at", "2015-11-06 06:08:37.711706"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRestaurant Load (0.3ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1[0m  [["id", 518579398]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------
RestaurantTest: test_count
--------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 34 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("description", "price", "address", "rest_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["description", "123"], ["price", 123], ["address", "123"], ["rest_type", "Italian"], ["user_id", 34], ["created_at", "2015-11-06 06:08:37.716777"], ["updated_at", "2015-11-06 06:08:37.716777"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRestaurant Load (0.3ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 518579399]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE ("restaurants"."user_id" = 34 AND "restaurants"."id" != 518579399) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "restaurants" WHERE "restaurants"."id" = $1  [["id", 518579399]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------
RestaurantTest: test_user_id
----------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mRestaurant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."user_id" = 34 LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "restaurants" ("description", "price", "address", "rest_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["description", "123"], ["price", 123], ["address", "123"], ["rest_type", "Italian"], ["user_id", 34], ["created_at", "2015-11-06 06:08:37.728382"], ["updated_at", "2015-11-06 06:08:37.728382"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRestaurant Load (0.2ms)[0m  SELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT 1  [["id", 518579400]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------
UserTest: test_No_Password
--------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------
UserTest: test_Email_regex_bad
------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'userexamplecom' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@examplecom' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------
UserTest: test_duplicate_name
-----------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "Example User"], ["email", "user@example.com"], ["encrypted_password", "$2a$04$3OaObNd8U26GpBiKO9RK3.vNFmyGDckhKPIu9cyXvGBlc3Q..UNAO"], ["rest", "f"], ["created_at", "2015-11-06 06:08:37.759651"], ["updated_at", "2015-11-06 06:08:37.759651"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user1@example.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "Example User"], ["email", "user1@example.com"], ["encrypted_password", "$2a$04$nZBXg.64rELQsxOGr4cIBeCucSb3YhJLTxl1ivd3IcU1lT177fGwi"], ["rest", "f"], ["created_at", "2015-11-06 06:08:37.763102"], ["updated_at", "2015-11-06 06:08:37.763102"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------
UserTest: test_No_Email
-----------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------
UserTest: test_Correct_login
----------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "Example User"], ["email", "user@example.com"], ["encrypted_password", "$2a$04$vHt.Tel3jG0Z0Qk58SWyf.GcO7oTizJIaODNAP3mmCuW95qcWL2Bq"], ["rest", "f"], ["created_at", "2015-11-06 06:08:37.776161"], ["updated_at", "2015-11-06 06:08:37.776161"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------
UserTest: test_No_Name
----------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", ""], ["email", "user@example.com"], ["encrypted_password", "$2a$04$q6CruHBLIs5N05kWNaBI3u16YcUNc/Azi9G4qT7EdVxvUjd17cvFK"], ["rest", "f"], ["created_at", "2015-11-06 06:08:37.783926"], ["updated_at", "2015-11-06 06:08:37.783926"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------
UserTest: test_duplicate_email
------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "Example User"], ["email", "user@example.com"], ["encrypted_password", "$2a$04$mTwd1Ywf.0pfYr0fPRJiOem0XNwj8yjFPqQGIPKXtdc74oFxKbgYO"], ["rest", "f"], ["created_at", "2015-11-06 06:08:37.792586"], ["updated_at", "2015-11-06 06:08:37.792586"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
UserTest: test_duplicate_different_case_email
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Example User"], ["email", "user@example.com"], ["encrypted_password", "$2a$04$R2QuLZAQEhW/zDMono2CyespziJ.xuc2ePAJ/1DC4wBtsB12rlyzu"], ["rest", "f"], ["created_at", "2015-11-06 06:08:37.814138"], ["updated_at", "2015-11-06 06:08:37.814138"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------
UserTest: test_password_<_8
---------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------
UserTest: test_No_Rest
----------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------
UserTest: test_duplicate_password
---------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "Example User"], ["email", "user@example.com"], ["encrypted_password", "$2a$04$1cXYepZlClR5xIS4Oad7dOdfT9W8kSe37ICZydvdGgXezkPvB1wJe"], ["rest", "f"], ["created_at", "2015-11-06 06:08:37.841980"], ["updated_at", "2015-11-06 06:08:37.841980"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user2@example.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "Example User2"], ["email", "user2@example.com"], ["encrypted_password", "$2a$04$O6CmWIzqsiiwyCIEfcIcK.RWMVLBnH1qNi2tXtnpSJQIiT2NdMSfm"], ["rest", "f"], ["created_at", "2015-11-06 06:08:37.846171"], ["updated_at", "2015-11-06 06:08:37.846171"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------
UserTest: test_Password_don't_match
-----------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@example.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
UsersIntegrationTest: test_sign_up_rest_failure_no_email
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:37.859892"], ["updated_at", "2015-11-06 06:08:37.859892"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$DlP3LaNkScp51Lj2tvfJgOXD3MwHkxwwj1piuhrHMxJYB5jzKjXgG"], ["created_at", "2015-11-06 06:08:37.865206"], ["updated_at", "2015-11-06 06:08:37.865206"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "customers"
Started POST "/create-restaurant" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/signup-restaurant
Completed 302 Found in 6ms (ActiveRecord: 0.3ms)
Started GET "/signup-restaurant" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by Users::RegistrationsController#new_rest as HTML
  Rendered users/registrations/new_rest.html.erb within layouts/application (4.1ms)
Completed 200 OK in 17ms (Views: 16.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------------------------
UsersIntegrationTest: test_sign_up_rest_failure_password_don't_match
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:37.908464"], ["updated_at", "2015-11-06 06:08:37.908464"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$WsIEAxZd5nkdx7p3c1.DJe.PIa.S/zh0jPdZAMthz1.fwHMyiqbd6"], ["created_at", "2015-11-06 06:08:37.923902"], ["updated_at", "2015-11-06 06:08:37.923902"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Started POST "/create-restaurant" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"user@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/signup-restaurant
Completed 302 Found in 8ms (ActiveRecord: 1.0ms)
Started GET "/signup-restaurant" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by Users::RegistrationsController#new_rest as HTML
  Rendered users/registrations/new_rest.html.erb within layouts/application (1.1ms)
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------------
UsersIntegrationTest: test_edit_user's_name_successfully
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:37.951436"], ["updated_at", "2015-11-06 06:08:37.951436"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$JAyOqHOte3vSTXimRIeieey6KFtKoUITbeO9KQY.Nl5utAzu6HjNe"], ["created_at", "2015-11-06 06:08:37.958232"], ["updated_at", "2015-11-06 06:08:37.958232"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "atidjenad@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-11-06 06:08:37.965235"], ["current_sign_in_at", "2015-11-06 06:08:37.965235"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-11-06 06:08:37.966272"], ["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 9ms (ActiveRecord: 0.9ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 2]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.7ms)
Completed 200 OK in 5ms (Views: 1.6ms | ActiveRecord: 0.5ms)
Started PUT "/users" for 127.0.0.1 at 2015-11-05 22:08:37 -0800
Processing by Users::RegistrationsController#update as HTML
  Parameters: {"user"=>{"email"=>"AtidJenad@gmail.com", "name"=>"user abc", "current_password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "name" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["name", "user abc"], ["updated_at", "2015-11-06 06:08:37.991415"], ["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 15ms (ActiveRecord: 1.2ms)
Started GET "/" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by DynamicPagesController#home as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 2]]
Redirected to http://www.example.com/profile
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 2]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.7ms)
Completed 200 OK in 3ms (Views: 1.5ms | ActiveRecord: 0.3ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------
UsersIntegrationTest: test_sign_in_wrong_password
-------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:38.014385"], ["updated_at", "2015-11-06 06:08:38.014385"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$KizGPtLxALaKTZsYrBr/cuNC1ZvrnOLhAGhU7JEHGLUl.dqD9Ky3C"], ["created_at", "2015-11-06 06:08:38.023917"], ["updated_at", "2015-11-06 06:08:38.023917"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "atidjenad@gmail.com"]]
Completed 401 Unauthorized in 20ms (ActiveRecord: 0.3ms)
Started GET "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::SessionsController#new as HTML
  Rendered users/sessions/new.html.erb within layouts/application (1.4ms)
Completed 200 OK in 4ms (Views: 2.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
UsersIntegrationTest: test_sign_up_user_failure_email_regex_bad
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:38.063208"], ["updated_at", "2015-11-06 06:08:38.063208"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$kJLNjpMj0AieIPX06hFD2uKmnKerhyyJ.A/9FJ/NZ4Zdpm3Wh/bhG"], ["created_at", "2015-11-06 06:08:38.070169"], ["updated_at", "2015-11-06 06:08:38.070169"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Started POST "/create-user" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"asdf", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'asdf' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/signup-user
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'asdf' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 302 Found in 13ms (ActiveRecord: 1.5ms)
Started GET "/signup-user" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::RegistrationsController#new_user as HTML
  Rendered users/registrations/new_user.html.erb within layouts/application (2.5ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
UsersIntegrationTest: test_sign_up_user_failure_no_email
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:38.104762"], ["updated_at", "2015-11-06 06:08:38.104762"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$dBluE8fTMu7Wnv53U7vD5ej2a.LgZrA6BpTi9hLY9KpVSkQD1z3KO"], ["created_at", "2015-11-06 06:08:38.110294"], ["updated_at", "2015-11-06 06:08:38.110294"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "customers"
Started POST "/create-user" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/signup-user
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 302 Found in 10ms (ActiveRecord: 0.6ms)
Started GET "/signup-user" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::RegistrationsController#new_user as HTML
  Rendered users/registrations/new_user.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------------
UsersIntegrationTest: test_sign_in_user_successfully
----------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:38.137070"], ["updated_at", "2015-11-06 06:08:38.137070"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$WeVCzwwGF76V2Y01pTXYLejK.cY2IdOWi63BFbJXAQs6GONA927zi"], ["created_at", "2015-11-06 06:08:38.144045"], ["updated_at", "2015-11-06 06:08:38.144045"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "atidjenad@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-11-06 06:08:38.151117"], ["current_sign_in_at", "2015-11-06 06:08:38.151117"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-11-06 06:08:38.152511"], ["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 9ms (ActiveRecord: 0.9ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 2]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.7ms)
Completed 200 OK in 3ms (Views: 1.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
UsersIntegrationTest: test_sign_up_restaurant_user_successfully
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:38.165368"], ["updated_at", "2015-11-06 06:08:38.165368"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$.FuWtdb/DLxYfMhljpOei.l7XArJILl0MjKFt9omYfzdVPiDKXa.C"], ["created_at", "2015-11-06 06:08:38.171997"], ["updated_at", "2015-11-06 06:08:38.171997"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/create-restaurant" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"FendyBilly@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendybilly@gmail.com' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "name", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "fendybilly@gmail.com"], ["encrypted_password", "$2a$04$GLY1HpFr9cAjyEADqtr9xujWfjoO4pKnHZc4sgsDDqCIwVqXWLFYC"], ["name", "FendyBilly"], ["rest", "t"], ["created_at", "2015-11-06 06:08:38.181427"], ["updated_at", "2015-11-06 06:08:38.181427"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-11-06 06:08:38.184749"], ["current_sign_in_at", "2015-11-06 06:08:38.184749"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-11-06 06:08:38.185957"], ["id", 980190996]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/restaurant_new
Completed 302 Found in 15ms (ActiveRecord: 2.1ms)
Started GET "/restaurant_new" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by RestaurantsController#new as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190996]]
  [1m[36mRestaurant Load (0.2ms)[0m  [1mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."user_id" = $1 LIMIT 1[0m  [["user_id", 980190996]]
  Rendered restaurants/new.html.erb within layouts/application (21.0ms)
Completed 200 OK in 29ms (Views: 22.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
UsersIntegrationTest: test_edit_user_but_wrong_current_password
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:38.228474"], ["updated_at", "2015-11-06 06:08:38.228474"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$ZqhFxtFR8MaahK8tltK7suVMcyW0GMsGJ/8fmHMrXRaHe83VkWJNS"], ["created_at", "2015-11-06 06:08:38.234041"], ["updated_at", "2015-11-06 06:08:38.234041"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "atidjenad@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["last_sign_in_at", "2015-11-06 06:08:38.241439"], ["current_sign_in_at", "2015-11-06 06:08:38.241439"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-11-06 06:08:38.242276"], ["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 8ms (ActiveRecord: 0.8ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 2]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.7ms)
Completed 200 OK in 4ms (Views: 1.7ms | ActiveRecord: 0.3ms)
Started PUT "/users" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::RegistrationsController#update as HTML
  Parameters: {"user"=>{"email"=>"AtidJenad@gmail.com", "name"=>"user abc", "current_password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
Redirected to http://www.example.com/setting
Completed 302 Found in 6ms (ActiveRecord: 0.5ms)
Started GET "/setting" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::RegistrationsController#edit as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 2]]
  Rendered users/registrations/edit.html.erb within layouts/application (8.2ms)
Completed 200 OK in 21ms (Views: 18.4ms | ActiveRecord: 0.3ms)
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------------
UsersIntegrationTest: test_sign_up_user_duplicate_failure
---------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:38.290432"], ["updated_at", "2015-11-06 06:08:38.290432"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$02vCrhXE71CD/EOvmkNkG.n9AH1mC4qFTC4zZsMb9sVAo1fukoZIG"], ["created_at", "2015-11-06 06:08:38.297383"], ["updated_at", "2015-11-06 06:08:38.297383"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Started POST "/create-user" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/signup-user
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 302 Found in 10ms (ActiveRecord: 1.4ms)
Started GET "/signup-user" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::RegistrationsController#new_user as HTML
  Rendered users/registrations/new_user.html.erb within layouts/application (0.9ms)
Completed 200 OK in 3ms (Views: 1.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
UsersIntegrationTest: test_sign_up_restaurant_duplicate_failure
---------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:38.324442"], ["updated_at", "2015-11-06 06:08:38.324442"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$NZTh0XW0xTUd1MJVqhFeB.bTsCJT0C3sPxtgDRbnYrvVPUvS71i1C"], ["created_at", "2015-11-06 06:08:38.329873"], ["updated_at", "2015-11-06 06:08:38.329873"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
Started POST "/create-restaurant" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/signup-restaurant
Completed 302 Found in 8ms (ActiveRecord: 0.8ms)
Started GET "/signup-restaurant" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::RegistrationsController#new_rest as HTML
  Rendered users/registrations/new_rest.html.erb within layouts/application (1.2ms)
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------------------------------------------------
UsersIntegrationTest: test_edit_user's_password_but_different_password_and_confirmation_password
------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:38.355135"], ["updated_at", "2015-11-06 06:08:38.355135"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$uLf39KVOhi8/4S3/kVbcUebOUl2A/gJqFBx0lQPGTJfIW.WZQtDKm"], ["created_at", "2015-11-06 06:08:38.360622"], ["updated_at", "2015-11-06 06:08:38.360622"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "atidjenad@gmail.com"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-11-06 06:08:38.367509"], ["current_sign_in_at", "2015-11-06 06:08:38.367509"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-11-06 06:08:38.368818"], ["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 10ms (ActiveRecord: 1.0ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 2]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.7ms)
Completed 200 OK in 3ms (Views: 1.6ms | ActiveRecord: 0.3ms)
Started PUT "/users" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::RegistrationsController#update as HTML
  Parameters: {"user"=>{"email"=>"AtidJenad@gmail.com", "name"=>"user 1", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "current_password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/setting
Completed 302 Found in 13ms (ActiveRecord: 1.0ms)
Started GET "/setting" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::RegistrationsController#edit as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 2]]
  Rendered users/registrations/edit.html.erb within layouts/application (3.8ms)
Completed 200 OK in 7ms (Views: 5.2ms | ActiveRecord: 0.3ms)
Started GET "/logout" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::SessionsController#destroy as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 5ms (ActiveRecord: 0.6ms)
Started GET "/" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by DynamicPagesController#home as HTML
Redirected to http://www.example.com/index
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/index" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by DynamicPagesController#index as HTML
  Rendered dynamic_pages/index.html within layouts/application (1.3ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "atidjenad@gmail.com"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "current_sign_in_at" = $1, "sign_in_count" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["current_sign_in_at", "2015-11-06 06:08:38.431968"], ["sign_in_count", 2], ["updated_at", "2015-11-06 06:08:38.432982"], ["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 10ms (ActiveRecord: 1.0ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 2]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.6ms)
Completed 200 OK in 3ms (Views: 1.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------------------------
UsersIntegrationTest: test_sign_up_user_failure_password_don't_match
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:38.445849"], ["updated_at", "2015-11-06 06:08:38.445849"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$t0Lujj3oyR7SKJ4v2jeQIuri4gJEd42zryBClGJ80MLgiF2IOOqzy"], ["created_at", "2015-11-06 06:08:38.452333"], ["updated_at", "2015-11-06 06:08:38.452333"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Started POST "/create-user" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"user@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/signup-user
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 302 Found in 10ms (ActiveRecord: 1.3ms)
Started GET "/signup-user" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::RegistrationsController#new_user as HTML
  Rendered users/registrations/new_user.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
UsersIntegrationTest: test_sign_up_rest_failure_email_regex_bad
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:38.479019"], ["updated_at", "2015-11-06 06:08:38.479019"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$qnhsEXHMbws.mE/JLUPhX.kMBwfnXX9zhpUS4QBuCYovxlGhce40."], ["created_at", "2015-11-06 06:08:38.484993"], ["updated_at", "2015-11-06 06:08:38.484993"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
Started POST "/create-restaurant" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"asdf", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'asdf' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/signup-restaurant
Completed 302 Found in 7ms (ActiveRecord: 0.7ms)
Started GET "/signup-restaurant" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::RegistrationsController#new_rest as HTML
  Rendered users/registrations/new_rest.html.erb within layouts/application (1.1ms)
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------
UsersIntegrationTest: test_sign_up_customer_user_successfully
-------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:38.510366"], ["updated_at", "2015-11-06 06:08:38.510366"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$HaTXO8PFSZ31D8AD.eVXyeQkhPvs.Gi0y194wWODBlU4F1ywJIziK"], ["created_at", "2015-11-06 06:08:38.515627"], ["updated_at", "2015-11-06 06:08:38.515627"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
Started POST "/create-user" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"FendyBilly@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fendybilly@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "name", "rest", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "fendybilly@gmail.com"], ["encrypted_password", "$2a$04$IXGLk2qGd7NBZWAIq1/k6.fFLF/YQ1Iwn/0a091PJDuD07Xmjc7a."], ["name", "FendyBilly"], ["rest", "f"], ["created_at", "2015-11-06 06:08:38.535061"], ["updated_at", "2015-11-06 06:08:38.535061"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-11-06 06:08:38.537509"], ["current_sign_in_at", "2015-11-06 06:08:38.537509"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-11-06 06:08:38.538256"], ["id", 980190997]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190997], ["phone_number", 0], ["created_at", "2015-11-06 06:08:38.543279"], ["updated_at", "2015-11-06 06:08:38.543279"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 302 Found in 15ms (ActiveRecord: 2.3ms)
Started GET "/" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by DynamicPagesController#home as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190997]]
Redirected to http://www.example.com/profile
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190997]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.9ms)
Completed 200 OK in 4ms (Views: 1.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------
UsersIntegrationTest: test_sign_up_user_failure_password_<_8
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:38.562180"], ["updated_at", "2015-11-06 06:08:38.562180"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$WPE9LyYaoClClQ829/By6eJbiaR/utFXyrD1q9auJ.XVqjpjCsHrC"], ["created_at", "2015-11-06 06:08:38.567935"], ["updated_at", "2015-11-06 06:08:38.567935"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "restaurants"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "customers"[0m
Started POST "/create-user" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::RegistrationsController#create_user as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"user@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/signup-user
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 302 Found in 15ms (ActiveRecord: 2.2ms)
Started GET "/signup-user" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::RegistrationsController#new_user as HTML
  Rendered users/registrations/new_user.html.erb within layouts/application (1.5ms)
Completed 200 OK in 4ms (Views: 3.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------------------
UsersIntegrationTest: test_edit_user's_password_successfully
------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:38.605555"], ["updated_at", "2015-11-06 06:08:38.605555"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$8/iib0TeC2aXSOsD4/L95e8duxu2dknO5pxtVfnutVqcS6yXrkrtm"], ["created_at", "2015-11-06 06:08:38.613574"], ["updated_at", "2015-11-06 06:08:38.613574"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "atidjenad@gmail.com"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-11-06 06:08:38.623423"], ["current_sign_in_at", "2015-11-06 06:08:38.623423"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-11-06 06:08:38.624856"], ["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 12ms (ActiveRecord: 1.2ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 2]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (1.0ms)
Completed 200 OK in 5ms (Views: 2.5ms | ActiveRecord: 0.3ms)
Started PUT "/users" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::RegistrationsController#update as HTML
  Parameters: {"user"=>{"email"=>"AtidJenad@gmail.com", "name"=>"user 1", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "current_password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "users" SET "encrypted_password" = $1, "updated_at" = $2 WHERE "users"."id" = $3  [["encrypted_password", "$2a$04$2gdEMao5IQcQjo.PrJ/W4.MTbIgoO5c2jggPTPT8v2vlHcSAqTQky"], ["updated_at", "2015-11-06 06:08:38.653565"], ["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 16ms (ActiveRecord: 1.5ms)
Started GET "/" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by DynamicPagesController#home as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 2]]
Redirected to http://www.example.com/profile
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 2]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (1.1ms)
Completed 200 OK in 5ms (Views: 2.5ms | ActiveRecord: 0.5ms)
Started GET "/logout" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::SessionsController#destroy as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 6ms (ActiveRecord: 1.1ms)
Started GET "/" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by DynamicPagesController#home as HTML
Redirected to http://www.example.com/index
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/index" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by DynamicPagesController#index as HTML
  Rendered dynamic_pages/index.html within layouts/application (0.2ms)
Completed 200 OK in 2ms (Views: 1.7ms | ActiveRecord: 0.0ms)
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "atidjenad@gmail.com"]]
Completed 401 Unauthorized in 5ms (ActiveRecord: 0.6ms)
Started GET "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::SessionsController#new as HTML
  Rendered users/sessions/new.html.erb within layouts/application (1.9ms)
Completed 200 OK in 5ms (Views: 3.2ms | ActiveRecord: 0.0ms)
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "atidjenad@gmail.com"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "users" SET "current_sign_in_at" = $1, "sign_in_count" = $2, "updated_at" = $3 WHERE "users"."id" = $4  [["current_sign_in_at", "2015-11-06 06:08:38.717691"], ["sign_in_count", 2], ["updated_at", "2015-11-06 06:08:38.718961"], ["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 12ms (ActiveRecord: 1.8ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 2]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (1.6ms)
Completed 200 OK in 6ms (Views: 3.3ms | ActiveRecord: 0.4ms)
  [1m[36m (1.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------------
UsersIntegrationTest: test_edit_user's_email_successfully
---------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:38.741072"], ["updated_at", "2015-11-06 06:08:38.741072"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$SPzo6YgN.Csd4qszyJtvkODtWcH3UO1fxwvS3PPFbSEo73JIufiPq"], ["created_at", "2015-11-06 06:08:38.753255"], ["updated_at", "2015-11-06 06:08:38.753255"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "atidjenad@gmail.com"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-11-06 06:08:38.762898"], ["current_sign_in_at", "2015-11-06 06:08:38.762898"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-11-06 06:08:38.764400"], ["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 10ms (ActiveRecord: 0.9ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 2]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.9ms)
Completed 200 OK in 4ms (Views: 1.9ms | ActiveRecord: 0.3ms)
Started PUT "/users" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::RegistrationsController#update as HTML
  Parameters: {"user"=>{"email"=>"JenadAtid@gmail.com", "name"=>"user 1", "current_password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE ("users"."email" = 'jenadatid@gmail.com' AND "users"."id" != 2) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "email" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["email", "jenadatid@gmail.com"], ["updated_at", "2015-11-06 06:08:38.786203"], ["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 1.7ms)
Started GET "/" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by DynamicPagesController#home as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 2]]
Redirected to http://www.example.com/profile
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 2]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (1.1ms)
Completed 200 OK in 4ms (Views: 2.2ms | ActiveRecord: 0.3ms)
Started GET "/logout" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::SessionsController#destroy as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 0.5ms)
Started GET "/" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by DynamicPagesController#home as HTML
Redirected to http://www.example.com/index
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/index" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by DynamicPagesController#index as HTML
  Rendered dynamic_pages/index.html within layouts/application (0.2ms)
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.0ms)
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "atidjenad@gmail.com"]]
Completed 401 Unauthorized in 2ms (ActiveRecord: 0.3ms)
Started GET "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::SessionsController#new as HTML
  Rendered users/sessions/new.html.erb within layouts/application (1.5ms)
Completed 200 OK in 4ms (Views: 2.6ms | ActiveRecord: 0.0ms)
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"JenadAtid@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "jenadatid@gmail.com"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "users" SET "current_sign_in_at" = $1, "sign_in_count" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["current_sign_in_at", "2015-11-06 06:08:38.834512"], ["sign_in_count", 2], ["updated_at", "2015-11-06 06:08:38.836048"], ["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/profile
Completed 302 Found in 11ms (ActiveRecord: 1.1ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 2]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.8ms)
Completed 200 OK in 4ms (Views: 1.8ms | ActiveRecord: 0.3ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
UsersIntegrationTest: test_sign_in_user_don't_exist
---------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:38.851656"], ["updated_at", "2015-11-06 06:08:38.851656"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$01UotK36nm8xTdWlThM9WeJPjea/iutggxmIgvTHaZEFf2jOdG376"], ["created_at", "2015-11-06 06:08:38.866452"], ["updated_at", "2015-11-06 06:08:38.866452"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"userdontexist@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "userdontexist@gmail.com"]]
Completed 401 Unauthorized in 2ms (ActiveRecord: 0.3ms)
Started GET "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::SessionsController#new as HTML
  Rendered users/sessions/new.html.erb within layouts/application (1.6ms)
Completed 200 OK in 4ms (Views: 2.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------------
UsersIntegrationTest: test_sign_up_rest_failure_password_<_8
------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:38.881583"], ["updated_at", "2015-11-06 06:08:38.881583"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$71UXzpQ6DlboPESYWOu95eWMEfWGvRNuYBUENbo6V4NvPjJwosbKu"], ["created_at", "2015-11-06 06:08:38.887495"], ["updated_at", "2015-11-06 06:08:38.887495"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "customers"
Started POST "/create-restaurant" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::RegistrationsController#create_rest as HTML
  Parameters: {"user"=>{"name"=>"FendyBilly", "email"=>"user@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'user@gmail.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/signup-restaurant
Completed 302 Found in 7ms (ActiveRecord: 0.7ms)
Started GET "/signup-restaurant" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::RegistrationsController#new_rest as HTML
  Rendered users/registrations/new_rest.html.erb within layouts/application (1.2ms)
Completed 200 OK in 4ms (Views: 2.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "customers"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------
UsersIntegrationTest: test_edit_user's_password_but_<8_characters
-----------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:38.911364"], ["updated_at", "2015-11-06 06:08:38.911364"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$U.RwqvyaXnucnWPUPFkovOHAUs.wFjP9LP6DWsgMCSBmgKwQQjn2G"], ["created_at", "2015-11-06 06:08:38.916624"], ["updated_at", "2015-11-06 06:08:38.916624"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "atidjenad@gmail.com"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "last_sign_in_at" = $1, "current_sign_in_at" = $2, "last_sign_in_ip" = $3, "current_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7  [["last_sign_in_at", "2015-11-06 06:08:38.924541"], ["current_sign_in_at", "2015-11-06 06:08:38.924541"], ["last_sign_in_ip", "127.0.0.1/32"], ["current_sign_in_ip", "127.0.0.1/32"], ["sign_in_count", 1], ["updated_at", "2015-11-06 06:08:38.925429"], ["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 9ms (ActiveRecord: 0.9ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 2]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.7ms)
Completed 200 OK in 3ms (Views: 1.5ms | ActiveRecord: 0.3ms)
Started PUT "/users" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::RegistrationsController#update as HTML
  Parameters: {"user"=>{"email"=>"AtidJenad@gmail.com", "name"=>"user 1", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "current_password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Redirected to http://www.example.com/setting
Completed 302 Found in 10ms (ActiveRecord: 0.8ms)
Started GET "/setting" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::RegistrationsController#edit as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 2]]
  Rendered users/registrations/edit.html.erb within layouts/application (2.5ms)
Completed 200 OK in 5ms (Views: 3.6ms | ActiveRecord: 0.3ms)
Started GET "/logout" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::SessionsController#destroy as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/
Completed 302 Found in 5ms (ActiveRecord: 0.6ms)
Started GET "/" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by DynamicPagesController#home as HTML
Redirected to http://www.example.com/index
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/index" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by DynamicPagesController#index as HTML
  Rendered dynamic_pages/index.html within layouts/application (0.2ms)
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.0ms)
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "atidjenad@gmail.com"]]
Completed 401 Unauthorized in 4ms (ActiveRecord: 0.3ms)
Started GET "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::SessionsController#new as HTML
  Rendered users/sessions/new.html.erb within layouts/application (1.3ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms)
Started POST "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by Users::SessionsController#create as HTML
  Parameters: {"user"=>{"email"=>"AtidJenad@gmail.com", "password"=>"[FILTERED]"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "atidjenad@gmail.com"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "users" SET "current_sign_in_at" = $1, "sign_in_count" = $2, "updated_at" = $3 WHERE "users"."id" = $4  [["current_sign_in_at", "2015-11-06 06:08:38.986301"], ["sign_in_count", 2], ["updated_at", "2015-11-06 06:08:38.987701"], ["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/profile
Completed 302 Found in 9ms (ActiveRecord: 1.0ms)
Started GET "/profile" for 127.0.0.1 at 2015-11-05 22:08:38 -0800
Processing by DynamicPagesController#profile as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 2]]
  Rendered dynamic_pages/profile.html.erb within layouts/application (0.7ms)
Completed 200 OK in 3ms (Views: 1.5ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------
UsersIntegrationTest: test_edit_user_but_not_signed_in
------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:38.999936"], ["updated_at", "2015-11-06 06:08:38.999936"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$FcyJgWbFyBKBcUE5SvO6DeNYhD9mm6W5Ov/ybSHPjCGUF4GwOWzN6"], ["created_at", "2015-11-06 06:08:39.005388"], ["updated_at", "2015-11-06 06:08:39.005388"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started PUT "/users" for 127.0.0.1 at 2015-11-05 22:08:39 -0800
Processing by Users::RegistrationsController#update as HTML
  Parameters: {"user"=>{"email"=>"AtidJenad@gmail.com", "name"=>"user abc", "current_password"=>"[FILTERED]"}}
Completed 401 Unauthorized in 0ms (ActiveRecord: 0.0ms)
Started GET "/sign_in" for 127.0.0.1 at 2015-11-05 22:08:39 -0800
Processing by Users::SessionsController#new as HTML
  Rendered users/sessions/new.html.erb within layouts/application (1.3ms)
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.0ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------
CustomerTest: test_correct_customer
-----------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 2], ["phone_number", 0], ["created_at", "2015-11-06 06:08:39.018783"], ["updated_at", "2015-11-06 06:08:39.018783"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'atidjenad@gmail.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("id", "name", "email", "rest", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["id", 2], ["name", "user 1"], ["email", "atidjenad@gmail.com"], ["rest", "f"], ["encrypted_password", "$2a$04$C1iuFRJDA2aSnKSzJ.lvzOJ1TeRTAGBgEDF2AyTzC8xaM3Zl/ImgG"], ["created_at", "2015-11-06 06:08:39.026452"], ["updated_at", "2015-11-06 06:08:39.026452"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "customers" ("user_id", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 3], ["phone_number", 0], ["created_at", "2015-11-06 06:08:39.028694"], ["updated_at", "2015-11-06 06:08:39.028694"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
